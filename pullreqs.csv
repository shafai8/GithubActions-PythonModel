Description,Class
"Issue number: N/A What is the current behavior? Our Angular E2E tests are brittle because they rely on arbitrary cy.wait calls to account for asynchronous routing. This leads to flaky tests on CI and seemingly random test failures when we make adjustments to the Ionic Anguar routing integration (see: #28188) Additionally, our test execution for the navigation tests is quite slow because transitions are enabled. As a result, we need to wait hundreds of ms per test just for the transitions to finish. What is the new behavior? Updated the testStack command to use a new getStack Cypress query. These queries come with automatic retrying built-in. By leveraging this query in the testStack command, we can avoid the arbitrary waits. Added ionic:_testing=true query strings to the navigation tests. This causes Ionic to disable any transitions so the tests execute faster. Removed most of the arbitrary cy.wait calls. I kept the swipe to go back cy.wait -- I wasn't quite sure how to reduce flakiness on that one. Does this introduce a breaking change? Yes No Other information",Merged
"Issue number: N/A What is the current behavior? When using an ion-label as a label slot inside of an ion-input, ion-textarea or ion-select it erroneously flags the input as a legacy component and ignores the label-placement: Code	Result <ion-item> <ion-input label-placement=""floating""> <ion-label slot=""label""> <ion-icon name=""home""></ion-icon> Slotted Label </ion-label> </ion-input> </ion-item> <ion-item> <ion-input label-placement=""floating"" value=""Value""> <ion-label slot=""label""> <ion-icon name=""person""></ion-icon> Slotted Label </ion-label> </ion-input> </ion-item> Screenshot 2023-11-07 at 10 37 43 AM What is the new behavior? Adds ion-input, ion-textarea, and ion-select as components that can contain a named label slot so it no longer assumes that they are legacy components. Code	Result <ion-item> <ion-input label-placement=""floating""> <ion-label slot=""label""> <ion-icon name=""home""></ion-icon> Slotted Label </ion-label> </ion-input> </ion-item> <ion-item> <ion-input label-placement=""floating"" value=""Value""> <ion-label slot=""label""> <ion-icon name=""person""></ion-icon> Slotted Label </ion-label> </ion-input> </ion-item> Does this introduce a breaking change? Yes No",Merged
"Issue number: internal What is the current behavior? As a takeaway from our learning session about a menuController bug in Ionic Angular, the team would like to update our other providers to use the same architecture as the menuController to prevent this kind of issue from happening again in the future. We also noticed that the common provider does not provide much value and it's easier to just have two separate implementations in src and standalone. (There wasn't much code we could de-duplicate) What is the new behavior? Removed the common popover provider in favor of separate ones in src/standalone Does this introduce a breaking change? Yes No Other information I didn't add tests because there's already existing ones for popover controller.",Merged
"Issue number: N/A What is the current behavior? As a takeaway from our learning session about a menuController bug in Ionic Angular, the team would like to update our other providers to use the same architecture as the menuController to prevent this kind of issue from happening again in the future. We also noticed that the common provider does not provide much value and it's easier to just have two separate implementations in src and standalone. (There wasn't much code we could de-duplicate) What is the new behavior? Removed the common modal provider in favor of separate ones in src/standalone We already have test coverage for the modalController, so I did not add new ones Does this introduce a breaking change? Yes No Other information",Merged
"Issue number: resolves #28356 What is the current behavior? ion-radio-group would not set the radio value when using it as a Angular standalone component and data binding: <ion-radio-group [value]=""fromValue""> <ion-radio value=""dogs"">Dogs</ion-radio><br /> <ion-radio value=""cats"">Cats</ion-radio><br /> <ion-radio value=""turtles"">Turtles</ion-radio><br /> <ion-radio value=""fish"">Fish</ion-radio><br /> </ion-radio-group> This is happening because the value is set before the value watcher has been configured. The event, ionValueChange, does not get dispatched. What is the new behavior? Run valueChanged() in componentDidLoad(). valueChanged() function is tied to the value watcher so it will dispatch the ionValueChange. Does this introduce a breaking change? Yes No Other information In our testing, we observed that the issue described below only occurs when assigning a value to the radio group within the primary content, such as rendering within the app component template. When the template is isolated to a route, the value is assigned correctly. To address this issue, we need to ensure that the watcher is called after the component has finished loading, allowing the emit to be dispatched correctly. Dev build: 7.5.4-dev.11699404450.136700d7",Merged
Issue number: resolves #23977 What is the current behavior? The MD Alert on tablet dimensions does not match the MD spec What is the new behavior? MD Alert now follows the MD spec for tablet dimensions Added tablet and mobile viewport mixins for alert and the card modal. (There should be no visual diffs for the card modal) Does this introduce a breaking change? Yes No Other information This supersedes #27462 since I needed to add new screenshot tests. The author of that PR has been given co-author credit here.,Merged
"Issue number: N/A What is the current behavior? As a takeaway from our learning session about a menuController bug in Ionic Angular, the team would like to update our other providers to use the same architecture as the menuController to prevent this kind of issue from happening again in the future. We also noticed that the common provider does not provide much value and it's easier to just have two separate implementations in src and standalone. (There wasn't much code we could de-duplicate) What is the new behavior? Removed the common toast provider in favor of separate ones in src/standalone Does this introduce a breaking change? Yes No Other information",Merged
Issue number: N/A What is the current behavior? While evaluating step colors for high contrast themes I discovered that this code is not actually applied anywhere. What is the new behavior? Remove unused code Does this introduce a breaking change? Yes No Other information,Merged
"Issue number: fixes #27777 What is the current behavior? When safe area (top/bottom) is applied to an action sheet with scrollable options and a cancel button, the cancel button is pushed off the screen and cannot be reached. What is the new behavior? Properly adjust the height of the action sheet container to account for the top and bottom safe area. Does this introduce a breaking change? Yes No Other information The below screenshots use the following CSS when safe area is added so it is expected that the action sheet will adjust the top and bottom: :root { --ion-safe-area-top: 60px; --ion-safe-area-bottom: 40px; } iOS Before (main)	After (FW-4715) No Safe Area	ios-main-no-safe-area	ios-branch-no-safe-area Safe Area	ios-main-safe-area	ios-branch-safe-area Material Design Before (main)	After (FW-4715) No Safe Area	md-main-no-safe-area	md-branch-no-safe-area Safe Area	md-main-safe-area	md-branch-safe-area",Merged
"Issue number: resolves #28506 What is the current behavior? ion-accordion-group would not set the value when using it as a Angular standalone component and data binding: <ion-accordion-group #accordionGroup [value]=""fromValue""> <ion-accordion value=""turtles""> <ion-item slot=""header"" color=""light""> <ion-label>First Accordion</ion-label> </ion-item> <div class=""ion-padding"" slot=""content"">First Content</div> </ion-accordion> <ion-accordion value=""second""> <ion-item slot=""header"" color=""light""> <ion-label>Second Accordion</ion-label> </ion-item> <div class=""ion-padding"" slot=""content"">Second Content</div> </ion-accordion> </ion-accordion-group> The problem here is Angular is setting the value of the accordion group after the component has been initialized (but not loaded) and before the component watchers are setup, so valueChanged does not fire automatically. What is the new behavior? Run valueChanged() in componentDidLoad(). Does this introduce a breaking change? Yes No Other information",Merged
"Issue number: Internal What is the current behavior? As a takeaway from our learning session about a menuController bug in Ionic Angular, the team would like to update our other providers to use the same architecture as the menuController to prevent this kind of issue from happening again in the future. We also noticed that the common provider does not provide much value and it's easier to just have two separate implementations in src and standalone. (There wasn't much code we could de-duplicate) What is the new behavior? Removed the common picker provider in favor of separate ones in src/standalone Does this introduce a breaking change? Yes No Other information",Merged
Issue number: N/A What is the current behavior? Ionic Framework migrated to using eslint for linting all of our projects awhile ago. However we left around an unused tslint config file in the Angular project by accident. What is the new behavior? Removes the unused tslint configuration file Does this introduce a breaking change? Yes No Other information,Merged
"Issue number: resolves #16569 What is the current behavior? Ionic Angular's routing integration disables page transitions when using the browser back/forward buttons. What is the new behavior? Transitions now play when using the back/forward buttons Does this introduce a breaking change? Yes No We're not aware of any breaking changes here, though it's possible some developers were relying on this behavior. As a result, we are targeting Ionic 8 to minimize any potential negative impact this fix may have on developers. Other information Supersedes #28188 Dev build: 7.5.6-dev.11700068172.15ce9b35",Merged
Issue number: N/A What is the current behavior? Type checking is disabled in the standalone/ directory of the angular project. What is the new behavior? Enables type checking in the standalone directories. Does this introduce a breaking change? Yes No Other information,Merged
Does some minor spring cleaning after I spotted this Reddit thread: https://www.reddit.com/r/typescript/comments/ewjhiy/typescript_i_love_you_but_this_documentation_is/ I tried to orient folks to understanding that namespaces are a TS thing I re-oriented the order in which they're presented to give modules first I removed the references to the 1.5 transition,Merged
"Those 3 code examples are a bit hard to follow. So I think showing console results helps, especially for people who are new to OO language.",Merged
"Description PR to get a11y in shape. We'll merge into this branch in the following days until we have a good state. Then we'll make CI green again and get it into master. Rules for working with this branch: 1: branch off from this branch, make PRs back into it 2: we ignore CI until it's in a good state, just to gain some speed 3: we don't make ODS releases at the moment. Instead, run yarn link in your local clone of the ODS repo once (only needed once to set a repository up for linking), then run yarn link owncloud-design-system in your local clone of the web repo. Once there are changes in ODS that you want to use, you need to pull ODS, run yarn build:system and that'll be sufficient for having an up to date ODS in your web codebase. 4: coordinate with the team to not duplicate efforts on the same issue Related Issue Fixes <issue_link> Motivation and Context How Has This Been Tested? test environment: test case 1: test case 2: ... Screenshots (if appropriate): Types of changes Bug fix (non-breaking change which fixes an issue) New feature (non-breaking change which adds functionality) Breaking change (fix or feature that would cause existing functionality to change) Technical debt Tests Checklist: Code changes Unit tests added Acceptance tests added Documentation ticket raised: Open tasks: ...",Merged
Advantages of strictTemplates: finds a lot more mistakes in the .html templates Advantages of strictNullChecks: no more confusion between undefined & null only things defined as having type X | null can be null detects functions with a missing return in a branch no need for many null checks in constructors: reduces the number of branches and trivial tests,Merged
"This is tied to refactors related to #1289 In this PR, we disambiguate between a choice and an item in the list, and between the cursor position and the active index, and add utility methods. We also extract out the render function. In addition, we simplify isSelectableChoice into selectable, a refinement function which does not work on undefined, and instead handle undefined in the more idiomatic way (which doesn't need comments).",Merged
"Summary Working on refactoring jobs service. This is a bit of preliminary work, I have to improve the testing and all that stuff, but I want to know if the idea is what was expected. I changed a bit the approach for simplicity, to make this change as one step in the right direction, but I would do more steps, like create base schedulers and workers for the most common scenarios. Also, registering new workers can be done in the global scope to use init functions, but maybe it is not the best way to do that. I have to think about what to do with that. This also have a bit of code on the enterprise repo here: mattermost/enterprise#1117 Ticket Link https://mattermost.atlassian.net/browse/MM-26769 Release Note NONE",Merged
"In this PR, we add support for loop: false in checkbox and select prompts. In addition, we also add navigation and speed dial as separate hooks which can be used along with pagination to compose up custom prompts. Because they are composable, they support use cases of navigation and speed dial without pagination. In the revised pagination, we also render only a maximum of pageSize elements at any time. We also account for the render taking up multiple lines for a single item, retaining the cursor position as expected. This results in 2 benefits: It's more performant (as we don't render every line - we only render a page of items) It doesn't cause issues where the cursor position is greater than 1, but a previous item (not the first, or index 0) has several lines of output causing the cursor position (line) to not even be visible.",Merged
"This fixes a bug in the input processing of ""rawlist"". To reproduce the bug: Run a rawlist configuration Use the arrow keys to select an item Then use the number keys to enter a specific item, and press enter Get an ""invalid option"" error Because the arrow keys record the selected index on the input line, when the user enters a specific index, an ultimately invalid index is processed by the code. This works around that by not using the input line to record the selected index when using arrow keys. Instead it records the selected index in a private variable.",Merged
"Phase 1 Purpose Implement the I18n class which provides a means to supply translations in a standard format that it not dependent on a localization framework Translate the Kibana welcome message which proves that the I18n class provides translations as registered for Kibana Decide Language for Translation Algorithm The algorithm which decides the language for loading translations is as follows: First, do a direct comparison with the highest priority locale in the HTTP header “accept-language” against the registered translation languages. If comparison found then this is the language returned. Next, do a partial comparison of this locale whereby you try and get a language code comparison against the registered translation languages. For example, ""fr"" or ""fr-FR"" is used for all regions of French if comparison applies. If comparison found then this is the language returned. Next, repeat step 2 and if need be step 3 for the next highest priority locale in the “accept-language” list. Continue, until match found in step 2/step 3 or end of the “accept-language” list. If no match found then return empty language. I18n Class Manages the language translations for Kibana Responsible for loading translated content per language The translations file are JSON files with a flat keyspace, where the keys are unique. This uniqueness between translation plugins could be achieved by prefixing the keys with the plugin name. The key signifies the translation ID which would be referenced in translatable files (like JS, HTML etc.). The key value is the translation string Example translation JSON file en.json { ""UI-WELCOME_MESSAGE"": ""Loading Kibana"", ""UI-LOADING_MESSAGE"": ""Give me a moment here. I'm loading a whole bunch of code. Don't worry, all this good stuff will be cached up for next time!"", ""UI-WELCOME_ERROR"": ""Kibana did not load properly. Check the server output for more information."" } Core Kibana plugins like ‘kibana’ and ‘status_page’ could come with their own English translations bundled in API: Return all translations for registered locales getAllTranslations() A Promise object where keys are the locale and values are Objects of translation keys and translations Return all translations registered for the default locale: getTranslationsForDefaultLocale() A Promise for an object where keys are translation keys and values are translations Return translations for a suitable locale from a user side locale list of BCP 47 language tags: getTranslations(...languageTags) A Promise for an object where keys are translation keys and values are translations This object will contain all registered translations for the highest priority locale which is registered with the i18n module This object can be empty if no locale in the language tags can be matched against the registered locales Register translations: registerTranslations(<absolute_path_to_translation_file>) The path to the translation file is registered with i18n class UiI18n Class Handles the interaction between the UI/server and localization (I18n class) Maps the accept-language header to BCP 47 tags Fetches the language as requested where the locale is decided by the translation algorithm It also substitutes any missing translations with the default locale translation Deliverable Translate the start-up message (“Kibana is loading ...”) and error message in the Jade template (https://github.com/elastic/kibana/blob/master/src/ui/views/ui_app.jade) Translation message will be loaded using the language as per the deciding algorithm. For phase 1 the default 'en' langauge will be used. I18n unit tests Jade template verification of translation strings: Enforce a pattern to be used. For example a i18n(<key>) function in the Jade template. A tool can then be used to find such pattern and extract the keys to file. The keys in the key file(s) would then be checked against the language translation files registered Kibana core plugin registers its translation file during the initialization phase. The translation file contains strings for the welcome message and the start-up error message.",Merged
"TODO before merge:

 epic checklist Epic Release checklist: CPQ #11645
 undo local changes:
 package.json (see here)
 .env-cmdrc
 config routing.protected in app
 projects/storefrontapp/src/app/app.module.ts (see here)
 environment.ts
 projects/storefrontapp-e2e-cypress/package.json, remove cy:run:cpq script (see here)
 cypress.json
 styles.scss",Merged
"👋👋 Thank you for contributing to Looker sdk-codegen (⚡️🍣) 👆 Make sure your pull request title follows Pull Request Title Guidelines from our Contribution guide 👉 Don't forget to replace these instructions with your ✨awesome✨ description of what this change actually does. Additionally, it's great to include context on how it works and why the change was needed. 👇 Edit ""Developer Checklist"" to reflect items relevant to this PR (and try to make sure to check everything off before asking for review) Developer Checklist ℹ️ Thank you for opening a Pull Request! Before submitting your PR, there are a few things you can do to make sure it goes smoothly: Make sure to open an issue as a bug/issue before writing your code! That way we can discuss the change, evaluate designs, and agree on the general idea Ensure the tests and linter pass Appropriate docs were updated (if necessary) Fixes #1386 🦕",Merged
"CamelCased K8s resources in the nav, list pages, details pages, and kebab/action dropdowns. Externalized K8s resource labels in the public folder. I didn't touch the K8s stuff in the Home tab because I'm not sure what's already been internationalized there - I may need to do that as a follow-on. I kept labels and labelPlurals in K8sKind because I'm not sure if they're still being used elsewhere. Fixes https://issues.redhat.com/projects/CONSOLE/issues/CONSOLE-2440 and https://bugzilla.redhat.com/show_bug.cgi?id=1909005.",Merged
"Launch Checklist confirm your changes do not include backports from Mapbox projects (unless with compliant license) document any changes to public APIs: Removed version from library API. Remove support of IE11 post benchmark scores manually test the debug page apply changelog label ('bug', 'feature', 'docs', etc) or use the label 'skip changelog' add an entry inside this element for inclusion in the maplibre-gl-js changelog: <changelog></changelog> Motivation and some background: The current code run on node 10, the migration to node 14 is difficult since some of the libraries are no longer supported. This is also true regarding documentation of essential libraries such as flow (for typings) and tap (for testing). The goal of this PR is to update the stack to a more widely used technologies and differentiate this library from mapbox-gl to avoid license breach. Techonologies Typescript for type checking Jest for testing rollup for packaging eslint for code checking The following boilerplate code would be used to facilitate the above widely used technologies. https://github.com/VitorLuizC/typescript-library-boilerplate This is a very large task and we'd appreciate any help from anyone :-) Task by priority: Convert src file from Flow to Typescript Upgrade CI and references script to esm and node 14 Make lint pass on all source files Make build pass on tsc including rollup required changes Remove usage of @mapbox/geojson-types and use @types/geosjon. Remove usage of @mapbox/point-geometry and bring it in to this library (after converting it to typescript as this is only one file). Convert test, debug, benchmark code to typescript Make all linters pass (not just for the main library) [Typescript] Add more folders to lint #272 Make their tsc pass Convert tests to use jest [Typescript] Convert tests to jest and karma #273 Make all tests pass Remove tap and related code around it [Typescript] Convert tests to jest and karma #273 Update dependencies (referenced in package.json) [Typescript] Update dependencies #270 Change types only declarations to .d.ts files [Typescript] Rename declarations only files to d.ts #271 Make sure this PR doesn't break how the docs repo is using this repo Make sure @maplibre/style-spec is working Make sure everything is working as expected and merge back to main - see if there are feature that need to be added to close the gap from when this branch started. I have decided to reduce the number of changes introduced in this migration - i.e. keep the tests as they are now, do not convert unit tests to typescript. There will be an option later to do all these changes after things starts to work as expected in other PRs.",Merged
"Fix issue causing a broken build. We should probably run the build in CI (part of npm test) as it would have surfaced the error in the original PR. The core problem was lerna wasn't filtering out workspaces we don't want to build. Ideally we would use npx -w packages, but NPM doesn't topologically sort and we'd have to declare each workspace in order of dependence manually. See: npm/cli#4139. NPM moves so slowly and has a general distaste - it seems - for adopting useful behavior (see pnpm), I wouldn't hold our breath. Lerna make sense for now. Hooooooowever, onto the next point To move away from Lerna and Yarn, we'd need to do a combo of TypeScript project references (to remove the need for --sort when running tsc) and define build scripts in each package that needs to build, then use `npm run build --if-present --workspaces. We really shouldn't be defining root scripts that operate on workspaces.",Merged
"…1 to v8.3 and upgraded linter (#1343) chore(deps): Updated Kotlin from v1.7.0 to v1.9.10, Gradle from v6.7.1 to v8.3 and upgraded linter chore(deps): upgraded kotlin linter formatted code chore(deps): Updated Kotlin from v1.7.0 to v1.9.10, Gradle from v6.7.1 to v8.3 and upgraded linter adding foojay-resolver-convention gradle plugin chore(deps): Updated Kotlin from v1.7.0 to v1.9.10, Gradle from v6.7.1 to v8.3 and upgraded linter setting gradle jvm toolchain version from 8 to 17 chore(deps): upgraded kotlin linter formatted code from #1343",Merged
"To test: run yarn && yarn build navigate to packages/embed-playground run yarn play In your browser, visit https://localhost:8080/dashboards/42 or https://localhost:8080/explore/thelook/orders or https://localhost:8080/looks/42 and authenticate. Play around with having different existing url params (including theme)",Merged
"There is a small library and a CLI to generate TypeScript typings for both server (according to your schema) and client (according to your schema and GraphQL documents). It also generates resolvers signature and very customizable. The idea behind it was to allow the developer to get the most out of GraphQL and the generated typings, and making it easier to customize the generated output. So, I changed the code a little bit and the generation script inside package.json. You can check it out; https://github.com/dotansimha/graphql-code-generator",Merged
"There is a small library and a CLI to generate TypeScript typings for both server (according to your schema) and client (according to your schema and GraphQL documents). It also generates resolvers signature and very customizable. The idea behind it was to allow the developer to get the most out of GraphQL and the generated typings, and making it easier to customize the generated output. So, I changed the code a little bit and the generation script inside package.json. You can check it out; https://github.com/dotansimha/graphql-code-generator",Merged
This pull request removes the accidentally committed .DS_Store files that occur in Mac OSX from the repository and adds a .gitignore file to prevent them from being accidentally committed in the future. The .gitignore file is based on the GitHub Gist by andreasonny83 (https://gist.github.com/andreasonny83/b24e38b7772a3ea362d8e8d238d5a7bc). The changes made in this pull request should help keep the repository cleaner and more organised. Thank you for your time reviewing this pull request!,Merged
"This is a very simple fix to the mousemove event listener. When developing on smaller screens, when the mouse is moved out of the viewport area, it cannot find the event target and hence throws error. Just adding a check to ensure that it's not null before finding the closest selector.",Merged
"fixes #130 Also i think rest of the categories require state update as some of the languages have gotten better stability while some have been unmaintained and deprecated. languages like never & cobaul havent been updated in years yet they are tagged ""stable"" . IMHO languages that havent been updated in 9months should move towards the unmaintained category.",Merged
"This is a breaking change for consumers of @tsconfig/ember, as they'll receive errors if they were not previously enforcing import type for type-imports. Context: Already used in Ember's library blueprint: https://github.com/embroider-build/addon-blueprint/blob/main/files/__addonLocation__/tsconfig.json Already used in Svelte: https://github.com/tsconfig/bases/blob/main/bases/svelte.json#L14 The problem being solved here: TS transform breaks imports in templates emberjs/babel-plugin-ember-template-compilation#30 Another repro: v4 is not working for select environments ember-template-imports/ember-template-imports#207 An option we have for solving these issues is to combine onlyRemoveTypeImports and setting verbatimModuleSyntax: true. Discord disco: https://discord.com/channels/480462759797063690/568935504288940056/1166059161369460797",Merged
"Fixes #220 Summary As ı mentioned in the issue, repo's config bases have some inconsistent case convention. I simply changed their case to lowercase because as far as ı can see, bases mostly used lowercase versions of same name. Commit message problem I accidently pushed to branch without add every changes to working tree. Removed the remote repo and local but Github somehow cached the old one (I am dealing with this problem first one, sorry about that). I think they going to squash merge to main this PR but can try to change commit message if that's a problem.",Merged
"Modeled after #171, this adds support for Node21. Side-note, I checked node.green, and found that Node.js 18.18.2, 19, and 20 all support ES2023. Should I update ""target"" of our corresponding presets to es2023 to match that, now that the value is supported by the latest TypeScript version? Closes #231 Closes #209 (already fixed by #210)",Merged
"An out of the box typechecking in the RN TypeScript template will still resolve node instead of react-native or default, which isn't quite right, but this unblocks usage which isn't platform-specific, or cases where different platforms have the same types. When RN starts targeting 5.0 we should consider changing it to moduleResolution: ""bundler"" and customizing the resolution behavior more in the RN template. The version we ship this in (and whether we need to bump major again) depends on if we want to enable this for 0.72 vs 0.73.",Merged
"In the Announcing Typescript 5.0 blogpost, the Typescript team introduced the moduleResolution: bundler option. They say: If you are using a modern bundler like Vite, esbuild, swc, Webpack, Parcel, and others that implement a hybrid lookup strategy, the new bundler option should be a good fit for you. This PR changes moduleResolution to the new strategy for the Vite React base. Please let me know if this change is also applicable to any other bases, then I will edit those as well.",Merged
"Removes more places that use cancelable in favor of abort controller.
Changes getVideo to return a promise instead of callback/cancelable.
Improve usage in async in tests and added a spy.",Merged
"Launch Checklist
On Windows machine if environment is not created with symbolic link, two render tests will fail and it is time consuming to debug. This PR removes the symbolic links and just copy the test assets instead

 Confirm your changes do not include backports from Mapbox projects (unless with compliant license) - if you are not sure about this, please ask!
 Briefly describe the changes in this PR.",Merged
"Launch Checklist
On Windows machine if environment is not created with symbolic link, two render tests will fail and it is time consuming to debug. This PR removes the symbolic links and just copy the test assets instead

 Confirm your changes do not include backports from Mapbox projects (unless with compliant license) - if you are not sure about this, please ask!
 Briefly describe the changes in this PR.",Merged
"This PR removes all the errors and warnings that are emitted during the run of the unit tests.
These console warnings and errors are not needed and are cluttering the console when tests are failing.

I didn't want to do this PR against main since I changed a lot of tests classes in this branch and I wanted to avoid conflicts.",Merged
"Confirm your changes do not include backports from Mapbox projects (unless with compliant license) - if you are not sure about this, please ask!
This basically updates the dependencies that failed to be updated automatically due to changes that are required.
mock_fetch will be removed soon, so I simply added a basic any to resolve the problem for now...",Merged
"This allows the release to run on main every time there's a push.
It will check if the current version is the same, if not, it will publish a release to npm and all the other release stuff.
I've tested this to work on ngx-maplibre-gl, so I'm confidant that this is possible now.",Merged
"Ha, finally I am doing a pull request again to maplibre-gl-js, even if it is just a small docs thing...

Launch Checklist
 Confirm your changes do not include backports from Mapbox projects (unless with compliant license) - if you are not sure about this, please ask!
 Briefly describe the changes in this PR.
 Link to related issues.
 Include before/after visuals or gifs if this PR includes visual changes.
 Write tests for all new functionality.
 Document any changes to public APIs.
 Post benchmark scores.
 Add an entry to CHANGELOG.md under the ## main section.",Merged
"Hopefully this would solve the issue.
If now, I can try and revert to the previous definition of the node version, it might help, IDK...

Based on this:
npm/cli#6184 (comment)",Merged
"I'm trying to fix the release, for some reason it fails and I don't understand why.
I also moved the publish early to make sure if it fails, other stuff are not done like publishing the docs, creating a GitHub release etc.",Merged
"Seems like GitHub Actions workflow runner doesn't have the right permissions to use org level secrets, so this needs to be manual again to have the right permissions, unfortunately...
I've updated the workflow and the relevant readme.",Merged
"This changes the release process to do the following steps:

Allow creating a bump version PR from the workflows manual run menu, allowing to set the version number.
Checks every commit to see if the package.json file had changed, if so, it will publish a version to npm and github automatically.
I tried to do it in one step but there are problems with permissions etc and I didn't want to create a PAT just for this.
While it's not ideal, we'll be able to push version more easily now.",Merged
"Launch Checklist
 Confirm your changes do not include backports from Mapbox projects (unless with compliant license) - if you are not sure about this, please ask!
 Briefly describe the changes in this PR.
 Link to related issues.
 Include before/after visuals or gifs if this PR includes visual changes.
 Write tests for all new functionality.
 Document any changes to public APIs.
 Post benchmark scores.
 Add an entry to CHANGELOG.md under the ## main section.
In case of stopping an Camera ease animation, it appears that Camera._renderFrameCallback() of a Task can be called before the Camera._cancelRenderFrame(TaskID) of this Task and so Camera._onEaseFrame(...) is undefined and crash the app.

Fix this issue : #3328",Merged
"Fix the watch command in packages/pages/package.json so npm run build doesn't need to be manually run each time a change is made to see the effects in a linked test site. Previously, this command would throw an error.

J=SUMO-5462
TEST=manual

Check that npm run build still works as expected. Run npm run watch and see that changes are automatically picked up and trigger a rebuild.",Merged
"Limit autosize columns to 700 width
Change font size in results and editor
Use recursive font in editor
Add grid lines to the table view
Make rows slightly larger
Fix whitespace overflow bug in column pane",Merged
"rename internal react package
name conflicts with external package causing dependency issues
this is needed in preparation for other packages that have react dependencies
fix testing tsx files
fix missing typedefs in shared package",Merged
"[operation, relativePath, entry]

entry is present IFF operation is change/create/mkdir
entry is not present for unlink or rmdir

This may change in the future, but it appears to kite the problem

This pr also reduces the number of Entry objects created, reusing existing ones, and ensuring the tree’s on entry objects have the actual relativePath rather then the tree node relativePath.",Merged
"$app/forms and $app/navigation mocking are now supported in Sveltekit integration

Closes #

What I did
Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks!

Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Follows up and Closes #23658

What I did
With this pull request the documentation was updated to:

Feature TS and TS-4-9 examples
Cleanup existing JavaScript variants
Add conditionally rendering to some of the documentation as it's not available per current state of the framework (sections are identified as such with a comment)
Fix snippets that were causing the documentation to break in a couple of places
@JReinhold when you have a moment can you take a look at this and let me know of any feedback you may have? Thanks in advance.

Checklist for Contributors
Testing
Follow the steps in the contributing instructions for this branch, docs_svelte_ts_example.
Open the relevant documentation and verify the feature changes.
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks!

Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Closes #21387, #17233, #24241, #20475, #14043

What I did
The CSF Plugin was reading the source file from the filesystem instead of processing it as a loader within a loader chain. The transformations applied by the CSF Plugin overrode any processing that had occurred before. Angular for instance does also access the filesystem directly to transform files. The CSF loader therefore has to be applied at a later point. This requires the CSF loader to apply the necessary transformations on already transformed files. The loader has to read the original source file, though, to get the source code before any other transformer touches it (prevent removed comments or transformed code).

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks!

Test that JSON comments are preserved
Go to one of the deployed Angular Storybooks in Chromatic
Visit ?path=/docs/addons-docs-docspage-basic--docs story
JSON docs are applied as descriptions to args
Storysource
Create an Angular sandbox
Install @storybook/storysource
Visit a Story in the browser. The Storysource section in the controls tab should not show ""Loading source..."", but the actual source code of that Story instead.
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Addresses #22970

What I did
With this pull request, the ArgTypes links were updated to prevent them from 404ing in the documentation, whether viewing the source or, for instance, the pre-release version available. Originally reported here.

A simple test to verify this is to open the Vite builder pre-release documentation and click the link pointing to the ArgTypes documentation which will cause the 404. This can also be replicated by viewing the documentation in situ here on GitHub.

@kylegach I saw that you have a redirect in place, which helped out when the changes came online, but now is having a negative impact as the previous versions of the documentation are also 404ing (e.g., version 7.5, 7.4, etc). Can we mitigate this and set up something for those versions?

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks!

Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels",Merged
"What I did
I try to keep my project dependencies up to date. I'm using vite@5 and storybook@7.6 and currently the only warning I see in my repo is:

WARN  Issues with peer dependencies found
.
└─┬ @storybook/react-vite 7.6.3
  └─┬ @vitejs/plugin-react 3.1.0
    └── ✕ unmet peer vite@^4.1.0-beta.0: found 5.0.4
To fix this, I am updating the @vitejs/plugin-react version from ^3.0.1 to ^4.2.0.

Here is the changelog:
https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react/CHANGELOG.md

The biggest change appears to be requiring vite 4.2.0. I'm not sure about the number of vite@3 users storybook has, but I think they can force the version of vite-plugin-react they want by using overrides in their package.json.

The usage in storybook for vite-plugin-react is just a function call: react() - so the API hasn't changed at all.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
I'm not sure if/how @storybook/react-vite is covered by any tests in this repo. I ran yarn test in the root, and everything passed, but I'm having trouble finding a good way to test this package.

Manual testing
This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks!

Run a sandbox for a vite template: yarn task --task sandbox --start-from auto --template react-vite/default-ts
Open Storybook in your browser
Access a few stories to confirm that vite/react is still working
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
bug: Internal changes that fixes incorrect behavior.
maintenance: User-facing maintenance tasks.
dependencies: Upgrading (sometimes downgrading) dependencies.
build: Internal-facing build tooling & test updates. Will not show up in release changelog.
cleanup: Minor cleanup style change. Will not show up in release changelog.
documentation: Documentation only changes. Will not show up in release changelog.
feature request: Introducing a new feature.
BREAKING CHANGE: Changes that break compatibility in some way with current major version.
other: Changes that don't fit in the above categories.",Merged
"What I did
Refactored the method of deriving the correct validateData function to improve handling of different Next.js version compatibilities. Replaced multiple try-catch blocks with a trials array containing objects with module, export, and description properties. This array is used to dynamically attempt loading the required functions and generate a detailed error message if all attempts fail. This approach simplifies future updates for new Next.js versions and makes the error message more informative for users.",Merged
"Closes N/A

What I did
There was an issue in the CLI doctor command where it would not detect the storybook package on certain package managers because they would output things like └─ storybook@npm:7.4.0 and it would result in └─ storybook as a name. This PR fixes that and adds a couple more fixes along the way

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks!

Run a sandbox for template, e.g. yarn task --task sandbox --start-from auto --template react-vite/default-ts
Make it wrong e.g. change storybook dependency to 7.3.0 and leave the rest as 7.6.0
run /path/to/cli/bin/index.js doctor and see it do the right work:
image

Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:",Merged
"Works on #23457

image

image

What I did
Added deprecation warning for storyIndexers and for the corresponding types
Added migration notes for storyIndexers
Added deprecation warning and migration notes for storyStoreV6, explicitly calling out storiesOf
The deprecation warning for storyIndexers only appears when a deprecated indexer is handling a file, not just when it's configured. That way, addon authors can support both the old and new API by setting both properties and not get punished with a deprecation warning. In SB 7.5.0 storyIndexers will simply be ignored, while previous versions will ignore experimental_indexers.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
I tested this by adding features: { storyStoreV7: false } to the configuration and saw the deprecation warning in both dev and build. The warnings are not shown if it's true nor if it's unspecified.

I tested the storyIndexers deprecation warning by adding an indexer to the config and removing all experimental_indexers with:

// .storybook/main.ts

import { readFileSync } from 'fs';
import { loadCsf } from '@storybook/csf-tools';

export default {
  experimental_indexers: () => [],
  storyIndexers = (indexers) => [
    {
      test: /(stories|story)\.[tj]sx?$/,
      indexer: async (fileName, options) => (await readCsf(fileName, options)).parse(),
    },
    ...(indexers || []),
  ],
};
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD",Merged
"What I did
@yannbf & me noticed that around 6-12mb of static-storybook's size is sourcemaps.

When bindling our code (manager and prebuild) we should not generate sourcemaps, because of the size. We have minifyIdentifiers turned off:
storybook/scripts/prepare/bundle.ts

Line 190 in 02e058a

 minifyIdentifiers: false, 
... therefore sourcemaps do not add a lot to the ability to understand and debug the code.

Thus removing it is the best compromise.

Here is an example of before/after removing sourcemaps in the storybook test-runner example storybook statics:

Before:

472K    storybook-static/sb-preview
 16K    storybook-static/sb-addons/essentials-measure-6
 64K    storybook-static/sb-addons/ui-storybook-11
 56K    storybook-static/sb-addons/essentials-viewport-4
8.0K    storybook-static/sb-addons/links-0
1.1M    storybook-static/sb-addons/interactions-8
496K    storybook-static/sb-addons/designs-10
 16K    storybook-static/sb-addons/essentials-outline-7
 32K    storybook-static/sb-addons/essentials-toolbars-5
 52K    storybook-static/sb-addons/essentials-backgrounds-3
292K    storybook-static/sb-addons/essentials-actions-2
5.1M    storybook-static/sb-addons/storysource-9
2.0M    storybook-static/sb-addons/essentials-controls-1
9.3M    storybook-static/sb-addons
204K    storybook-static/sb-common-assets
3.4M    storybook-static/sb-manager
 19M    storybook-static/assets
 33M    storybook-static
After:

472K    ./storybook-static/sb-preview
4.0K    ./storybook-static/sb-addons/essentials-measure-6
 12K    ./storybook-static/sb-addons/ui-storybook-11
 12K    ./storybook-static/sb-addons/essentials-viewport-4
4.0K    ./storybook-static/sb-addons/links-0
184K    ./storybook-static/sb-addons/interactions-8
 84K    ./storybook-static/sb-addons/designs-10
4.0K    ./storybook-static/sb-addons/essentials-outline-7
8.0K    ./storybook-static/sb-addons/essentials-toolbars-5
 12K    ./storybook-static/sb-addons/essentials-backgrounds-3
 40K    ./storybook-static/sb-addons/essentials-actions-2
1.6M    ./storybook-static/sb-addons/storysource-9
380K    ./storybook-static/sb-addons/essentials-controls-1
2.4M    ./storybook-static/sb-addons
204K    ./storybook-static/sb-common-assets
3.4M    ./storybook-static/sb-manager
 19M    ./storybook-static/assets
 26M    ./storybook-static
A drop of 7M! (21%)

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
 benchmarking
Manual testing
I manually tested this on my local machine, by running yarn storybook:ui:build in the code directory.
Then I investigated the output of the static-storybook directory, and verified there are no .map files, except the ones that vite generated.

(We keep the sourcemaps generated by vite, because they are for the preview, and DO actually help the user debug their OWN code better.
The user can chose to disable sourcemaps themselves to get a faster build/deploy)

Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD",Merged
"Closes #23914

What I did
This PR adds a common-override-presets file in core-common which will get executed early on, before presets from packages like react-webpack5, and with that we can make sure that framework.options always exist, for instance (which is what is done in this PR). This can be useful for other scenarios as well in the future.
This will fix the infamous cannot read properties of undefined reading 'builder' on all frameworks, including community ones (rspack etc)

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
Run a sandbox for template, e.g. yarn task --task sandbox --start-from auto --template react-vite/default-ts
Comment out framework.options in main.js:
const config: StorybookConfig = {
  framework: {
      name:'@storybook/react-vite',
      // options: {} <-- comment this!
  }
}
See things work
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD",Merged
"What I did
Pass the name of the package manager as an option to the postinstall script
Create a postinstall script for addon-themes
Don't add ^ to version if the specified version isn't semver (Example : next, canary)
Checklist for Contributors
Testing
Manual testing
Open a sandbox of your choosing
yarn add -D tailwindcss postcss autoprefixer
npx storybook@canary add @storybook/addon-themes@canary
@storybook/auto-config should be run to configure tailwind themes",Merged
"Closes: #23815

What I did
I've removed the @storybook/components/experimental code & usage.
I've tried to keep the ArgsTable loading UI intact.
We'll be adding this experimental UI back in a long lived feature branch, to ensure stability.
We noticed there's a significant size increase of the static build version of storybook due to the addition of the experimental UI.
We deemed the above to be not acceptable, and we'll be taking more time to plan this development & rollout.
I've renamed the legacy directory to components, indicating it won't get replaced.
How to test
All stories should function as before, though there might be visual changes
Any visual changes should be as before
e2e tests should all pass
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
Manually fix version, so that frontpage can infer correct version

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Reverts #23882

What I did
I found out the problem that was causing #23876, so instead of reverting the whole thing, we fix it proper.

How to test
To reproduce:

clone the react-parallax-tilt repo
checkout the v1.7.161 tag, which is where the issue was found: https://github.com/mkosir/react-parallax-tilt/tree/v1.7.161
run npm run start-storybook - it should work
remove @storybook/addon-essentials and @storybook/manager-api
run npm install then npm run start-storybook - it should fail
still with those dependencies removed, change the storybook dependencies to the canary of this PR: 0.0.0-pr-23897-sha-78c2d886
run npm run start-storybook - it should work!
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This pull request has been released as version 0.0.0-pr-23897-sha-78c2d886. Install it by pinning all your Storybook dependencies to that version.

More information",Merged
"What I did
I'm not exactly sure when but between #21909 being merged and it being released props specified in parameters.nextjs.image have stopped being applied to next/image.

After some debugging it turns out that the React Context (ImageContext) being used to pass the props from parameters.nextjs.image to next/image isn't being reused, instead it's recreated in every file where it's imported. This happens because webpack inlines the contents of context.ts instead of keeping the import statement intact.

Since we want to reuse the same context everywhere we should make sure webpack preserves the import even after building, which can be done by marking context.ts as an external file that shouldn't be included in the output bundle.

Note we also need to mark decorator.tsx as external, or else it will be included in the preview.js bundle, causing the import of context.ts to fail.

How to test
If you look at the current output you can see ImageContext being recreated in every file it's imported.
For example in dist/preview.js, dist/images/next-image.js or dist/images/next-legacy-image.js you will see the following line:

ImageContext=(0,import_react.createContext)({})
After building this branch the output instead turns into

var import_decorator = require(""./images/decorator"");
for preview.js and

var import_context = require(""./context"");
for decorator.js and finally

var import_context = require(""./context"");
for next-image.js, next-legacy-image.js, and next-future-image.js, which means the context is correctly being reused instead of recreated.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"Closes #

What I did
Whenever we add sandboxes, we keep forgetting to update the parallelism count in circle CI config, which sucks.

I added a script that reads config.yml values and checks for that and makes CI fail early, so we never get into a situation where we merge work with incorrect parallelism again.

I also renamed the ""script-unit-tests"" job to ""script-checks"" to make it have a more generic purpose, and I know we'll end up adding more things to it as well later.

To test this out, you can run yarn get-template --check yourself while playing with the parallelism values in config.yml or playing with the sandboxes in sandbox-templates.ts and get feedback locally:

image
Or see an actual CI failure by clicking here
image

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Extends #22324

What I did
NOTE: This only applies to VITE projects, not Webpack ones yet!!!

Extends #22324:

 Update react-docgen to 6.0.x
 Add support for fs resolver
Followup:

 Update webpack too
Also improve argType generation:

 Add experimental support for converting unions of literals into enum, which generate proper controls
 Fix table summary types for array, object, and function
How to test in your project
To test this out in a React Vite TS project, install the canary version listed at the top of this PR into a project by manually updating its package.json to update all the @storybook/* packages from this monorepo:

    ""@storybook/react"": ""0.0.0-pr-23825-sha-7875282b"",
    ""@storybook/react-vite"": ""0.0.0-pr-23825-sha-7875282b"",
    ...
Once you've installed the packages, edit .storybook/main.ts to contain:

  typescript: {
    reactDocgen: 'react-docgen',
  },
The behavior should be the same as before, but running storybook dev should be dramatically faster than before.

If you run into issues, please comment on this PR!

How to test in a development sandbox
Create a development sandbox in this branch, e.g.
yarn task --task sandbox --start-from auto --template react-vite/default-ts
Edit .storybook/main.ts to contain:
  typescript: {
    reactDocgen: 'react-docgen',
  },
Add a new file starbucks-size.ts in src/stories directory:
export type StarbucksSize = 'tall' | 'grande' | 'venti';
Update the CLI-generated Button.tsx component with a new prop:
  /**
   * How large should the button be at Starbucks?
   */
  starbucksSize?: StarbucksSize;
Observe the result in the controls panel:
image
Checklist
Needs tests:

 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
🦋 Canary release
This pull request has been released as version 0.0.0-pr-23825-sha-7875282b. Install it by pinning all your Storybook dependencies to that version.

More information",Merged
"Part of #22176

What I did
Migrate @storybook/scripts to strict-ts

More specifically:

Changed scripts tsconfig.json to use strict types
Created a typechecking script for @storybook/scripts based on the one in prepare/check.ts
Resolved type errors that came up after enabling strict types
Adds check:scripts to CI
How to test
Check types with cd scripts && yarn check. The typecheck script should run in CI now as well.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"Telescoped off: #23778

What I did
I added a new type of addon that will be injected into a new top bar of the sidebar.
It looks like this:

Screenshot 2023-08-11 at 17 34 59
Notice the ""accessibility"" icon besides the regular gear icon

How to test
Here's how to add something to the ui storybook:
code/ui/.storybook/manager.ts:

import React from 'react';
import { addons, types } from '@storybook/manager-api';
import { styled } from '@storybook/theming';
import { IconButton, Icons } from '@storybook/components';

const SidebarIconButton = styled(IconButton)(({ theme }) => ({
  position: 'relative',
  overflow: 'visible',
  color: theme.textMutedColor,
  marginTop: 0,
  zIndex: 1,
}));

addons.register('my/addon', () => {
  addons.add('my/addon', {
    type: types.experimental_SIDEBAR_TOP,
    render: () => (
      <SidebarIconButton>
        <Icons icon=""accessibility"" />
      </SidebarIconButton>
    ),
  });
});
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This pull request has been released as version 0.0.0-pr-23811-sha-d3c4b6e3. Install it by pinning all your Storybook dependencies to that version.

More information",Merged
"Closes #23741 #23787

What I did
I've noticed api.getAddonState() sometimes (not sure the exact condition) returns undefined, which affects consumers of api.setAddonState().

More specifically, #23787 occurs when the state updater function setCount() in code/addon/actions/src/manager.tsx attempts to access c.count assuming the state { count: number; } is available all the time (i.e., setCount((c) => ({ ...c, count: c.count + 1 }));). Unfortunately as I mentioned above, sometimes api.getAddonState(), which is the value of the parameter c of the callback in setCount(), results in undefined.

This PR fixes the issue by providing defaultState when c is undefined in useSharedState().

How to test
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
When adding the API to set this from manager.ts I discovered the setConfig API seems broken due to a race condition between the manager UI rendering async and the manager being initiated before the manager.ts file is executed.

This was the order of operation:

CONSTRUCT - manager-api context is contructed. The initial state is set.
RENDER - the manager UI renders
MANAGER - the manager.ts code is executed
MOUNT - the manager UI mounts
INIT - react call a hook to initiate all state/api modules in manager-api.
Due to this order + the fact that the event subscribers listening for the channel get executed upon the INIT phase, the fact the MANAGER phase emits and event, is missed.

My solution in this PR is not to change the order, but to change the location of the event-subscribers.
I moved them to the CONSTRUCT phase.

This should have no affects to use, but I had to change 2 things:

the unit tests that test the api/state modules
the api/state modules should use the provider given to them to listen/emit on the channel, because there's no fixed order in which the modules get created.
I hope this explains the changes in this PR enough.
I made and effort to cleanup some code, including the tests.

How to test
The changes are covered by unit tests.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
Added a note about disabling actions when forking the repo. Most forks will be used to dev locally on the project and raise PRs so the actions don't make sense and will just cause errors.
Added an issues section to help contributors solve known issues.
Fixed a broken link to the contributing guide
How to test
Documentation only.
If required you can confirm contributing guide link does not 404.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
Introduced some additional videos to complement the documentation further. Featured in this pull request are the following pages:

Writing stories / AutoDocs (custom template section)
Writing Docs / Doc Blocks
Sharing / Embed
Sharing / Publish
API / Doc Blocks
ArgTypes
Canvas
Controls
Description
Primary
Source
Stories
Story
Subtitle
Title
How to test
Check out the test_timestamps branch on the frontpage repository.
Follow the steps in the contributing instructions for this branch, chore_docs_adds_videos.
Open the relevant documentation, and the videos should be available, including the timestamped ones.
@chantastic and @kylegach when you have a moment, can you take a look at this and let me know of any feedback? Thanks in advance.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
The toolbar is one of the main piece of the Storybook manager. We would like to improve it to be more accessible and well documented. In this PR we created a new component Toolbar /> as part on the new Core UI library. It is based on Radix Toolbar and extend all props with our custom styling. This new component will replace FlexBar and could be used on the manager as well as addons for multiple use cases.

Older IconButton are still working but as part of this PR, I'm updating most of the old IconButton with the new ones to make it coherent with the rest of the manager.

How to test
Run this branch locally using yarn storybook:ui
Open Storybook in your browser at this link http://localhost:6006/?path=/story/core-ui-toolbar--base
You should now see the new Toolbar component
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
Support plain text for ""slot"" controls.

Currently, only functions () => ""Default Text Content"", VNode h(""p"", ""Default Text Content""), and stringified objects are supported.

and even if we do use those supported ways, the control table will display something like

// Function, renders as `Default Text Content`
default: {
}

// VNode, renders as `<p>Default Text Content</p>`
footer: {
  __v_isVNode: true,
  ...,
  type: ""p"",
  ...
  children: ""Default Text Content"",
  ...,
}

// Object, not even renders, but shows `{ a: 1, b: 2 }` in the ""Show Code""
header: {
  a: 1,
  b: 2,
}
But I want users to be able to change the slot content, if it's only a label, so if the slot content is a string, we just render that instead.

ALSO, without this change, if you use a String slot content, on the ""Show Code"" block, you'll only see an empty template tag.

<template #default></template>
How to test
Run a sandbox for template. I ran yarn task --task sandbox --start-from auto --template vue3-vite/default-ts
Open Storybook in your browser
Access Stories > renderers > vue3_vue3-vite-default-ts > Reactive Slots > Docs
See aforementioned behavior on the slots controls.
Edit any of the slots by clicking Raw button and Updating it with a double quoted string.
Unfocus on the input
The canvas should reflect the current string value, including the ""Show Code"" block.
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
I don't know where to write tests, the slot function isn't tested anywhere.
 Make sure to add/update documentation regarding your changes
I don't think it is documented anywhere, but if I missed it, please let me know.
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Closes #22878

What I did
Update the isExpanded variable when a selectedStoryId is found in the index provided to the Ref.
The Refs component is expanded when the selected story is inside the Ref and either:
storybook is initialized
the user switches to a new story
This follows the current behaviour for automatically expanding nodes in the Tree component
Expanding when opening storybook:
expand-on-refresh

Expand when switching story using shortcut:
ref-expand-on-next-story

How to test
Create two sandboxes
Add the following to main.ts on the first storybook:
  refs: {
    other: {
      title: 'other',
      url: 'http://localhost:6007',
      expanded: false
    }
  }
Run the sandboxes with yarn storybook and yarn storybook --port 6007
Access a story within the composition and refresh the page to see the ref open automatically
Navigate between stories within the composition and to see the ref open automatically after being closed
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Telescoped off: #23802

What I did
I introduced a new manager API!
It's marked as experimental for now.

The purpose is to allow users and addon-creators to inject (dynamically at runtime) filter functions that filter the list of stories in the sidebar. I know this has been a feature that has been requested many times for a varied use-cases.

I've implemented the actual filtering in the sidebar, but this code will likely need optimization.
And with this optimization there will be assumptions in when the filters are re-evaluated.

A FilterFunction receives an (with status extended) IndexHash_Item and returns a boolean.
Storybook will only ask to filter leaf-items (story and docs).
Storybook will filter out empty components/groups/roots for you.

How to test
This API can be used via from manager.ts:

import { addons } from '@storybook/manager-api';
import startCase from 'lodash/startCase.js';

addons.setConfig({
  sidebar: {
    filters: {
      a: (item) => item.depth === 2,
    },
  },
});
The expected result is that the sidebar stories are filtered.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Added more portable path handling code to better support win32-style paths. Prior to this PR, attempting to use fonts via `next/font/local' in Storybook on a Windows machine would result in broken font resource paths.

Closes #21968

What I did
Added more portable path handling code to better support win32-style paths. As demonstrated by #21968, a bug existed with the current way that paths were being translated between next/font and Storybook. This PR utilizes more portable path handling logic and sanitizes win32-style paths to the Unix-style paths expected in standard web URIs.

How to test
Open a story that uses fonts loaded via next/font on a Windows-based machine.
Check the @font-face declarations that are generated into the story and ensure that the paths are correct, and that the fonts are being loaded and are available in the story.
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"What I did:

Merged tag v7.2.0 to main - to not get all of next but only the history from the release tag and backwards
Created this branch hotfix-7.2.1
Cherry-picked CLI: Fix error logging being swallowed from dev/build failures #23689
Updated Changelog manually
Updated lock file with YARN_CHECKSUM_BEHAVIOR=update yarn install
PR to latest-release
Any changes in the diff apart from step 3 and 4 are just because latest-release haven't been used and synced in a while.

What I did
How to test
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
We introduced a new library for icons. In this PR I'm replacing all icons by the new library. This PR doesn't include the following:

Icons that have dynamic names
Icons with styling overrides
Icons in the legacy component library. Not necessary.
This PR also fixes:

Removed dependencies in the Storybook icons
Update the versions of React to make sure it works with the versions of React supported by Storybook.
How to test
Run a sandbox for template, e.g. yarn task --task sandbox --start-from auto --template react-vite/default-ts
Open Storybook in your browser
Access any story and check across addons and the manager if icons are not rendered properly.
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Closes #

What I did
The ""what's new"" notification banner was affecting E2E tests negatively as the notification was on the way of certain elements, so when selecting stories, Playwright would click on the notification by mistake and unrelated tests would fail.

Unfortunately it's too tricky to E2E test the what's new notification flow:

Seemingly there is no way to show or hide the notification banner based on local storage or session storage
Once viewed, the banner is hidden in subsequent visits
If we were to test the disabling of notifications, this would cause a file system change which can fail subsequent runs when testing E2E locally
We'd need to make sure Playwright runs tests in series, and follow an order of tests so that ""What's new"" always is tested first
We'd need to create a new layer to mock requests at the node level as the what's new endpoint is called from node
How to test
CI E2E tests should be green

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Works on #23457

Telescopes on top of #23660

What I did
Changed the preset property from indexers to experimental_indexers. They are still indexers internally everywhere, only the preset.apply calls and StorybookConfig type changed so if users were to add their own indexers, they'd need to add them as experimental_indexers in main.ts.

I didn't change all the new types that the indexers use, that didn't seem necessary. I also didn't add a console warning given that we're adding default indexers which would trigger this warning every time.

I also reverted my updates to the code snippets, as I think they should get updated when we write the new docs at the end of this project, and not before that.

How to test
Create a sandbox.
Add an experimental indexer in the main.ts file:
...
  experimental_indexers: (existing) => {
    console.log('👋 from experimentals.');
    return existing
  }
Start Storybook and see the log in your terminal.
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Closes #23661

Warning: This PR seems to break the rendering of <InlineStory /> in docs pages. Please do not accept this PR until the issue related to the rendering of <InlineStory /> is resolved.

What I did
While I was investigating #23661, I noticed next's webpack resolves react and react-dom differently. Specifically, it resolves them to the pre-compiled versions that reside in next/dist/compiled/react and next/dist/compiled/react-dom respectively: https://github.com/vercel/next.js/blob/ff5338ce03a3240a97a5c84f5ad5c31c0f53a6ce/packages/next/src/build/webpack-config.ts#L1370-L1379.

I speculate these pre-compiled react and react-dom are from Canary channel of React, which contains some undocumented / experimental APIs that are not available in Latest channel.

next uses these experimental versions of react and react-dom because some of their components (e.g., next/image) depends on the APIs provided by them.

To be more specific, the root cause of #23661 is the introduction of a new dependency in next/image (vercel/next.js#52425) that is not available in react-dom@latest: https://github.com/vercel/next.js/blob/7d57784fc0585cb9e5394b982761a840a6554515/packages/next/src/client/image-component.tsx#L13. (i.e., ReactDOM.preload()).

So I added the same aliases to @Storybook/nextjs so that next/image doesn't break in the storybook webpack server.

Unfortunately, this introduces a new bug where the <Canvas /> (or more specifically <InlineStory /> in the Canvas) doesn't render the story component properly:

Screenshot 2023-08-01 at 10 49 42 PM
React does throw an error that says Uncaught DOMException: Failed to execute 'removeChild' on 'Node': The node to be removed is not a child of this node. when I leave the docs page and enter a story page, but other than that I'm pretty much clueless why the change I made affects the rendering of <InlineStory /> 😅.

So, it would be much appreciated if the core team members shed some lights in this issue so that eventually we can resolve #23661.

Thanks!

How to test
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Works on #23457

What I did
This PR does multiple things (shame on me. Sorry.)

1. Replaces all the internal story indexes with the new API:
CSF indexer
Stories MDX indexer
Server indexer
2. Handle docsOnly mode in Stories MDX
The new indexer handler now automatically removes story entries that are docsOnly*, as defined by having the ""docsOnly"" tag. So the Stories MDX indexer now adds that tag when it sees parameters.docsOnly, which is actually set by CsfFile.parse() 🥵.

* docsOnly is a feature exclusive to Stories MDX, and happens whenever any stories.mdx files don't render any stories - so only Docs needs to appear in the sidebar. I assume this handling can be removed when we finally remove Stories MDX completely.

3. Minor improvements to the server renderer
The default stories glob when initing a server project now includes yaml and yml extensions along with the existing json extensions. The indexer already handled this, it just wasn't in the globs
The default stories for Page have now been converted to YAML to showcase/test this behavior
The new indexer adds support for tags, and autodocs works mostly
Two aspects of autodocs that are broken in the server renderer:

Any (iframed) stories beyond the first three always hangs forever in loading, consistently
Controls don't work, they don't trigger any changes
Are these two points enough that I should remove it again, or is this better than nothing @shilman ?

How to test
See Chromatic doesn't report any changes to stories (especially changing names, ids), as the new indexers should produce the same result.
See especially the unattached story at ?path=/docs/addons-docs-stories-mdx-unattached--docs. It should be a lonely unattached Docs entry with no stories, because it's docsOnly.
For the server changes you have to create the sandbox manually, by checking out this repo and creating the internal/server-webpack5 sandbox.
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Works on #23457

What I did
This PR changes the IndexInput:
rename key to exportName
Add support for metaId, to optionally overwrite the automatic generation of meta id based on title. If this is passed by the indexer, it must also be set at meta.id to be picked up by the preview too. CsfFile.parse() already does all of this.
Add support for __id, to optionally overwrite the automatic generation of the whole story id. If this is passed by the indexer, it must also be set at story.parameters.__id to be picked up by the preview too.
Adds support for story.parameters.__id in CsfFile.parse(). If this is set now, the story will pick that up as the its id, disregarding anything else.
How to test
See new unit tests for CsfFIle, as well as the updated ones with the IndexInput changes. I've also added some stories that tests the custom id, that should show up in Chromatic.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Works on #23457

What I did
This PR changes the IndexInput:
rename key to exportName
Add support for metaId, to optionally overwrite the automatic generation of meta id based on title. If this is passed by the indexer, it must also be set at meta.id to be picked up by the preview too. CsfFile.parse() already does all of this.
Add support for __id, to optionally overwrite the automatic generation of the whole story id. If this is passed by the indexer, it must also be set at story.parameters.__id to be picked up by the preview too.
Adds support for story.parameters.__id in CsfFile.parse(). If this is set now, the story will pick that up as the its id, disregarding anything else.
How to test
See new unit tests for CsfFIle, as well as the updated ones with the IndexInput changes. I've also added some stories that tests the custom id, that should show up in Chromatic.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
We have structures like this in our components:

<div v-if=""$slots.icon"" class=""p-4"">
    <slot name=""icon"" />
</div>
With Storybook 7.1, these broke due to the Vue 3 renderer's updated slot generation. Previously it used story props to populate Vue component slots, but this was changed to use argTypes in 6c806b6, after which all stories had all slots defined. This would cause such conditions as the example above to always be truthy.

This commit modifies the slot generation a bit to allow slots to be undefined rather than defaulting to an () => undefined function value.

How to test
Run a sandbox for template, e.g. yarn task --task sandbox --start-from auto --template vue3-vite/default-ts
Open Storybook in your browser
Access the Example/Button story and verify that the icon wrapper <span> does not exist on the button stories with no icon slot value defined.
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Description
Replace the deprecated fx-Layout with equivalent Tailwind for task dashboard component.

How Has This Been Tested?
Log in to a student account
Select an enrolled unit
Select a specific task
The task dashboard component appears in the center section
A file named task-dashboard.tpl.html defines different views in the section, including View Task Details, View Submission, View Task Sheet, Download Submission PDF, Download Submission Files, and View Submission History.
If the view contents PDF format, there is a link with resize feature
If the view does not content PDF format, the elements are displayed in column, with full width and height, and center align
Before:
SIT764 tailwind-task-dashboard (before)
After:
SIT764 tailwind-task-dashboard (after)
Testing Checklist:
 Tested in latest Chrome
 Tested in latest Safari
 Tested in latest Firefox
Checklist:
 My code follows the style guidelines of this project
 I have performed a self-review of my own code
 I have commented my code in hard-to-understand areas
 I have made corresponding changes to the documentation
 My changes generate no new warnings",Merged
"This is an automated pull request that bumps the version from 7.6.3 to 7.6.4. Once this pull request is merged, it will trigger a new release of version 7.6.4. If you're not a core maintainer with permissions to release you can ignore this pull request. To do Before merging the PR, there are a few QA steps to go through: Add the ""freeze"" label to this PR, to ensure it doesn't get automatically forced pushed by new changes. Add the ""ci:daily"" label to this PR, to trigger the full test suite to run on this PR. And for each change below: Ensure the change is appropriate for the version bump. E.g. patch release should only contain patches, not new or de-stabilizing features. If a change is not appropriate, revert the PR. Ensure the PR is labeled correctly with one of: ""BREAKING CHANGE"", ""feature request"", ""bug"", ""maintenance"", ""dependencies"", ""documentation"", ""build"", ""unknown"". Ensure the PR title is correct, and follows the format ""[Area]: [Summary]"", e.g. ""React: Fix hooks in CSF3 render functions"". If it is not correct, change the title in the PR. Areas include: React, Vue, Core, Docs, Controls, etc. First word of summary indicates the type: “Add”, “Fix”, “Upgrade”, etc. The entire title should fit on a line This is a list of all the PRs merged and commits pushed directly to next, that will be part of this release: 🐛 Bug: Angular: Fix CSF Plugin #25098 🐛 Bug: Viewport: Fix viewport dts files #25107 📝 Documentation: Docs: Fix ArgTypes links #25084 📝 Documentation: Docs: Fix Typo in A11y snippet #25122 📝 Documentation: Docs: Svelte docs and examples update #25110 📝 Documentation: Docs: SWC compiler cross link to API docs #25136 🍒 Manual cherry picking needed! The following pull requests could not be cherry-picked automatically because it resulted in merge conflicts. For each pull request below, you need to either manually cherry pick it, or discard it by replacing the ""patch:yes"" label with ""patch:no"" on the PR and re-generate this PR. #25107: git cherry-pick -m1 -x b486b39c97258fae5a0333b1651e27b130b6568c #25122: git cherry-pick -m1 -x eb3e9bb070643fa4329cf0422b18b3803d484262 #25110: git cherry-pick -m1 -x 7bee11f17418c53c3d8be8b295688c3da1574a51 If you've made any changes doing the above QA (change PR titles, revert PRs), manually trigger a re-generation of this PR with this workflow and wait for it to finish. It will wipe your progress in this to do, which is expected. Feel free to manually commit any changes necessary to this branch after you've done the last re-generation, following the Make Manual Changes section in the docs, especially if you're making changes to the changelog. When everything above is done: Merge this PR Follow the run of the publish action Generated changelog 7.6.4 Angular: Fix CSF Plugin - #25098, thanks @ valentinpalkovic! Viewport: Fix viewport dts files - #25107, thanks @ kasperpeulen!",Merged
"What I did With this pull request, the test coverage was updated to feature a callout that additional options can be provided via configuration file as the addon provides a similar set of items. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Moved the Storyshots addon in the Readme to the list of deprecated status and updated the link pointing to it which in turn leads to the migration guide. @kasperpeulen, one thing I want your input on, I removed the Issue.md file from the repo as it's basically mirroring #22176 and not being used anywhere based on my search. If you need it for some reason please let me know and I'll re-introduce it back. Thanks in advance. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did use encodeURIComponent to encode story name Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Refactored the method of deriving the correct validateData function to improve handling of different Next.js version compatibilities. Replaced multiple try-catch blocks with a trials array containing objects with module, export, and description properties. This array is used to dynamically attempt loading the required functions and generate a detailed error message if all attempts fail. This approach simplifies future updates for new Next.js versions and makes the error message more informative for users. Checklist for Contributors I will update the following when I have time. Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did With this pull request the snapshot testing documentation is reintroduced to prevent a 404 when previewing it in the pre-release documentation. What was done: Updated the sidebar file (i.e., toc.js) to include the documentation Re-introduced the documentation file (i.e., snapshot testing) and assets Fixed links Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Storybook 7.6, we have replaced the babel-plugin-react-docgen plugin with a custom Webpack5 loader, which works independently of the used compiler (SWC, Babel, ...). The loader throws an Error, though, as soon as a file cannot be processed. An Error is not thrown anymore but instead log a warning to the user. In --loglevel=debug mode a stack trace should be available to report bug reports for react-docgen. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Clone https://github.com/zooniverse/front-end-monorepo Checkout dependabot/npm_and_yarn/storybook/react-webpack5-7.6.1 yarn install (Node 20) Go to packages/lib-classifier and run yarn install yarn storybook -> it should fail Precompile preset-react-webpack from the monorepo and swap out the files A warning should be shown Start Storybook with yarn storybook loglevel=debug -> Now a stacktrace is shown as well Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did This PR adds barHoverColor to the theme common snippet. Apparently, this snippet references all the theme variables available and is rendered in https://storybook.js.org/docs/configure/theming#create-a-theme-quickstart to help create a theme. I can see this kind of modification was done at the same time as the addition of appPreviewBg recently. And this is something I missed when I added barHoverColor in #20169. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did With this pull request the documentation was updated to factor in the latest changes added as part of the docs restructuring and some minor cleanup in terms of snippets Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fixes next/font/local usage in Babel mode for Next.js Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a Next.js sandbox Setup a local font as described here Check whether local font works Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-25045-sha-cc9ccee0. Install it by pinning all your Storybook dependencies to that version.",Merged
"What I did See title Checklist for Contributors Testing Manual testing N/A (docs-only change) Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"This is an automated pull request that bumps the version from 7.6.1 to 7.6.2. Once this pull request is merged, it will trigger a new release of version 7.6.2. If you're not a core maintainer with permissions to release you can ignore this pull request. To do Before merging the PR, there are a few QA steps to go through: Add the ""freeze"" label to this PR, to ensure it doesn't get automatically forced pushed by new changes. Add the ""ci:daily"" label to this PR, to trigger the full test suite to run on this PR. And for each change below: Ensure the change is appropriate for the version bump. E.g. patch release should only contain patches, not new or de-stabilizing features. If a change is not appropriate, revert the PR. Ensure the PR is labeled correctly with one of: ""BREAKING CHANGE"", ""feature request"", ""bug"", ""maintenance"", ""dependencies"", ""documentation"", ""build"", ""unknown"". Ensure the PR title is correct, and follows the format ""[Area]: [Summary]"", e.g. ""React: Fix hooks in CSF3 render functions"". If it is not correct, change the title in the PR. Areas include: React, Vue, Core, Docs, Controls, etc. First word of summary indicates the type: “Add”, “Fix”, “Upgrade”, etc. The entire title should fit on a line This is a list of all the PRs merged and commits pushed directly to next, that will be part of this release: 🐛 Bug: CLI: Improve dependency metadata detection in storybook doctor #25037 🍒 Manual cherry picking needed! The following pull requests could not be cherry-picked automatically because it resulted in merge conflicts. For each pull request below, you need to either manually cherry pick it, or discard it by replacing the ""patch:yes"" label with ""patch:no"" on the PR and re-generate this PR. #25037: git cherry-pick -m1 -x 7b2d4072ff68822bf7862d17da58ce934ebcdb46 If you've made any changes doing the above QA (change PR titles, revert PRs), manually trigger a re-generation of this PR with this workflow and wait for it to finish. It will wipe your progress in this to do, which is expected. Feel free to manually commit any changes necessary to this branch after you've done the last re-generation, following the Make Manual Changes section in the docs, especially if you're making changes to the changelog. When everything above is done: Merge this PR Follow the run of the publish action Generated changelog 7.6.2 CLI: Improve dependency metadata detection in storybook doctor - #25037, thanks @ yannbf! React-Docgen: Make error-handling more gentle - #25055, thanks @valentinpalkovic!",Merged
"What I did Makes the implementation of webpackFinal consistent across documentation. In the documentation there is both, webpackFinal: async (... and, async webpackFinal(... While these are both valid, I feel the documentation is easier to read if implementation is consistent? I've aligned these cases to the style that is used elsewhere. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests None that I'm aware of? Manual testing I'm not sure how to run the docs locally? Apologies if I've missed that somewhere. Testing should be as follows: running the docs locally go to the local equivalent of https://storybook.js.org/docs/7.5/builders/webpack check that the implementation is now consistent Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
" What I did There was an issue in the CLI doctor command where it would not detect the storybook package on certain package managers because they would output things like └─ storybook@npm:7.4.0 and it would result in └─ storybook as a name. This PR fixes that and adds a couple more fixes along the way Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a sandbox for template, e.g. yarn task --task sandbox --start-from auto --template react-vite/default-ts Make it wrong e.g. change storybook dependency to 7.3.0 and leave the rest as 7.6.0 run /path/to/cli/bin/index.js doctor and see it do the right work: image Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Changed the Vite plugin that adds aliases mocks from returning a full, merged config to only returning a partial config. I don't know why this fixes HMR. 🤷 Also removed enforce: 'post' on it, not because it contributed to the issue, but I didn't see any noticeable change with or without it, it didn't seem to do anything. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-25031-sha-f8489ef6. Install it by pinning all your Storybook dependencies to that version.",Merged
"What I did The exclude regex for the react-docgen-loader was not working properly for Windows users. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
This is a little cleaner in your next.config.js and matches what other NextJS plugins are doing Testing Update your next.config.js to: const withStorybook = require('@storybook/nextjs-server/next-config')(); module.exports = withStorybook({ /* existing nextjs config */ }); 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>,Merged
"What I did Frontpage uses release-8-0 to build the docs, but it's currently a bit behind next. Most importantly, it still has the wrong version in code/package.json. This won't be an issue once storybookjs/frontpage#638 is merged, as pushing to next will automatically create a brand-new release-8-0 branch. But for now, we need to bring release-8-0 into sync with next manually, which is what this PR does. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! N/A Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"This is an automated pull request that bumps the version from 8.0.0-alpha.0 to 8.0.0-alpha.1. Once this pull request is merged, it will trigger a new release of version 8.0.0-alpha.1. If you're not a core maintainer with permissions to release you can ignore this pull request. To do Before merging the PR, there are a few QA steps to go through: Add the ""freeze"" label to this PR, to ensure it doesn't get automatically forced pushed by new changes. Add the ""ci:daily"" label to this PR, to trigger the full test suite to run on this PR. And for each change below: Ensure the change is appropriate for the version bump. E.g. patch release should only contain patches, not new or de-stabilizing features. If a change is not appropriate, revert the PR. Ensure the PR is labeled correctly with one of: ""BREAKING CHANGE"", ""feature request"", ""bug"", ""maintenance"", ""dependencies"", ""documentation"", ""build"", ""unknown"". Ensure the PR title is correct, and follows the format ""[Area]: [Summary]"", e.g. ""React: Fix hooks in CSF3 render functions"". If it is not correct, change the title in the PR. Areas include: React, Vue, Core, Docs, Controls, etc. First word of summary indicates the type: “Add”, “Fix”, “Upgrade”, etc. The entire title should fit on a line This is a list of all the PRs merged and commits pushed directly to next, that will be part of this release: ✨ Feature Request: NextJS: Add experimental RSC support #25091 🐛 Bug: Viewport: Fix viewport dts files #25107 (will also be patched) 🔧 Maintenance: Next.js: Drop Next.js < v13.5 support #25104 🔧 Maintenance: Angular: Drop v14.x support #25101 🐛 Bug: Angular: Fix CSF Plugin #25098 (will also be patched) 🐛 Bug: Build: Fix Angular sandbox #23896 🐛 Bug: Next.js: Add next/font/local declarations support #24983 (will also be patched) 🔧 Maintenance: Next.js: Update validateData function for next/font compatibility #25061 ❗ Breaking Change: React: Set react-docgen to default TS docgen #24165 🐛 Bug: React-Docgen: Make error-handling more gentle #25055 (will also be patched) 🐛 Bug: Next.js: Fix next/font/local usage in babel mode #25045 (will also be patched) 🐛 Bug: CLI: Improve dependency metadata detection in storybook doctor #25037 (will also be patched) ✨ Feature Request: CLI: Point the update-notice to the changelog in the suggested version #19911 🔧 Maintenance: React: Change StoryFnReactReturnType to JSX.Element #23204 🐛 Bug: Next.js: Fix AppRouterProvider usage #25032 (will also be patched) 🐛 Bug: SvelteKit: Fix HMR not working #25031 (will also be patched) 🐛 Bug: Webpack: Fix exclude regex in react-docgen-loader #25030 (will also be patched) 🔧 Maintenance: TypeScript: Migrate @storybook/docs-tools to strict TS #22567 🔧 Maintenance: UI: Add stricter types to the language property of the SyntaxHighlighter #22790 🔧 Maintenance: CLI: Typescript strict mode #22254 ✨ Feature Request: CSF: Autotitle fix multiple dots and handle stories.js #21840 📝 Documentation: Docs: Fix Typo in A11y snippet #25122 (will also be patched) 🏗️ Build: Build: Remove link forced option for Angular sandboxes #25099 📝 Documentation: Docs: Fix ArgTypes links #25084 (will also be patched) 📝 Documentation: Docs: Test coverage add callout for configuration #25065 📝 Documentation: Docs: Re-introduce missing snapshot testing docs #25058 📝 Documentation: Docs: Minor Fixes and cleanup #25048 (will also be patched) 📝 Documentation: Docs: Add control: false, table.disable to argTypes API reference #25041 (will also be patched) 🏗️ Build: Build: Migrate @storybook/manager-api to strict TS #24069 📝 Documentation: Docs: Point people to GH Discussions from repo readme #24952 (will also be patched) ❔ Missing Label: Typescript: Strict compile option for codemods package #23373 ❔ Missing Label: Revert ""Docs: Raw support for mjs, jsx, and tsx files"" #25015 ❔ Missing Label: Docs: Raw support for mjs, jsx, and tsx files #21671 📝 Documentation: Documentation: Updated TS documentation for re-using play functions #21517 If you've made any changes doing the above QA (change PR titles, revert PRs), manually trigger a re-generation of this PR with this workflow and wait for it to finish. It will wipe your progress in this to do, which is expected. Feel free to manually commit any changes necessary to this branch after you've done the last re-generation, following the Make Manual Changes section in the docs, especially if you're making changes to the changelog. When everything above is done: Merge this PR Follow the run of the publish action Generated changelog 8.0.0-alpha.1 Angular: Drop v14.x support - #25101, thanks @ valentinpalkovic! Angular: Fix CSF Plugin - #25098, thanks @ valentinpalkovic! Build: Fix Angular sandbox - #23896, thanks @ Marklb! CLI: Improve dependency metadata detection in storybook doctor - #25037, thanks @ yannbf! CLI: Point the update-notice to the changelog in the suggested version - #19911, thanks @ cprecioso! CLI: Typescript strict mode - #22254, thanks @ 0916dhkim! CSF: Autotitle fix multiple dots and handle stories.js - #21840, thanks @ agriffis! Next.js: Add next/font/local declarations support - #24983, thanks @ MauricioRobayo! Next.js: Drop Next.js < v13.5 support - #25104, thanks @ valentinpalkovic! Next.js: Fix AppRouterProvider usage - #25032, thanks @ valentinpalkovic! Next.js: Fix next/font/local usage in babel mode - #25045, thanks @ valentinpalkovic! Next.js: Update validateData function for next/font compatibility - #25061, thanks @ kkirby! NextJS: Add experimental RSC support - #25091, thanks @ shilman! React-Docgen: Make error-handling more gentle - #25055, thanks @ valentinpalkovic! React: Change StoryFnReactReturnType to JSX.Element - #23204, thanks @ chakAs3! React: Set react-docgen to default TS docgen - #24165, thanks @ shilman! SvelteKit: Fix HMR not working - #25031, thanks @ JReinhold! TypeScript: Migrate @storybook/docs-tools to strict TS - #22567, thanks @ efrenaragon96! UI: Add stricter types to the language property of the SyntaxHighlighter - #22790, thanks @ valentinpalkovic! Viewport: Fix viewport dts files - #25107, thanks @ kasperpeulen! Webpack: Fix exclude regex in react-docgen-loader - #25030, thanks @ valentinpalkovic!",Merged
"This is an automated pull request that bumps the version from 7.6.0 to 7.6.1. Once this pull request is merged, it will trigger a new release of version 7.6.1. If you're not a core maintainer with permissions to release you can ignore this pull request. To do Before merging the PR, there are a few QA steps to go through: Add the ""freeze"" label to this PR, to ensure it doesn't get automatically forced pushed by new changes. Add the ""ci:daily"" label to this PR, to trigger the full test suite to run on this PR. And for each change below: Ensure the change is appropriate for the version bump. E.g. patch release should only contain patches, not new or de-stabilizing features. If a change is not appropriate, revert the PR. Ensure the PR is labeled correctly with one of: ""BREAKING CHANGE"", ""feature request"", ""bug"", ""maintenance"", ""dependencies"", ""documentation"", ""build"", ""unknown"". Ensure the PR title is correct, and follows the format ""[Area]: [Summary]"", e.g. ""React: Fix hooks in CSF3 render functions"". If it is not correct, change the title in the PR. Areas include: React, Vue, Core, Docs, Controls, etc. First word of summary indicates the type: “Add”, “Fix”, “Upgrade”, etc. The entire title should fit on a line This is a list of all the PRs merged and commits pushed directly to next, that will be part of this release: 🐛 Bug: Test: Downgrade @testing-library/user-event to 14.3.0 #25004 🐛 Bug: Webpack: Fix exclude regex in react-docgen-loader #25030 🐛 Bug: SvelteKit: Fix HMR not working #25031 🐛 Bug: Next.js: Fix AppRouterProvider usage #25032 If you've made any changes doing the above QA (change PR titles, revert PRs), manually trigger a re-generation of this PR with this workflow and wait for it to finish. It will wipe your progress in this to do, which is expected. Feel free to manually commit any changes necessary to this branch after you've done the last re-generation, following the Make Manual Changes section in the docs, especially if you're making changes to the changelog. When everything above is done: Merge this PR Follow the run of the publish action Generated changelog 7.6.1 Next.js: Fix AppRouterProvider usage - #25032, thanks @ valentinpalkovic! SvelteKit: Fix HMR not working - #25031, thanks @ JReinhold! Test: Downgrade @testing-library/user-event to 14.3.0 - #25004, thanks @ kasperpeulen! Webpack: Fix exclude regex in react-docgen-loader - #25030, thanks @ valentinpalkovic!",Merged
"Downgrade testing library to 14.3.0 to prevent firefox issues testing-library/user-event#1075 Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-25004-sha-c5268c93. Install it by pinning all your Storybook dependencies to that version.",Merged
"What I did Babel options should are only loaded when the babel-loader is in place Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Filter out addon-docs from essentials in the test build Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fixes react-docgen loader in Next.js environments, where the preset-env option is configured for next/babel and it matches opera_mobile. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did SWC mode was broken because fast refresh mode was enabled all the time. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Added the new required flag to the create-svelte-with-args CLI. This was causing SvelteKit sandboxes to fail generating. I did the update to the CLI last week, forgetting to update it here. storybookjs/create-svelte-with-args#45 Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did With this pull request the documentation was updated to factor in the upcoming SWC builder, which resulted in: Updating the existing babel documentation Set up a dedicated API page Creating snippets Fix misc links, outdated references and sidebar organization Checklist for Contributors Testing Follow the steps in the contributing instructions for this branch, docs_swc_flag. Open the relevant documentation and verify the feature changes. @valentinpalkovic, when you have a moment, can you check on this and let me know of any feedback you may have? Looking forward to hearing from you. Thanks in advance. The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did In this PR, the bug from the #23539 issue was fixed. To address this issue, I modified the aria-label attribute of the button. I adjusted it so that the aria-label dynamically updates in accordance with the button's state changes, ensuring that screen reader users can clearly understand the current state of the button. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing The bug fix was manually tested with �macOS voice over in the default story sandbox. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Add support for next/font/local declarations. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Add ascent-override: 500% to localRubikStorm local font on the code/frameworks/nextjs/template/stories_nextjs-default-js/Font.jsx file. export const localRubikStorm = localFont({ src: '/fonts/RubikStorm-Regular.ttf', variable: '--font-rubik-storm', + declarations: [{ prop: 'ascent-override', value: '500%' }], }); Start the nexjs/default-js sandbox: yarn task --task dev --template nextjs/default-js --start-from=sandbox Got to the /story/stories-frameworks-nextjs-nextjs-default-js-font--with-class-name story and select the text for the local font, you should be able to see how the ascent for the font was modified: image Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did @storybook/core-events/preview-errors and @storybook/core-events/manager-errors were externlized, but not globalized. This ensures those paths are also globalized. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Moved the helper method to get a list of virtual modes to @storybook/builder-webpack to resolve a circular dependency. Furthermore, HMR was fixed when the lazyCompilation builder option for Webpack5 was set. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a Webpack5-based sandbox Set builder: { lazyCompilation: true } Check whether HMR is working Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Moved @storybook/core-events from a devDependency to a regular dependency in @storybook/addon-actions. #24856 introduced an import to @storybook/core-events/preview-errors. All of @storybook/core-events is being externalized by the bundler, but @storybook/core-events/preview-errors is not globalized. This means that it's importing from a package that doesn't exist in the dependency tree. The real fix here is to also globalize sub-exports like ./preview-errors, but that's a bigger task. Yarn PnP is very strict about this, but this doesn't seem to affect any of the other package managers. cc @kasperpeulen Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-24973-sha-64de488b. Install it by pinning all your Storybook dependencies to that version.",Merged
"What I did Each story needs a unique selector to bootstrap the Angular app. #15501 had appended a unique id to the storyId, but when the prepareForInline function was removed, that part of it must not have been moved to a new place. I went with a similar idea, but I did it a little different. Using the same nanoid dependency, I added an attribute that is set to the storyId with a unique string appended. This attribute is then added to the element that will be bootstrapped as an attribute. The boostrap selector changes from storyId to storyId[uniqueAttribute]. I did this in the AbstractRenderer, so it applies to all stories, but I think it is only needed by the DocsRenderer. If we don't want the CanvasRenderer to use the attribute in it's selector then I can move that attribute initialization to the DocsRenderer. I tried to preserve the storyId, in case something is using it, but I didn't think about it causing two id DOM attributes to be the same. If that should not happen then I can try to find a spot to adjust the id, like the prepareForInline function used to do, but I didn't see a clear equivalent. I also added a test for this, since there didn't seem to be one. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a sandbox for template, e.g. yarn task --task sandbox --start-from auto --template angular-cli/default-ts Add an MDX file that renders two of the same story, e.g. <Story of={ButtonStories.Primary}/><Story of={ButtonStories.Primary}/> Open Storybook in your browser Access the MDX doc and the story should be rendered twice Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Updated Typescript in the monorepository Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fix issue with action logging twice, as identified by @jonniebigodes. The problem was that argTypesRegexps were attaching actions + mocks, and then attachActionsToFunctionMocks was adding the action a second time, as the indication of an action was different: fn.isAction in the first case fn._actionAttached in the second. I just changed it to check for both, but we should consider reconciling the two. @kasperpeulen: I'm not sure if this is due to Test: Model loaders as before each and restore mocks properly #24948 or if the issue was already there when you first added the attachActionsToFunctionMocks code. if it wasn't already there, my guess is attachActionsToFunctionMocks maybe ran first before as it was an argsEnhancer. Not sure. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did this file was automatically changed, when I reloaded extensions in vs-code, I guess I should commit it Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did The Fast refresh mode for Next.js (SWC mode) was always activated in development. Furthermore, the Fast Refresh Webpack plugin would be initialized twice. Now Fast refresh is only enabled if the proper Storybook option is set. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Not necessary. Did it myself. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Use the standard WebView connected to some static HTML I insert similarly to the pages version Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Telescopes #24447 Allow you to set the following options (and have them take effect): managerPath previewPath configDir Test them all on both pages + app! What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Telescopes #24447 Fix a couple warnings: x-frame-headers warning that was unnecessary preview/runtime.js warning due to trying to preload non-existent preview - @ndelangen can you check this makes sense? What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did I've added a default of a new action for goto, invalidate and invalidateAll for sveltekit so if you don't specify a callback for them in sveltekit_experimental it will log an action. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Run a sandbox for template yarn task --task sandbox --start-from auto --template svelte-kit-skeleton-ts or yarn task --task sandbox --start-from auto --template svelte-kit-skeleton-js Open Storybook in your browser Access sveltekit/modules/navigation/default-actions story click on the buttons and verify that the actions are logged in the action panel Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did With this pull request the Snapshot documentation was updated to introduce a migration path from the existing Storyshots addon to the available options (e.g., portable stories and the test runner), which resulted in: Updating the documentation Creating the snippets Adding a deprecation notice to the relevant addons linking to the correct location in the documentation @yannbf and @ndelangen, when you have a moment, can you check on this and let me know of any feedback you may have? Looking forward to hearing from you both. Thanks in advance. Checklist for Contributors Testing Follow the steps in the contributing instructions for this branch, docs_visual_snaphot_test_changes. Open the relevant documentation and verify the feature changes. The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Updated GH readme so that it points people to GH Discussions rather than Discord for community support Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did This PR changes the story titles that Next.js E2E tests attempts to navigate to, they were missing the initial stories component. I'm unsure why this has worked before, maybe something changed recently but I couldn't find it. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Model loaders as before each and restore mocks properly Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Add console.log in preview, meta and story loaders. And check that they are run in that order, even if you gonna await something before it. Setup a spyOn in a play function, and see that the mock is reset when you are switching to a new story. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-24948-sha-12960c76. Install it by pinning all your Storybook dependencies to that version.",Merged
"What I did Reworked all errors to use the new error stuff! Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Attempting to get CI green. Similar to #24935, but a bit more targeted, and updates the @vitejs/plugin-react resolution instead of turning the yarn peer dep error into a warning. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing CI passing should be enough. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did With this pull request some clarifications were added to the documentation requested by various users across various outlets. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
Manual testing Run the NextJS app & observe everything running correctly Modify your storybook package script in a weird way (e.g. run in --docs mode) and observe that config is not applied 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>,Merged
"What I did See also: storybookjs/frontpage#626 Remove emoji from and simplify top-level titles Remove concept of bullet-link Remove /<renderer> from URLs in the CLI templates Remove /<renderer> from URLs in the docs Update TOC to use heading type Rename introduction.md, overview.md, how-to-contribute.md pages -> index.md pages Add all-new index.md pages for Sharing and API Add redirectPath to get-started TOC item Temporary workaround until we build a proper docs homepage Find/replace introduction.md/overview.md -> index.md Find/replace /introduction//overview -> / Add hideRendererSelector: true to frontmatter of (some) pages that aren't conditional on renderer Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fixed a bug which prevented any addons from being loaded in --test mode except addon-coverage and addon-docs. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing I tested this in my own app a little differently, but I'd recommend trying this: Build an app that uses a few addons, using --test. Without this fix, those addons won't be loaded. You might not even get an addons panel. With this fix, your addons should work fine. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Inside PreviewRender.svelte storyFn was called twice, once to get the values and once in the reactive label statement to make it updated whenever storyFn changes. I've added a small utility // the first time we don't want to call storyFn two times so we just return the values // we already have from the previous call. If storyFn changes this function will run // again but this time firstTime will be false function getStoryFnValue(storyFn){ if(firstTime){ firstTime = false; return { Component, props, on, } } return storyFn(); } that the first time return the values already present by the first call to storyFn. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing I tested that decorators only run once. You can verify that by opening one of the svelte sandbox and by going to renderers/svelte/decorators-runs-once verifying that in the console there's only one decorator log. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did With this pull request, the documentation was updated to reference the supported Node version and Yarn change that was introduced in #24565. @joevaugh4n when you have a moment, can you follow up with me on this and see if you're good on it. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did When installing using yarn I get the following errors: ➤ YN0000: · Yarn 4.0.2 ➤ YN0000: ┌ Resolution step ➤ YN0085: │ + @storybook/addon-essentials@portal:/home/samvv/Projects/storybook/code/addons/essentials::locator=before-storybook%40workspace%3A., and 697 more. ➤ YN0000: └ Completed in 7s 441ms ➤ YN0000: ┌ Fetch step ➤ YN0000: └ Completed ➤ YN0000: ┌ Link step ➤ YN0071: │ Cannot link @storybook/codemod into @storybook/cli@portal:/home/samvv/Projects/storybook/code/lib/cli::locator=before-storybook%40workspace%3A. dependency jscodeshift@npm:0.14.0 [251c9] conflicts with parent dependency jscodeshift@npm:0.15.1 [c0d42] ➤ YN0000: └ Completed ➤ YN0000: · Failed with errors in 8s 53ms I changed code/lib/postinstall/package.json and code/lib/codemod/package.json that contained dependencies to jscodeshift and bumped their version numbers from 0.14.0 to 0.15.1. After that, I ran yarn, which generated a new yarn.lock. It did not seem to impact any other functionality. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing I tried installing the dependencies using yarn. It now works as expected. Moreover, I ran yarn start in project root and checked that the example Storybook works. yarn test in the project root gives errors but I'm sure the CI will catch those if they are non-local. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did change the property for normalizeStoriesEntry to camelCase. extract & add tests for removeMDXEntries-functionality Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing I think the unit tests should suffice. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fixed the check-dependency script. It required dependencies being installed, which the script itself make sure. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
How to test No config: Run in an app dir project Run in a pages dir project Manual config: Run in an app dir project and configure with withStorybook({ appDir: false }) Observe pages/storybookPreview generatedHow to test No config: Run in an app dir project Run in a pages dir project Manual config: Run in an app dir project and configure with withStorybook({ appDir: false }) Observe pages/storybookPreview generated,Merged
"What I did Updated the link to the actual version of the Designs addon Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>What I did Updated the link to the actual version of the Designs addon Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>What I did Updated the link to the actual version of the Designs addon Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>What I did Updated the link to the actual version of the Designs addon Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>What I did Updated the link to the actual version of the Designs addon Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"The upcoming test feature was added to the documentation with this pull request. What I did Documentation updated where necessary to mention the feature Updated the API section to the toc.js file to feature the documentation updates Included the necessary snippets for the feature @ndelangen and @kasperpeulen, when you have a moment, can you check on this and let me know of any feedback you may have? Looking forward to hearing from you both. Thanks in advance Checklist for Contributors Testing Follow the steps in the contributing instructions for this branch, docs_test_flag. Open the relevant documentation and verify the feature changes. The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Exposed the types in viewports' models files for exposing them within the root index.d.ts. Ran into this during usage and found typing the viewport parameter to be cumbersome or impossible. As a result every single type field for the viewports was an invalid value prior to auditing. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did enable the --test flag internally when building our storybook I discovered that the titlePrefix and directory fiels are super-important for a correct creation of the index.json. ... by flattening all the files without taking these into account, the conflicting stories-ids problem could occur, and the hierarchy of the index.json would be completely incorrect. (which would cause removed/renamed stories!). I also am setting a different default_files_patterns now based on the disableMDXEntries setting, which should yield fewer individual pattern globs. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Changes for rendering stories for Svelte 5 where ""Components are no longer classes"" Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-24889-sha-7abeedf4. Install it by pinning all your Storybook dependencies to that version.",Merged
"What I did #24841 fixes the original problem that #24146 was trying to fix, so I've added back the Image Context CommonJS export, which should resolve the error in #24550. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing The Eager and Lazy stories should still be working, i.e Eager loads the image eagerly while the Lazy story loads the image lazily. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Updating jscodeshift, used by @storybook/cli to 0.15.1 to remove warnings on deployment. Currently, the storybook/cli has the following dependency tree: └─┬ storybook@7.5.3 └─┬ @storybook/cli@7.5.3 └─┬ jscodeshift@0.14.0 └── @babel/plugin-proposal-class-properties@7.18.6 This produces the following warnings when installing storybook and it's dependencies. npm WARN deprecated @babel/plugin-proposal-class-properties@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-class-properties instead. npm WARN deprecated @babel/plugin-proposal-nullish-coalescing-operator@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-nullish-coalescing-operator instead. npm WARN deprecated @babel/plugin-proposal-optional-chaining@7.21.0: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-optional-chaining instead. What I did update jscodeshift@0.15.1 I wasn't sure how ""lock files"" are managed by this project so I left that alone. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Deploy Storybook Run the storybook project updater to ensure code migrations function correctly. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did catch error from warnOnIncompatibleAddons so we don't fail the build just because of that. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! checked with local repo that has incompatible addons Documentation not sure if it should be documented anywhere, seems no for warnOnLegacyHierarchySeparator, so keep it in code only for now. Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did This PR adds a detection step when running storybook dev or storybook build for the infamous No matching exports error (refer to the issue), which is mostly caused by version inconsistencies in Storybook. Hopefully this will aid users to fix the issues themselves, but ideally this error should give them a command to run, like storybook doctor, which could tell exactly what package to upgrade. For now, we do our best with an error message. Before: image After: image Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! This is tricky to test, I don't know if it's possible in the monorepo. Create a sandbox Change the version of storybook to something old, e.g. 7.0.3 It's crucial that this results in duplicated versions of different Storybook packages, which is why this is tricky in the monorepo given the portaled resolutions which are used. Run Storybook build Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did sb init will set true for the useSWC flag for all new Webpack5-based projects, except for Angular and Next.js Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a Webpack5 sandbox Go to .storybook/main.<ts|js> and check, whether framework: { builder: { useSWC: true }} is set (except for Angular and Next.js) Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fixed the help template not working Made tweaks to the layout (after seeing what it looked like in prod, wanted to change a few things around) Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! • Open up a help discussion • Form should now work as syntax errors are resolved Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fix an issue where if experimental_updateStatus before an index is set, storybook throws an error. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did For the visual testing addon I want to enable --test build-mode. Passing the flag to the storybook CLI however sin't really straigh forwards due to multiple layers of abstractions. I don't want users to have to configure anything, so here's an sort-of-API to enable --test build-mode without setting the CLI flag: an envirent variable: SB_TESTBUILD=""true"" will cause the --test flag to become true. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did When parsing Storybook metadata, there's a chance the preview file breaks in the CSF AST parsing step. That's because users might have unconventional code in their preview.js file which is not parseable: // .storybook/preview.js import { baseStorybookPreviewConfig } from './some-config' export default baseStorybookPreviewConfig; This PR handles the error in case it happens, and also improves the error message when it comes to AST parsing errors. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Create a sandbox Edit the preview.js file to be: // .storybook/preview.js import { baseStorybookPreviewConfig } from './some-config' export default baseStorybookPreviewConfig; Build the Storybook. It should not break. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fixed the help template not working Made tweaks to the layout (after seeing what it looked like in prod, wanted to change a few things around) Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! • Open up a help discussion • Form should now work as syntax errors are resolved Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fix an issue where if experimental_updateStatus before an index is set, storybook throws an error. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did For the visual testing addon I want to enable --test build-mode. Passing the flag to the storybook CLI however sin't really straigh forwards due to multiple layers of abstractions. I don't want users to have to configure anything, so here's an sort-of-API to enable --test build-mode without setting the CLI flag: an envirent variable: SB_TESTBUILD=""true"" will cause the --test flag to become true. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did When parsing Storybook metadata, there's a chance the preview file breaks in the CSF AST parsing step. That's because users might have unconventional code in their preview.js file which is not parseable: // .storybook/preview.js import { baseStorybookPreviewConfig } from './some-config' export default baseStorybookPreviewConfig; This PR handles the error in case it happens, and also improves the error message when it comes to AST parsing errors. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Create a sandbox Edit the preview.js file to be: // .storybook/preview.js import { baseStorybookPreviewConfig } from './some-config' export default baseStorybookPreviewConfig; Build the Storybook. It should not break. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Warn on implicit actions Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Added experimental SWC mode for Next.js >= 14 Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Next.js 12 sandbox -> Setting framework.options.builder.useSWC: true shouldn't have any effect. Instead the user should get a warning in the console, that SWC mode is only supported in Next.js v14 and above. It would be beneficial also to test Next.js 13, since we currently don't have a Next.js 13 sandbox in place. Just check out one of the Next.js sandboxes and change the next dependency to the latest v13. The behaviour should be the same as for Next.js v12. SWC is not supported here. Storybook should work as expected in Babel mode. Other Next.js sandboxes -> Set framework.options.builder.useSWC: true and test whether all Next.js Stories are working as expected. Personally, I have tested the local font option already. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Deprecate skipBabel Typescript option and introduce the skipCompiler option, which covers compilers in general. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-24844-sha-d241a3e8. Install it by pinning all your Storybook dependencies to that version.",Merged
"What I did Revert defaulting to SWC in test build, but keep using esbuild for minification Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Refactor the preview.js import in Next.js to use ESM throughout the modules instead of CJS. Remove conditional import of addon-actions as it's a direct dependency anyway, so it will always be there. Refactor conditional use of Next.js app router context providers to not use require() but instead import() the mock AppRouterProvider. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"This is an automated pull request that bumps the version from 7.6.0-alpha.5 to 7.6.0-alpha.6. Once this pull request is merged, it will trigger a new release of version 7.6.0-alpha.6. If you're not a core maintainer with permissions to release you can ignore this pull request. To do Before merging the PR, there are a few QA steps to go through: Add the ""freeze"" label to this PR, to ensure it doesn't get automatically forced pushed by new changes. Add the ""ci:daily"" label to this PR, to trigger the full test suite to run on this PR. And for each change below: Ensure the change is appropriate for the version bump. E.g. patch release should only contain patches, not new or de-stabilizing features. If a change is not appropriate, revert the PR. Ensure the PR is labeled correctly with one of: ""BREAKING CHANGE"", ""feature request"", ""bug"", ""maintenance"", ""dependencies"", ""documentation"", ""build"", ""unknown"". Ensure the PR title is correct, and follows the format ""[Area]: [Summary]"", e.g. ""React: Fix hooks in CSF3 render functions"". If it is not correct, change the title in the PR. Areas include: React, Vue, Core, Docs, Controls, etc. First word of summary indicates the type: “Add”, “Fix”, “Upgrade”, etc. The entire title should fit on a line This is a list of all the PRs merged and commits pushed directly to next, that will be part of this release: ✨ Feature Request: TestBuild: Revert defaulting to SWC in test build, but keep using esbuild for minification #24843 ✨ Feature Request: Viewport: Add newer device viewports #24777 📦 Dependencies: Addon: Move Visual Test addon to the code directory #24771 ✨ Feature Request: FastBuild: Improve config loading & naming #24837 🐛 Bug: Vite: Prevent non-deterministic build output #24833 🏗️ Build: Build: Add @storybook/addon-coverage to proxy list in verdaccio config #24836 If you've made any changes doing the above QA (change PR titles, revert PRs), manually trigger a re-generation of this PR with this workflow and wait for it to finish. It will wipe your progress in this to do, which is expected. Feel free to manually commit any changes necessary to this branch after you've done the last re-generation, following the Make Manual Changes section in the docs, especially if you're making changes to the changelog. When everything above is done: Merge this PR Follow the run of the publish action Generated changelog 7.6.0-alpha.6 Addon: Move Visual Test addon to the code directory - #24771, thanks @ cdedreuille! FastBuild: Improve config loading & naming - #24837, thanks @ ndelangen! TestBuild: Revert defaulting to SWC in test build, but keep using esbuild for minification - #24843, thanks @ kasperpeulen! Viewport: Add newer device viewports - #24777, thanks @ Tomo5524! Vite: Prevent non-deterministic build output - #24833, thanks @ henkerik!",Merged
"What I did rename the properties on the TestBuild interface ensure the default values get added instead of dropped when users specify overrides Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Sorted stories to prevent a non-deterministic build in list-stories function of the vite-builder. The result of Glob is not sorted an may differ for each invocation. This results in a different bundle file hashes from one build to the next. This breaks caching of unchanged chunks and breaks artifact based build systems like Bazel or Buck2. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Implement builder options for test build Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did If the benchmark task errors, it will log a message to mention that is a benchmark error. Before, it logged like this: ⬇️ Installing local dependencies > yarn install ➤ YN0000: · Yarn 4.0.1 ➤ YN0000: ┌ Resolution step Test results written to /tmp/storybook/test-results/sandbox.xml Error running task sandbox: { ""errno"": -2, ""code"": ""ENOENT"", ""syscall"": ""spawn /bin/sh"", ""path"": ""/bin/sh"", ""spawnargs"": [ ""-c"", ""du -sb ."" ], ""cmd"": ""du -sb ."" } Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing No need. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did The newly implemented export-order loader seems to fail randomly. The parse function of es-module-lexer has to be awaited to wait for wasm being ready. Besides that: Setting enforce: 'post' option like it is done in the Vite builder Updating es-module-lexer to its latest version Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! That is not really possible. I will reran CI to see, whether the random error occurs Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did This PR adds a tighter integration for sveltekit allowing the user to mock the stores from sveltekit, adds an override listener for the links allowing you to execute code when a link it's clicked intead of navigating, adding the ability to still import and run code on afterNavigate (here emulated like onMount), adding callbacks for the other functions like goto, invalidateAll. For the moment is a draft PR. I'm getting some weird compilation errors whenever i try to dynamically import @storybook/addon-actions but overall it should already work kinda fine. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a sandbox for template sveltekit Modify the Button component to import { page } from ""$app/stores"" print the content of the store on the page with {JSON.stringify($page)} verify that the component normally work when sveltekit is launched Modify Button.stories.ts and add to the primary button parameters.sveltekit.stores.page={ test: true } Open Storybook in your browser Access the Button story verify that now the stringified page store contains { ""test"": true } Documentation Add or update documentation reflecting your changes Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Added necessary swc config for React and Preact projects Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! React: Run the react-webpack-18-ts sandbox Go to .storybook/main.ts and enable fast refresh and swc: framework: { name: '@storybook/react-webpack5', options: { fastRefresh: true, builder: { useSWC: true, } }, }, Check, whether fast refresh works, e.g. adjust Button.tsx component like so: const mode = primary ? 'storybook-button--primary' : 'storybook-button--secondary'; const [counter, setCounter] = useState(0); useEffect(() => { const interval = setInterval(() => { setCounter((c) => c + 1); }, 1000) return () => { clearInterval(interval); } }, []) return ( <button type=""button"" className={['storybook-button', `storybook-button--${size}`, mode].join(' ')} style={{ backgroundColor }} {...props} > {label} {counter} </button> ); Now change something in the button. The counter shouldn't reset if fast-refresh works appropriately. Preact: Create a Preact sandbox (preact-webpack5/default-ts) Adjust the configuration to enable swc: framework: { name: '@storybook/preact-webpack5', options: { builder: { useSWC: true } }, }, Check whether Stories are rendered (Note: Fast refresh for Preact doesn't work, since there isn't an appropriate swc plugin in place) Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Do not generate sourcemaps when --test is true Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Defaulted the Svelte source decorator to always exclude decorators from the source generation. We have a similar pattern in React, HTML and Web components, however for them excludeDecorators is configurable. I didn't think that was necessary here, since including decorators leads to a broken result, so I don't know why you would want that. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Create a Svelte-based sandbox or open a published Storybook from this PR Navigate to /?path=/docs/stories-renderers-svelte-slot-decorators--docs Open the source view See that it says <ButtonJavaScript primary/> and not <SlotDecorator primary/> Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Make refs empty when --test is true Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below:",Merged
"What I did When --test is true we skip the warnOnIncompatibleAddons step. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER> @ndelangen",Merged
"What I did Disabled ""Critical dependency require"" warning in Webpack5-based projects, since webpack does seem to have a problem with dynamic requires, which are just handled fine in Storybook. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Generate Next.js sandbox Start Storybook The ""Critical Dependency"" warning shouldn't appear Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-24782-sha-bb0e7d7c. Install it by pinning all your Storybook dependencies to that version.",Merged
"What I did This pull request introduces updates to the INITIAL_VIEWPORTS configuration in Storybook. The aim of these changes is to ensure that the Storybook environment stays current with the devices used for UI display, which are relevant in the current industry standards. The updated INITIAL_VIEWPORTS configuration now includes the following devices: iPad Pro 11-in iPhone 14 Pro Max iPhone 14 Pro iPhone 14 iPhone 13 Pro Max iPhone 13 Pro iPhone 13 iPhone SE 3rd generation These additions to the INITIAL_VIEWPORTS configuration are essential for maintaining alignment with current industry standards. They ensure that stakeholders have a clear understanding of the devices utilized for showcasing user interfaces within Storybook. before after https://github.com/storybookjs/storybook/assets/57059705/9ed4f961-353b-4b77-a051-efe550cdecc1 https://github.com/storybookjs/storybook/assets/57059705/12be530b-642c-4a80-8e15-7ee0ae132dbd Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Ran sandbox locally and verified all the added devices are working as expected. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Briefly document the new split bundling strategy for addons. Any feedback on wording is welcome. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Move @chromaui/addon-visual-tests to the code directory as a devDependency. Upgrade @chromaui/addon-visual-tests to the latest version. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Move @chromaui/addon-visual-tests to the code directory as a devDependency. Upgrade @chromaui/addon-visual-tests to the latest version. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did In Webpack5-based projects, the babel-plugin-react-docgen plugin is used to generate types for Javascript and Typescript components. In the future, the Webpack5 builder will not only support Babel, but another compiler like SWC. Therefore, we have to change the implementation of this transformation for being compiler agnostic. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a Webpack5-based sandbox Go to .storybook/main.ts and change set { typescript: { react-docgen: ""react-docgen"" }} Controls are properly generated in Storybook Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Removed babel-plugin-named-exports-order and added a new export-order-loader to @storybook/builder-webpack5 to make the AST transformation compiler independent Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a Webpack5-based sandbox Open a Story Analyze the compiled code of the Story. It should export a __namedExportsOrder field with the preserved Story order Bildschirmfoto 2023-11-07 um 14 57 47 (The variable is also exported, but not visible on the screenshot) Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Small update to fix the button size for strings on controls. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did added the assert dependency to doc tools this is needed for this code here in doctrine https://github.com/eslint/doctrine/blob/0e8eba7f80b89cc8185541dda4e90c961d1d3553/lib/utility.js#L32 was causing an error in react native storybook 7 alpha unless the user manually adds the assert dependency. image Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"With this pull request, the Environment variables documentation was updated to factor in some information about Vite and how to obtain environment variables specific to this builder.

What was done:

Minor wording tweaks
Consolidated the snippets to become framework agnostic to reduce the maintenance cost
Introduced conditional rendering of the documentation to avoid confusion
Closes #23528

@IanVS, when you have a moment, can you take a look and let me know of any feedback you have? Appreciate it

How to test
Follow the steps in the contributing instructions for this branch, chore_env_vars_tweaks.

Open the relevant documentation, and for Vite frameworks, you should see a similar section added to the documentation

framework-conditional-render-vite-support

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Closes #23568

What I did
Fixed initialization of Storybook in Angular 16.1. An nx project was wrongly recognized, because @angular-eslint/schematics introduced a dependency on nx. I have removed the logic to identify a workspace being a nx workspace by evaluating nx as a dependency. Instead, we only rely on the existent of a nx.json file, since that should be enough to identify a workspace using nx or not in most of the cases.

How to test
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"When following this guide, there was an issue with the usage of the ""wait-on"" package when passing the parameter ""tcp:6006"" on the Github Actions VM. When the ""wait-on"" package doesn't explicitly specify the IP, it changes to the format ""tcp:localhost:6006,"" which can cause problems if the localhost domain is not bound to the 127.0.0.1 IP in the CI VM environment.

To address this, I propose the following modification to the documentation:

Instead of using ""tcp:6006"" as the parameter, explicitly use ""tcp:localhost:6006"" instead. This will increase the likelihood of it functioning correctly in the CI VM environment.

Original:

wait-on tcp:6006
Proposed modification:

wait-on tcp:127.0.0.1:6006
By incorporating this change into the guide, the issue should be resolved, and it should work properly even in the CI environment.

Closes #

What I did
How to test
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Works on #23457

What I did
Deprecated existing storyIndexers in favor of indexers as the new entry for the new API
Doesn't actually implement support for indexers yet, they are ignored. Which is also why this doesn't target next - we don't want to deprecate the API before the replacement is ready.
Move tests for StoryIndexGenerator to StoryIndexGenerator.deprecate.test.ts. The plan is to copy the file to StoryIndexGenerator.test.ts that will have the same tests but with the new API instead (plus a bunch more)
Follow-up PR here will implement support for the new IndexEntry in StoryIndexGenerator, which should be enough to make this releasable. Actually changing our internal indexers can be done afterwards.

How to test
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"What I did
fix types which were unsound
improve StoriesWithPartialProps type to filter non-story exports
add tsdoc comments for further clarification
How to test
No need, this has been tested already, and it's mostly Typescript checking.
You can play around in code/renderers/react/src/__test__/composeStories.test.tsx for validation

I made changes to type names, please review them and let me know if something doesn't seem good.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]
",Merged
"What I did
This PR adds support for canary releases.

Anyone with admin privileges can manually trigger a workflow run and specifying the PR number to create a release for.
contributors and maintainers are instructed to ask the core team if they would like a canary release of their PR
the workflow must always be triggered from the default branch next, and not the actual branch you want the release for. This is for security reasons.
If a canary release succeeds, the PR description will be updated with the release information (see at the bottom of this PR body)
If a release fails, a comment will be made tagging the triggering actor, see Core: Fix useStoryPrepared hook failing with undefined data #22631 (comment)
The canary will have the following version format: <CURRENT_VERSION>-canary-<PR_NUMBER>-<TIMESTAMP>-<COMMIT_SHA>.0, eg. 7.1.1-pr-23508-1689802571-5ec8c1c3.0. It's a bit verbose.
The current version has no meaning, it just softly indicates which version the PR is based on. eg. this PR is based on 7.1.0, so it will get released as a canary version of 7.1.1.
The timestamp ensures that any subsequent releases are always considered newer.
The commit hash is not strictly necessary, but it's a good way to indicate which exact code has been released.
How to test
You can test this out by reading the documentation in this PR, and then using this branch as a ref when running the workflow, instead of next. So in the UI you'd choose canary-release-workflow instead of next, and with the CLI it would be:

gh workflow run --repo storybookjs/storybook --ref canary-release-workflow canary-release-pr.yml --field pr=<PR_NUMBER>
To test the updating of the PR description you need to add the following to the bottom of your description before triggering the workflow:

### 🦋 Canary release

<!-- CANARY_RELEASE_SECTION -->
This pull request has been released as version [`7.1.1-canary-23508-1690059187-2dbf6e38.0`](https://npmjs.com/package/@storybook/cli/v/7.1.1-canary-23508-1690059187-2dbf6e38.0). Install it by pinning all your Storybook dependencies to that version.
<details>
<summary>More information</summary>

| | |
| --- | --- |
| **Published version** | [`7.1.1-canary-23508-1690059187-2dbf6e38.0`](https://npmjs.com/package/@storybook/cli/v/7.1.1-canary-23508-1690059187-2dbf6e38.0) |
| **Triggered by** | @JReinhold |
| **Repository** | [storybookjs/storybook](https://github.com/storybookjs/storybook) |
| **Branch** | [`canary-release-workflow`](https://github.com/storybookjs/storybook/tree/canary-release-workflow) |
| **Commit** | [`2dbf6e38`](https://github.com/storybookjs/storybook/commit/2dbf6e38cca59573408cf9d58d245a3125c980d7) |
| **Datetime** | Sat Jul 22 20:53:07 UTC 2023 (`1690059187`) |
| **Workflow run** | [5632680651](https://github.com/storybookjs/storybook/actions/runs/5632680651) |

To request a new release of this pull request, mention the `@storybookjs/core` team.

_core team members can create a new canary release [here](https://github.com/storybookjs/storybook/actions/workflows/canary-release-pr.yml) or locally with `gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=23508`_
</details>
<!-- CANARY_RELEASE_SECTION -->",Merged
"What I did
I noticed that ui/components and lib/manager-api have -rightfully- a peerDependency on react.

Those packages are imported into the webpack builder causing it to also depend on react (via a peerDependency)

That causes the webpack frameworks to all depend on react (via a peerDependency).

The reason why the ui/components and lib/manager-api are used in the webpack builder is unclear:
It's likely a left-over from the olden days when the builder was used for both, and it was just always left in place in some form... never re-evaluated properly.

I left the code in place to add aliases, though I think this code should be removed.
By removing the dependencies the require.resolve used to add the alias will likely start failing in some sitations.
I wrapped it with a try-catch, so if the resolve fails, the alias is not added.

I suspect the alias might only be useful for us internally, not for outside users.

The only need you'd ever have to ensure a single version of the packages (which is what aliases are used for here) would be for addon-docs.
Addon docs should add these aliases if they are needed for some reason IMHO. Addon-docs already has a react dep, so there it would be fine.

How to test
Webpack based sandboxes should continue to work, including docs pages and MDX pages.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"What I did
Add and use an --all flag to the label-patches script, that labels all pending patch PRs irregardless of if they are found in the git log or not. This is necessary when doing a stable release from next, as that will per definition include all patch PRs. (I did this manually for 7.1.0 per @shilman's request)
Documented that you need to update version JSONs manually whenever you're updating the changelog manually
Add the ""sync next-release to main"" step for stable promotions, based on doing it successfully, manually for 7.1.0. disabled, because we might have a better solution that we want to try out first.
Fix the sync version JSONs step trying to sync next.json when it should be latest.json
How to test
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"What I did
I introduce a new bundle script specific for addons.
their preview.ts and manager.ts entrypoints never need to have types generated for them, not generating them saves install-size and compile/publish-time
their manager.ts file should be prebundled. References to manager-related storybook packages and react will be globalized/externalized by the builder-manager.. So why not do this before publishing.
their preview.ts file should be prebundled. References to preview-related storybook packages will be globalized by the builder.. So why not do this before publishing?
their preset.ts should be compiled for node16 only, and does not need types generated.
their other entrypoints should be compiled for both the browser and node16, and should have types generated, because these are often for public use, such as importing decorators.
I migrate all core addons to use this new pattern
I removed react & react-dom peerDependencies as much as possible.
addons that depend on react because of manager.ts injecting custom Panels and such do not need the dependency anymore, this is solved via the new bundle script for addons!
addons that depend on react for decorators will need a peerDependency on react. This makes the addon react specific, though a notable exception here is addon-links. It has a react dep for the LinkTo component, that is it's own export... I've made this have an optional peerDependency on react for now. Such addons ARE NOT ALLOWED IN ESSENTIALS!
builder-webpack5 needs react because it added aliases for some manager-packages. I removed this here: WebpackBuilder: Remove need for react as peerDependency #23496
To be determined
react in the preview

TBD: addon's preview.ts file might have a dependency to react, I could possibly prebundle this as well, and maybe globalized/externalized react for the preview?
TBD: should I try to externalize/globalize react, and possibly be able to prebundle most if not all of addon-docs? I could make a prebundled version of react and inject it into the preview, so the global variable is available. If the user isn't using react themselves, I could use the version storybook shipped with, if the user does use react themselves, I'd quickly prebundle their version of react, and inject that...
react in manager deps

manager-api needs react because it exposes components and hooks. This package ends up being embedded into managerpackage, in which react is prebundled. I've spiked moving the code into manager: Refactor: Move code of lib/manager-api into ui/manager #23389. That PR doesn't actually change the fact the package is depending on react. Users of this package (addon-authors) will want to get proper types, which include react-types! Embedding those in might actually be the correct move, because that would ensure users will be told if they tried to do things our version of react embedded into the manager can't do...
router needs react because it's embedding react-router. This package is only used in the manager, so whatever I end up doing to manager-api I'll likely do here as well. I'm not sure this packages has any real-world use anymore TBH, could be merged into manager-api?
theming needs react because it's embedding emotion-react. This package is used in the manager, but has seen other uses as well. globalizing react in it's dist seems not possible to me because of it.
TBD: How to cope with manager-api, router and theming packages depending on react.

I am considering making these dependencies normal dependencies instead of peerDependencies.
I am considering making them optional peerDependencies via peerDependenciesMeta
I am considering (possibly in addition to one of the above 2) to create another bundle script for these packages specifically to create a browser extra export. I'm not sure what the point of that would truly be.
Consider moving manager-api's and or router's implementations into the manager package.
TBD: How to cope with blocks and components packages depending on react.

I'm considering making them have optional peerDependencies on react
components also has a dependency on react-dom.
TBD: Do we want to remove addon-docs from sb init?

TBD: Do I remove the addon-links LinkTo component? ? move it somewhere else to make addon-links not depend on react anymore? Do I externalize react in the preview?

TBD: the package types needs react, mostly for manager-api stuff. It's externalized it seems right now, without any dependency defined.. this is possibly problematic, but considering it's just types, and the recommendation is skipLibCheck this might be ok??

Perhaps these types actually belong in manager-api?
How to test
TBD",Merged
"Closes #21216
Closes #21710

What I did
Improved support for mono repositories to apply the ""wrapForPnp"" wrapper also in mono repository environments. Additionally, an auto migration was added.

Improved support for projects which are part of a workspace configured by yarn, npm, pnpm, lerna, turbo or rush

How to test
Go into a project which is part of a mono repository setup or where yarn pnp is enabled.
If the project is a yarn workspace with pnp enabled, please run yarn exec <storybook-project-folder>/code/lib/cli/bin/index.js automigrate for the automigration or yarn exec <storybook-project-folder>/code/lib/cli/bin/index.js init to initialize Storybook. Otherwise, you can ditch the yarn exec part.
Please check whether the values for the configuration fields in main.ts are properly wrapped by the wrapForPnp or getAbsolutePath wrapper.
Play around with the following origin scenarios:
a wrapForPnp function is already in place, but is not used to e.g. wrap addon values
test it for main.ts and main.js files.
Tested scenarios:

init
auto-upgrade
where no fields were transformed
where all fields were already transformed (wrap-require automigration skipped)
where some fields were transformed (do not introduce a new wrapper if getAbsolutePath or wrapForPnp functions are in place)
checked for Typescript and Javascript
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"Closes #20653

What I did
This PR fixes the ember addon on the latest 7.0 release. It was also broken on the 6.0.0 release since #17843.
The code has been updated to install ember with the webpack builder and the patch #17843 has been reverted.
To make thinks easier to test, I added two sandbox templates for ember 3 and ember 4.

How to test
Well, that's the fun part

Ember 3
yarn task --task dev --template ember/3-js --start-from=install
Go to sandbox/ember-3-js
Edit the package.json to update ember-auto-import to ^2.0.0.
Edit the package.json to update ember-qunit to ^6.0.0.
Run yarn
Run yarn add @storybook/ember-cli-storybook
Run yarn build && yarn storybook
Access the stories and see that the preview is working \o/
Ember 4
yarn task --task dev --template ember/default-js --start-from=install
Access the stories and see that the preview is working \o/
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This pull request has been released as version 0.0.0-pr-23435-sha-bd98198e. Install it by pinning all your Storybook dependencies to that version.

More information",Merged
"What I did
#23393 introduced an ""apply"" step to the publishing workflow, that committed the version bump to next-release/latest-release. This had the unfortunate side-effect that this commit would trigger a secondary run of the publish workflow, running simultaneously with the already running publish workflow (albeit a little behind). The secondary run would be a no-op, but it would fail in the end. The existing workflow would complete without errors.

You can see how this played out in the release of 7.0.27, with this being the real run and this being the secondary run triggered.

This PR adds a guard against that, by cancelling the workflow if it's triggered by a commit with [skip ci], and then add that string to the version bump commit.

How to test
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 If this PR should be tested against many or all sandboxes,
make sure to add the ci:merged or ci:daily GH label to it.
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"I will manually cherry-pick this back to main in follow-up PR

What I did
This PR changes the release flow to defer the actual version bump to the publish step instead of when preparing the release PRs. This makes it possible to run CI on the release PRs. It will still calculate the version bump up front.

The release:version script now take two additional flags:

--deferred: This will keep the same bumping logic, except instead of bumping the versions in all the packages it will simply set a ""deferredNextVersion"" property in code/package.json and exit.
--apply: This will apply the version set at ""deferredNextVersion"", by actually bumping all the package's versions as usual. It's invalid to use this flag with --release-type or --pre-id, since --apply will not do any increment calculation.
The release preparation workflows then uses --deferred to set the deferred version.
The publish workflow will look for the ""deferredNextVersion"" and if it is set, it will run release:version with --apply and commit the changes. It will not be set in cases where patch releases don't contain any releasable changes.

This deferred workflow doesn't make much sense to run locally, and it's not necessary to do so, but it can be if you want to.

How to test
cd scripts
yarn release:version --release-type preminor --pre-id test
See that ""deferredNextVersion"" is not set in code/package.json
yarn release:version --apply
See that all packages have been bumped and that ""deferredNextVersion"" is removed again
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 If this PR should be tested against many or all sandboxes,
make sure to add the ci:merged or ci:daily GH label to it.
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"hyper experimental: move the actual code into ui/manager but keep lib/manager-api a real package with types.

Long term strategy: move all code into a single package.

This has upside of making building manager-api unnecessary during storybookmaintenance.
the downside is that building manager is slower.

But it's a step into the right direction, I think.

Importantly this does not mean manager-api gets deprecated as a package.
It's still a package users depend on and use.

What's novel about this approach is that it doesn't need a builder to globalize manager-api! It's builder independent, because the package itself gets the implementation from the global scope.

This has a big downside:
It will only work within the browser, and only when the prebundles code is pre-injected.
You can see the effects of this in some of the tests I had to adjust.

So this is a proof of concept of the idea that we could make packages be externalised without needing to set this up in builders.",Merged
"Migrates @storybook/codemod from #22176

Problem Statement
Packages in StoryBook mono-repo use Typescript. Although, some of them use typescript in non-strict fashion. This PR focuses on codemod package and turns on the strict mode.

What I did
I migrated @storybook/codemod to use strict:true in typescript compiler options. It will enable better type-checking for this package. I've fixed most of the errors which were occurring after changing the strict flag to true. But in some cases, I've used the ts-ignore flag since the code flow was difficult to understand. And as per the issue description, for these PRs changes should not be non-functional, hence I decided to use ts-ignore. Mostly, added ts-ignore at places where function arguments aren't matching.

How to test
For testing, I ran all the existing Unit Tests and E2E Tests. This is a non-functional, non-breaking change running unit tests and E2E tests are sufficient for the testing.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 If this PR should be tested against many or all sandboxes,
make sure to add the ci:merged or ci:daily GH label to it.
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"What I did
The Button component had a lot of variants that were not used and confusing. Some versions were also missing compared to the design. This PR is an attempt to add the new props for the <Button /> component while still maintaining backward compatibility with versions that uses the old props.

Add new props + styling for the <Button /> component
Add depreciated mention for all props we would like to remove in 8.0
Update documentation to improve visibility on how to use the Button component.
How to test
Run a sandbox for template, e.g. yarn task --task sandbox --start-from auto --template react-vite/default-ts
Open Storybook in your browser
Access the Button story
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 If this PR should be tested against many or all sandboxes,
make sure to add the ci:merged or ci:daily GH label to it.
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"What I did
change the UI sidebar to show the status of stories
make groups/components show the accumulated status via a color
improve/add various stories I used to test this feature
How to test
You need a way to set statuses on stories. Right now this API is so new, nothing uses it yet. So create your own addon that adds it:
rename manager.ts in ui/.storybook to manager.tsx
set it's contents to:
import { addons, types } from '@storybook/manager-api';
import { IconButton, Icons } from '@storybook/components';
import startCase from 'lodash/startCase.js';
import React, { Fragment } from 'react';

addons.setConfig({
  sidebar: {
    renderLabel: ({ name, type }) => (type === 'story' ? name : startCase(name)),
  },
});

addons.register('lalala', (api) => {
  addons.add('lalala', {
    title: 'lalala',
    type: types.TOOL,
    render() {
      return (
        <Fragment>
          <IconButton
            title=""lalala""
            onClick={() => {
              const { id } = api.getCurrentStoryData();

              api.experimental_updateStatus('lalala', {
                [id]: {
                  description: 'lalala',
                  status: 'error',
                  title: 'lalala',
                  data: {},
                },
              });
            }}
          >
            <Icons icon=""failed"" />
          </IconButton>
          <IconButton
            title=""lalala""
            onClick={() => {
              const { id } = api.getCurrentStoryData();

              api.experimental_updateStatus('lalala', {
                [id]: {
                  description: 'lalala',
                  status: 'warn',
                  title: 'lalala',
                  data: {},
                },
              });
            }}
          >
            <Icons icon=""changed"" />
          </IconButton>
          <IconButton
            title=""lalala""
            onClick={() => {
              const { id } = api.getCurrentStoryData();

              api.experimental_updateStatus('lalala', {
                [id]: {
                  description: 'lalala',
                  status: 'success',
                  title: 'lalala',
                  data: {},
                },
              });
            }}
          >
            <Icons icon=""passed"" />
          </IconButton>

          <IconButton
            title=""foobar""
            color=""red""
            onClick={() => {
              const { id } = api.getCurrentStoryData();

              api.experimental_updateStatus('foobar', {
                [id]: {
                  description: 'foobar',
                  status: 'error',
                  title: 'foobar',
                  data: {},
                },
              });
            }}
          >
            <Icons icon=""failed"" />
          </IconButton>
          <IconButton
            title=""foobar""
            onClick={() => {
              const { id } = api.getCurrentStoryData();

              api.experimental_updateStatus('foobar', {
                [id]: {
                  description: 'foobar',
                  status: 'warn',
                  title: 'foobar',
                  data: {},
                },
              });
            }}
          >
            <Icons icon=""changed"" />
          </IconButton>
          <IconButton
            title=""foobar""
            onClick={() => {
              const { id } = api.getCurrentStoryData();

              api.experimental_updateStatus('foobar', {
                [id]: {
                  description: 'foobar',
                  status: 'success',
                  title: 'foobar',
                  data: {},
                },
              });
            }}
          >
            <Icons icon=""passed"" />
          </IconButton>
        </Fragment>
      );
    },
  });
});
start the UI storybook
navigate to a story
click the button from the custom addon in the toolbar to set status
the first 3 fake being set from addon ""A"" and the last 3 fake being set from addon ""B""
when setting both ""A"" and ""B"" on a single story, the highest priority status should be shown.
when you click on the icon to the right of the story name in the sidebar, you should see an tooltip with all both ""A"" and ""B""
expect all groups above the story with status to also have a changed color, but no icon.
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 If this PR should be tested against many or all sandboxes,
make sure to add the ci:merged or ci:daily GH label to it.
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"What I did
Improve types / jsdoc comments
split off the Addon_TypesEnum.PREVIEW type from Addon_BaseTypes, because a PREVIEW-type addon actually has a different interface.
I refactored the code for tabs and preview-wrappers, hopefully it makes more sense now.
How to test
rename .storybook/manager.ts to .storybook/manager.tsx inside the ui directory
replace the file's cpontents with:
import React from 'react';
import { addons } from '@storybook/manager-api';
import { Addon_TypesEnum } from '@storybook/types';
import startCase from 'lodash/startCase.js';

addons.setConfig({
  sidebar: {
    renderLabel: ({ name, type }) => (type === 'story' ? name : startCase(name)),
  },
});

addons.add('my-org/custom-preview', {
  type: Addon_TypesEnum.PREVIEW,
  render: ({ children }) => (
    <div style={{ transform: 'rotate(180deg)', width: '100%', height: '100%' }}>{children}</div>
  ),
});

const CustomTab = () => (
  <div
    style={{
      position: 'absolute',
      zIndex: '1',
      width: '100%',
      height: '100%',
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      background: 'gold',
      color: 'black',
    }}
  >
    Custom Tab
  </div>
);

addons.add('my-org/custom-tab', {
  type: Addon_TypesEnum.TAB,
  title: 'Custom Tab Title',
  route: ({ storyId, viewMode }) => `/${viewMode || 'story'}/${storyId}/custom`,
  match: ({ path }) => path.includes('/custom'),
  render: ({ active }) => (active ? <CustomTab /> : null),
});
start the ui storybook
There are a bunch of funky things going on:
There is now a canvas tab (normally not shown) because an extra TAB addon was inserted.
The extra tab, adds /custom to the path, which makes the custom Tab content render (on top of the normal canvas)
The canvas component is wrapped by the custom PREVIEW type addon, which just rotates the canvas 180 degrees (because that's a fun way of showing what PREVIEW type addons can do.
Switching between tabs should work as expected. Note that it's completely up to the addon creator to decide what the TAB does. Note that the canvas WILL be hidden unless the route starts with docs or story..
If a TAB navigates to something else, they'll have to handle showing something in another way. (that's what full viewport addons experimental_PAGE type addons will be able to handle.
If you remove the TAB addon, no tabs should be shown, the ""Canvas"" tab should be auto-removed, if it's the only TAB.
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 If this PR should be tested against many or all sandboxes,
make sure to add the ci:merged or ci:daily GH label to it.
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"Telescoped off: #23288

What I did
refactor the addon/actions to update the title due to it's own state
refactor the addon/actions to update the title to use a FC
refactor the addon/a11y to update the title to use a FC
refactor the addon/controls to update the title to use a FC
How to test
Addon actions should function as it was, but with a nicer looking number indicator
Addon a11y should function as it was, but with a nicer looking number indicator
Addon controls should function as it was, but with a nicer looking number indicator
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 If this PR should be tested against many or all sandboxes,
make sure to add the ci:merged or ci:daily GH label to it.
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"This targets release/7.2 to not disrupt the 7.1 release.

What I did
I made the router library more powerful by making the Route component accept a RegExp as a path prop.
I improved the Route component interface
How to test
unit tests should pass
types check should pass
no UI changes
e2e tests should pass
generating a sandbox and navigating from default path (/) to a story, then to settings page should work.
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 If this PR should be tested against many or all sandboxes,
make sure to add the ci:merged or ci:daily GH label to it.
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"What I did
Adds the --keep-redundant-commits flag to cherry picking when picking patch PRs.

This ensures that it doesn't bail when trying to pick already picked PRs, such as those that have been manually picked previously, or where the ""picked"" label was not originally on for some reason.

We want to still cherry-pick and commit these commits so they get into the git history, and thus gets correctly labeled when publishing the version. If we instead chose to skip the commits, the labeler would not label such PRs as ""picked"".

How to test
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 If this PR should be tested against many or all sandboxes,
make sure to add the ci:merged or ci:daily GH label to it.
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"This targets release/7.2 to not disrupt the 7.1 release.

What I did
improve the Tabs component to have better types
the title can be a FC now
improve the Addon interface to accept the FC as title as well
split the Addon interface into Addon_BaseType for future use
How to test
build should succeed
yarn check should pass
no UI changes detected by chromatic (except for new stories)
there should be no perf changes in anything related to tabs or addons
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 If this PR should be tested against many or all sandboxes,
make sure to add the ci:merged or ci:daily GH label to it.
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"What I did
enable the --test flag internally when building our storybook

I discovered that the titlePrefix and directory fiels are super-important for a correct creation of the index.json.
... by flattening all the files without taking these into account, the conflicting stories-ids problem could occur, and the hierarchy of the index.json would be completely incorrect. (which would cause removed/renamed stories!).

I also am setting a different default_files_patterns now based on the disableMDXEntries setting, which should yield fewer individual pattern globs.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks!

Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
It's time.

The storiesOf-API has been around since forever, but it's major problem has always been the fact that defining stories using it needed the code to run in order for storybook to determine which stories to show in the sidebar, which creates a bi-directional dependence between manager & preview.

We've created CSF as a replacement for defining stories in/with. This has seen a few iteration/improvements/enhancements.

CSF is statically analyzable/extractable; which causes storybook to extract stories much much faster in NodeJS as it starts-up.
The other benefit is storybook can also lazy load stories as they are navigated to.

In Storybook 6.x we introduced storyStoreV7 as a feature-flag, which users could/would opt-in to to get much faster start-times, at the cost of it not supporting the storiesOf-API.
In Storybook 7.0 this feature-flag was inverted to be true by default.
And now in Storybook 8.0 we're removing the storiesOf-API entirely.

One of the remaining use-cases for storiesOf has been dynamically generating stories.

In Storybook 7 we've introduced an indexer API which solves this problem, in a different way.
In Storybook 8 that API has matured and been iterated upon. I won't go into details here.

So this is the end of the road for storiesOf.

Notes
This PR does not yet remove storyStoreV7 feature flag (yet). It does make that flag effectively broken by design.

I figured we could take the task of removing storyStoreV6 support step by step, starting with this (the most public) one.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
TBD

Documentation
!!! TODO !!!

Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>

",Merged
"What I did
The recently introduced --test flag currently doesn't toggle much functionality.

This introduces the first change in functionality based on this flag:

When the flag is true an build.test.emptyBlocks becomes true (by default, can be switched back to false in main.ts).
This causes the preview builders to globalize @storybook/blocks.
The effect of that is that the builder can skip those imports, thus making the bundle-process faster and the generated storybook-static's size smaller.
It will cause actual usage of @storybook/blocks to instantly fail.
The idea is that --test will gain more feature flags like these that eliminate docs completely.
This is just 1 small step in that direction.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
Create a sandbox
Run sb build --test in the sandbox
Check if @storybook/blocks exists/is globalized
Do the above for both a webpack based and vite based sandbox.

Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
before:

done

> nx run @storybook/svelte-webpack5:prep --reset --optimized  [remote cache]

done

> nx run @storybook/html-webpack5:prep --reset --optimized  [remote cache]

done

> nx run @storybook/preact-vite:prep --reset --optimized  [remote cache]

done

> nx run @storybook/web-components-webpack5:prep --reset --optimized  [remote cache]

done

> nx run @storybook/react:prep --reset --optimized  [remote cache]

done
after:



> nx run @storybook/addon-essentials:prep --reset --optimized


> nx run @storybook/core-server:prep --reset --optimized


> nx run @storybook/preset-server-webpack:prep --reset --optimized


> nx run @storybook/web-components-vite:prep --reset --optimized


> nx run @storybook/vue-vite:prep --reset --optimized


> nx run @storybook/cli:prep --reset --optimized


> nx run @storybook/html-vite:prep --reset --optimized


> nx run @storybook/vue3-vite:prep --reset --optimized


> nx run @storybook/server-webpack5:prep --reset --optimized


> nx run @storybook/angular:prep --reset --optimized
It's just a little less scrolling to find the issue in CI logs

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
clear node_modules/.cache inside of ./code
run CI=true nr task compile -s install --no-link --debug 
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
When doing research how to optimize storybook compile time (sb build), @kasperpeulen discovered that we add docs related preview code even if addon docs isn't used.

This PR splits the injected code into 2 parts and ensures the docs related part is only injected when addon docs is active.

I renamed the config.ts (old naming scheme) file to entry-preview.ts and entry-docs.ts.
At first I had preview.ts and preview-docs.ts, but I found it hard to distinguish between entries by addons that were also called preview.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
Create a sandbox using vite
Remove addon docs.
remove .mdx extension for stories
remove addon-essentials (and optionally addon-docs too)
remove docs options (usually configured like: autodocs: 'tag')
remove any renderer (copied) specific stories
add rollup-plugin-visualizer in main.ts:
 import { defineConfig } from 'vite';
 import react from '@vitejs/plugin-react';

 import { visualizer } from 'rollup-plugin-visualizer';

 export default defineConfig({
   plugins: [
     react(),
     visualizer({
       template: 'sunburst', // or sunburst
       open: true,
       gzipSize: true,
       brotliSize: true,
       filename: 'analyse.html', // will be saved in project's root
     }),
   ],
 });
Inspect the opened webpage detailing the bundle stats.
There should be no docs related code there. specifically the entry called ""entry-docs"" should NOT be there.
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
Remove the code we said we'd remove in 8.0

All these packages have been shims since 7.x

Users have been getting deprecation warnings when they use these packages.

It is time we deleted and stopped publishing them.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks!

Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>

",Merged
"What I did
I noticed the bench CI task sometimes fails with a error:
Cannot read properties of null (reading 'page')
I found the problem: in some cases the iframe isn't rendered yet by the manager, at all. When the iframe element is missing, the bench script fails with the error above
I added a waitForFunction that ensures the iframe is there, and it's DOM is ready for manipulation.
Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
Not needed, the bench CI task should pass.

Though if you want to test this locally, this is what I did:

run: yarn task --task bench --template nextjs/default-ts
you can edit this line:
storybook/scripts/bench/browse.ts

Line 107 in ead37ab

 const browser = await chromium.launch({ headless: true }); 
to make the browser open on your local machine, that way you can see what it's doing, though this diesn't help debugging the above issue, it might give you more confidence in that the output is actually created based on the browser doing things.
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Closes #24292

What I did
fix bug where the preview story selection is ignored, when the id in the URL is incomplete
add a e2e test
Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
I tested this manually by

create a sandbox
run the sandbox & open
navigate to a story
remove the part of the storyId in the URL (--primary)
refresh with the new URL
expect the URl to get updated, to navigate to the first story.
It's normal to have it navigate to the auto-docs page, if that's the first item.

Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Closes #23787

What I did
The useAddonState hook allows for a setter function.
This setter function takes the existing value, and returns a new value.
However due to a race condition due to the way we set the default state (without an sync re-render) this default state can be set in the state too late.

By globalizing the addonCache and retreiving the value form the cache instead of state when api.getAddonState is called we ensure the correct value is always set.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
The issue here: #23787
... has a repro to reproduce the issue with.

create a repro out of the download (follow some extra steps)
build storybook in the monorepo
copy code/ui/manager/dist to the node_modules/@storybook/manager/dist directory
run the storybook in the repro
expect that the storybook functions correctly

click the primary button manually
refresh the page
do it again
open the interactions tab
press the button manually
refresh the page
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Closes https://linear.app/chromaui/issue/AP-3683/possible-to-filter-out-all-stories-with-no-way-to-disable

What I did
I've experimented with keeping the originally passed index/data from refs around in state, so that calling setRef with the previous data will cause it to re-run the filters

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
I ran the following manual test:

Add this to .storybook/main.ts:

  refs: {
    '@manager': {
      title: 'Angular',
      url: 'https://6322ce6af69825592bbb28fc-ltmgncxxqv.chromatic.com',
    },
  },
Then make a UI change.

Add the '@chromaui/addon-visual-tests'-addon.

Now make a UI change.

Now run a build.

And click on the filter button in the bottom left.

Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
I found out that when running the local registry the workspace:* version ranges were present inside the package.json files by the local registry.

They should be replaced by running yarn pack.

I found that yarn pack is working as advertised, but there's a bug in the npm CLI: npm/cli#4533.
This bug causes the tarball CLI parameter to get ignored.

@JReinhold and me figured out that the way around the npm bug is to generate the tarball to a different directory and publish from there.

We hypothesise the npm bug somehow only occurs when npm can find a package.json with the same name upwards.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
run yarn task publish -s install --no-link
open into the .verdaccio-cache/@storybook/addon-a11y/package.json
assert that there are no packages with version range ""workspace:*""
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Closes #23217

What I did
I added a require.resolve, which should cause the issue to no longer happen.

When manually testing I found that it was also failing to load @storybook/global.
So I found a solution for that too.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
run yarn task --task run-registry --no-link
wait for it to have the local registry running successfully
unzip the repro
navigate to the unzipped directory
change the pnpm config to use the local registry by making a change to the .npmrc-file:
+ registry=http://localhost:6001/
prune the pnpm store cache (pnpm store prune)
remove node_modules (there are also 2 in the packages)
run the install (pnpm install)
navigate to the ./packages/storybook directory
Run yarn build
Expect it to work.
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below:
🦋 Canary release
This pull request has been released as version 0.0.0-pr-23941-sha-8f1ed079. Install it by pinning all your Storybook dependencies to that version.

More information",Merged
"What I did
When implementing filtering I forgot about the effect this would have on keyboard navigation.

I had left the index in state untouched, which would cause navigating via keyboard shortcuts to be incorrect.

I've moved the logic for filtering into the state manager (manager-api).
The index kept in state is now filtered before reaching the sidebar.

The interface for FilterFunctions changed slightly.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
Set the ui/.storybook/manager.tsx code to this:

import React from 'react';
import { addons, types } from '@storybook/manager-api';
import startCase from 'lodash/startCase.js';

addons.register('XYYYZZ', (api) => {
  addons.add('XYYYZZ/panel', {
    type: types.TOOL,
    title: 'TEST',
    match: ({ viewMode }) => true,

    render: () => (
      <div>
        <button type=""button"" onClick={() => api.experimental_setFilter('manager', () => true)}>
          TEST
        </button>
      </div>
    ),
  });
});
addons.setConfig({
  sidebar: {
    renderLabel: ({ name, type }) => (type === 'story' ? name : startCase(name)),
    filters: {
      manager: ({ title }) => title.includes('core'),
    },
  },
});
And start the UI storybook.

Expect the sidebar to be filtered when storybook opens.
Only stories that have the word core in them (anywhere in the path) should be visisble.

Use the keyboard shurtcuts to navigate between stories & components.

Now click the ""TEST"" button in the toolbar.

Expect the sidebar to now display all items (though collepsed)

Use the keyboard shurtcuts to navigate between stories & components.

Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Checklist for Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts

 Make sure this PR contains one of the labels below:

Available labels
🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Telescoped off: #23802

What I did
I introduced a new manager API!
It's marked as experimental for now.

The purpose is to allow users and addon-creators to inject (dynamically at runtime) filter functions that filter the list of stories in the sidebar. I know this has been a feature that has been requested many times for a varied use-cases.

I've implemented the actual filtering in the sidebar, but this code will likely need optimization.
And with this optimization there will be assumptions in when the filters are re-evaluated.

A FilterFunction receives an (with status extended) IndexHash_Item and returns a boolean.
Storybook will only ask to filter leaf-items (story and docs).
Storybook will filter out empty components/groups/roots for you.

How to test
This API can be used via from manager.ts:

import { addons } from '@storybook/manager-api';
import startCase from 'lodash/startCase.js';

addons.setConfig({
  sidebar: {
    filters: {
      a: (item) => item.depth === 2,
    },
  },
});
The expected result is that the sidebar stories are filtered.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did
I noticed that ui/components and lib/manager-api have -rightfully- a peerDependency on react.

Those packages are imported into the webpack builder causing it to also depend on react (via a peerDependency)

That causes the webpack frameworks to all depend on react (via a peerDependency).

The reason why the ui/components and lib/manager-api are used in the webpack builder is unclear:
It's likely a left-over from the olden days when the builder was used for both, and it was just always left in place in some form... never re-evaluated properly.

I left the code in place to add aliases, though I think this code should be removed.
By removing the dependencies the require.resolve used to add the alias will likely start failing in some sitations.
I wrapped it with a try-catch, so if the resolve fails, the alias is not added.

I suspect the alias might only be useful for us internally, not for outside users.

The only need you'd ever have to ensure a single version of the packages (which is what aliases are used for here) would be for addon-docs.
Addon docs should add these aliases if they are needed for some reason IMHO. Addon-docs already has a react dep, so there it would be fine.

How to test
Webpack based sandboxes should continue to work, including docs pages and MDX pages.

Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"What I did
I introduce a new bundle script specific for addons.
their preview.ts and manager.ts entrypoints never need to have types generated for them, not generating them saves install-size and compile/publish-time
their manager.ts file should be prebundled. References to manager-related storybook packages and react will be globalized/externalized by the builder-manager.. So why not do this before publishing.
their preview.ts file should be prebundled. References to preview-related storybook packages will be globalized by the builder.. So why not do this before publishing?
their preset.ts should be compiled for node16 only, and does not need types generated.
their other entrypoints should be compiled for both the browser and node16, and should have types generated, because these are often for public use, such as importing decorators.
I migrate all core addons to use this new pattern
I removed react & react-dom peerDependencies as much as possible.
addons that depend on react because of manager.ts injecting custom Panels and such do not need the dependency anymore, this is solved via the new bundle script for addons!
addons that depend on react for decorators will need a peerDependency on react. This makes the addon react specific, though a notable exception here is addon-links. It has a react dep for the LinkTo component, that is it's own export... I've made this have an optional peerDependency on react for now. Such addons ARE NOT ALLOWED IN ESSENTIALS!
builder-webpack5 needs react because it added aliases for some manager-packages. I removed this here: WebpackBuilder: Remove need for react as peerDependency #23496
To be determined
react in the preview

TBD: addon's preview.ts file might have a dependency to react, I could possibly prebundle this as well, and maybe globalized/externalized react for the preview?
TBD: should I try to externalize/globalize react, and possibly be able to prebundle most if not all of addon-docs? I could make a prebundled version of react and inject it into the preview, so the global variable is available. If the user isn't using react themselves, I could use the version storybook shipped with, if the user does use react themselves, I'd quickly prebundle their version of react, and inject that...
react in manager deps

manager-api needs react because it exposes components and hooks. This package ends up being embedded into managerpackage, in which react is prebundled. I've spiked moving the code into manager: Refactor: Move code of lib/manager-api into ui/manager #23389. That PR doesn't actually change the fact the package is depending on react. Users of this package (addon-authors) will want to get proper types, which include react-types! Embedding those in might actually be the correct move, because that would ensure users will be told if they tried to do things our version of react embedded into the manager can't do...
router needs react because it's embedding react-router. This package is only used in the manager, so whatever I end up doing to manager-api I'll likely do here as well. I'm not sure this packages has any real-world use anymore TBH, could be merged into manager-api?
theming needs react because it's embedding emotion-react. This package is used in the manager, but has seen other uses as well. globalizing react in it's dist seems not possible to me because of it.
TBD: How to cope with manager-api, router and theming packages depending on react.

I am considering making these dependencies normal dependencies instead of peerDependencies.
I am considering making them optional peerDependencies via peerDependenciesMeta
I am considering (possibly in addition to one of the above 2) to create another bundle script for these packages specifically to create a browser extra export. I'm not sure what the point of that would truly be.
Consider moving manager-api's and or router's implementations into the manager package.
TBD: How to cope with blocks and components packages depending on react.

I'm considering making them have optional peerDependencies on react
components also has a dependency on react-dom.
TBD: Do we want to remove addon-docs from sb init?

TBD: Do I remove the addon-links LinkTo component? ? move it somewhere else to make addon-links not depend on react anymore? Do I externalize react in the preview?

TBD: the package types needs react, mostly for manager-api stuff. It's externalized it seems right now, without any dependency defined.. this is possibly problematic, but considering it's just types, and the recommendation is skipLibCheck this might be ok??

Perhaps these types actually belong in manager-api?
How to test
TBD",Merged
"hyper experimental: move the actual code into ui/manager but keep lib/manager-api a real package with types.

Long term strategy: move all code into a single package.

This has upside of making building manager-api unnecessary during storybookmaintenance.
the downside is that building manager is slower.

But it's a step into the right direction, I think.

Importantly this does not mean manager-api gets deprecated as a package.
It's still a package users depend on and use.

What's novel about this approach is that it doesn't need a builder to globalize manager-api! It's builder independent, because the package itself gets the implementation from the global scope.

This has a big downside:
It will only work within the browser, and only when the prebundles code is pre-injected.
You can see the effects of this in some of the tests I had to adjust.

So this is a proof of concept of the idea that we could make packages be externalised without needing to set this up in builders.",Merged
"This targets release/7.2 to not disrupt the 7.1 release.

What I did
improve the Tabs component to have better types
the title can be a FC now
improve the Addon interface to accept the FC as title as well
split the Addon interface into Addon_BaseType for future use
How to test
build should succeed
yarn check should pass
no UI changes detected by chromatic (except for new stories)
there should be no perf changes in anything related to tabs or addons
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 If this PR should be tested against many or all sandboxes,
make sure to add the ci:merged or ci:daily GH label to it.
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Merged
"some volar update caused vue to start vomitting ts-errors

It seems that when a file file filename Button.vue is used, it will define a component button.
I'm not sure of this is a bug or a feature.

But if Button.vue uses <button> (which would obviously refer to HTMLButtonElement), volar gets ""confused"" and assumes thus button is the button being defined.

But of course the API (props, events) of those 2 are different, thus it complains.

I renamed Button.vue to MyButton.vue, this fixes it.

I'm not really happy with this though.

",Merged
"This is a proposal/implementation of a new (manager) API for storybook.

This adds the ability to assign a status to stories. Multiple statusses to be exact.
This status information can then be used in the sidebar, or addons.

The API allows addons to call: api.setStatus({}).
You can see tests in this PR for more in-depth examples.

I am considering adding for information, it would be nice if there was also a displayname, perhaps and some additional information the addon could except for just the raw ""statuc"" (which is a enum in this proposal).

Feedback is welcome.

Use-cases for this API:

The a11y addon could use this addon to set which stories have passed the check, and which ones need attention.
The coverage addon can highlight which stories fall below the coverage threshold.

The plan is that long-term there will be a ""run report/testrunner over all my stories"" within storybook itself.
Setting a status will be a key way to store information about individual stories from addons, that then can be consumed everywhere.",Merged
"Closes #20091

What I did
I've added an automigration that adds GFM support to addon-docs via adding an addon
I've created the addon that adds GFM config

The addon is a tool to assist users migrate, it's not supposed to be used indefinitely.

The reaosn we did it this way, is because it made writing the auto-migration much much much easier. User will have to do a manual step, but it should get them into a working state

How to test
After running the automigration you should get an extra addon in your addon array
You should also heb the addon added to your package.json
Your storybook should now support GFM without having to configure addon-docs.

There should be a deprecation notice in the command-loine telling you (once again) that you should perform the manual migration.",Merged
"Closes #21004

What I did
I took a deeper look at the code, and it seemed like the reason it worked on my local machine is because our code that adds the preset, just takes thge latest version. When running verdaccio, the latest version IS the only version that's published..

But of course on the real npm there, the beta gets published as a beta, and thus isn't ""latest"".

I changed our code in the CLI so it takes the version from the versions file.

",Merged
"Closes we likely have an issue for this?

When you init a storybook on a system with dark-mode enabled. The demo components will be presented on a dark background. This is OK for the primary button component, but everything else just doesn't show well on a dark background.

We could make these demo components all respond to the system preference, but these components are throw away for the user, they are just there to not start with an completely empty storybook.

So here's an easy work-around: we set the default background to light, as this is how these demo components are intended to be shown on.

In addition this instructs to user how to leverage backgrounds.

What I did
Add a backgrounds paramater to the preview.*-file generated by sb init.
This parameter sets the background to light, because that's what our demo components need to be shown proper.
This also acts as a learning instrument, so users know this backgrounds feature exists, and makes it easier for them to customize.

How to test
Ensure your system preferences are in dark-mode
Run a sandbox for template, e.g. yarn task --task sandbox --start-from auto --template react-vite/default-ts
Open Storybook in your browser
Look at the Page story, this should now have a light background, and the background toolbar should be active immediatly.",Merged
"Resolve: #20828
Resolve: #16278

What I did
I add a few font files
I add these files to be hosted / copied by storybook via a preset config
I add references to these font files in the manager builder's template
How to test
start a storybook in dev-mode
open the browser
expect the network tab to show you the browser loading 2 font files in the manager, followed by a css file.
expect the font defined in that css files to be used in the manager
repeat the above steps but for a build storybook. (you can use a chromatic deployed storybook for this)",Merged
"Refactor the preview packages

Introduces a new package called preview-api which should be the only package the user would ever want to import in any code that runs on the preview side.

This replaces the need to ever import from @storbook/addons, @storybook/preview-web, @storybook/client-api,@storybook/store,@storybook/core-client.

All these packages are unified under this 1 package.

Likely these packages listed will be removed at some point in the future, simplifying maintenance & future development. It also means users will have an easier time importing the right api from the right place.

I've updated all our code to use the new package.

This should all be backwards compatible, if a user were to still import @storybook/client-api for example they'd see a deprecation warning in the console of their browser, but everything should work.

Some of the code of these packages has actually moved, that includes these 4 packages: client-api, core-client, preview-web and store. Other packages still have their code in the original place, and the preview-api package simply re-exports some or all exports from the original.

The intent is to move all code for the preview into this package when it's not shared anywhere else (runs in the preview only). I decided to make this PR with 4 packages moved, to show it's possible, demonstrate backwards compatibility, and get approval from the other maintainers / rest of the team.

An important step I'm still keen on making is is to split @storybook/addons into 2 packages, 1 for the preview (code should be moved to @storybook/preview-api and the other part for code that runs in the manager (mostly for registering addon panels/etc.) into the @storybook/api package... which I intent to rename to @storybook/manager-api.

Diagram of packages (note that manager-api is currently called api, and this is a proposed change not included in this PR)
Untitled Diagram drawio (7)

This is what prebundling really means:
Untitled Diagram drawio (9)

At the builder level we break the dependency graph into pieces. The are pieces that are stories, and there are pieces that is storybook's runtime code. By breaking the storybook runtime code away from the work that the builder has to do, we gain better performance, because there is less work for the builder to do. The user never has their builder compile storybook's code.

SO the package re-architecture (right now) looks like this:
Untitled Diagram drawio (6)
I've moved code of the 4 packages listed TO preview-api, and for backwards compatibility those packages re-export from preview-api.
@storybook/addons is currently doing something slightly different, because of it's dual use in both the preview and manager (which is a problem) that I will still do. Possibly as part of this PR.",Merged
"cleanup up version of #19678

Split the work required to get the preview to run into steps, where we can do some of the work ahead of time, so the user's builder has to do less work.

The way we slit the work is by taking a bunch of packages and pre-bundle them together, into a single module.

At the builder stage, we then swap packages to shims. These shims exports everything that the package is supposed to export, but it does so by de-structuring it off the global namespace.

This causes the builder to have to do less work, because the dependency graph is more shallow.
",Merged
"I'm afraid this isn't going to be easy to review..

The problem:

We have many duplicated types in our codebase
Users have difficulty getting the types they are lookin for, it's generally confusing.
Our types are sometimes incorrect (because of duplication)
It's hard to ensure the same interface is used across packages
The solution:

Move types scattered in the codebase to a single place
Create a new package where all types are exported from
The procedure:

Rename types from existing places so they are name-spaced
Move the types into the new package 1-by-1
Fixing issues at points of usage every time we do the above
Remove re-exported types where this happens
Removed types exports from packages that had their types moved
This leaves this PR with all sorts of duplicated types that are name-spaced based on where they came from.
But they are all located in the same place/package.

The next obvious step is to truly de-duplicate the types.
But this will open many many instances where types that looked duplicated vary slightly, but significant enough to cause types conflicts.
Resolving those conflicts is going to be painful but necessary.

But who will do that work and when?
I currently do not yet know the answer.

This IS already a breaking change, mainly because of:

Removed types exports from packages that had their types moved
Rename types from existing places so they are name-spaced
Could I make this backwards compatible? Yes.
Do I think we should? No.

When we start cleaning up, de-duplicate types.. will that result in breaking changes again? Yes.
And this is where I think we might need to balance things out.
I doubt we'll have completed all that work before 7.0 release. So we'll likely have to start deprecating certain types over the course of 7.0's life-time?

",Merged
"Issue:
So when a user has local addons, which are injecting a managerEntry, those are bundled by esbuild.
ESbuild should bundle JSX the way it's expected in the manager (which as of now is using react 16.

What I did
Add config to esbuild to ensure react runtime for addons is always as expected by the manager

I also removed the filter that removed the react internals exports..
We should not be using them, but it seems removing them breaks some things as well..

How to test
should work with non-local addons with managerEntries
should work with local addons with managerEntries
",Merged
"The addons did not appear in the same order as before, meaning the order in which they are defined in the user's main.ts.

I discovered the reason why:
When I have esbuild write to the file-system, and then read the file-system... The order in which I get them when I read isn't the same as when I wrote.

I changed the behavior to have esbuild NOT write the files to the file-system, when doing so the return value of esbuild contains a outputFiles property. (it does not contain this property when you configure it to write files).

This array of files is in the proper order and contains the correct path.

",Merged
"@tmeasday this kinda replaces your PR: #18025

It does not preserve the import(), but that's because there's no way to make that work with TypeScript AFAICS.

This adds an esbuild-register as soon as it's needed, but only once; this mutates the require method in Node to run code through esbuild (which does support TypeScript and other stuff.

I need to experiment more, but this also seems much faster!

@shilman the removes the interpreter ""nonsense"", too..

",Merged
"What I did
after discussion on #18432

I ensured types flow from:
core-common ➔ core-webpack ➔ preset-react-webpack ➔ react-webpack5
And did this for all presets and frameworks.
At each level customizations are made to make types more strict
Added a framework.options.builder field, which is equal to core.builder.options
This way users of a framework don't have to specify a builder if they want to configure something in the framework
DEMO:

 Screen.Recording.2022-06-17.at.16.39.21.mov 
I also changed all the main.JS files of all examples into a main.TS file and ensured it uses the type from the framework is for.

I removed the 6-0 and 7-0 types in renderers.

I changed all stories and example code to deal with the change in 7.0 where what used to be Story is now StoryFn

I reorganized the renderers and frameworks to be simpler, and more in sync with each other. (there's still some work to do here actually.
To be precise, it seems the types for react are way, WAY better.",Merged
"So in order for pnp to work, we need to ensure all dependencies exist in the context they are required in.
This achieves that by using require.resolve.

The way i achieve the above is by generating the proper code into main.js.
This is ugly, but right now I just want to ensure it actually works in pnp mode.

If it does, I plan to either:

only do this when pnp mode is active
OR load presets (includes main.js) via some sort of interpreter/loader and modify the code before executing.",Merged
"When setting up storybook we try to detect your version of webpack.
We ask the package manager for which version of webpack exists.

In NextJS the webpack dependency isn't managed through the package manager, so the package manager doesn't know.

So I added a check for the version of next itself, if it's version 11 or higher, we start using webpack5.

This can of course be overruled by the user.

",Merged
"Issue:
I discovered that when a ref is defined (could be an auto-ref) which requires authentication; storybook will (server-side) check to see if it's a public storybook.

It checks this because public storybook do not need authentication headers to be sent (which require more server/cors-setup).

The idea is that if NodeJS can make a request to the iframe.html resource and get a statusCode 200 that means the storybook can be referenced without authentication headers at runtime in the web-app.

So what happened?
The node side of storybook makes a request to the iframe.html and the service returns a HTML page with a login form; with statusCode 200.
Arguably the service should return a non-200 statusCode, but it doesn't..

What I did
I added an additional check to re-request the resource with an accept-header, and check the absence of a loginUrl field on the JSON response.

If the response is not valid JSON this additional check is ignored, and the previously behavior is preserved.

How to test
 Add a ref to an example that requires the user to authenticate
 Test if the composed storybook is loaded correctly
 Test if the authentication flow works.",Merged
"What I did
Optimizations:

When you hover over a story in the sidebar we could sent a message to the preview the user is likely to go to that story.
When a user navigates to a story using the keyboard shortcuts we could sent a message to the preview the user is likely to go to that story.
",Merged
"What I did
When using lazy-compilation, loading a story can take a bit of time, this tries to optimize that experience a bit, by guessing which story you'll visit next, and sending a command to the preview to preload the related stories ahead of time.",Merged
"What I did
I removed prettier from addon-docs.
Instead, addons-docs sets a format

This format is now accepted by the syntax-highlighter which is using prettier with the given format
It also still supports a boolean value too.

The effect of this change is that:
A: the syntax-hightlighter can be used with more formatting options
B: prettier will now be bundled into lib/components, and not be a dependency users need to install..

How to test
 open to source sections in addon-docs in react, vue & angular",Merged
"Issue: #15920

What I did
I changed the way of hiding frames from using css visibility property, to using display: none|block

This is relevant for refs / composition.

The problem was that visibility:hidden is sometimes used by click-jacking attempt, and thus safari protects the user by ignoring the css, when the frames are cross-origin.

By changing the use to display:none, the element is no longer a click-target.

How to test
 Is this testable with Jest or Chromatic screenshots?
 Does this need a new example in the kitchen sink apps?
 Does this need an update to the documentation?",Merged
"this replaces: #17480

What I did
I added a prepare-localize script which when used:

bundles the package
localizes all devDependencies into dist/local_modules
In order to do this, it needs to modify references to what would previously resolve in node_modules using the node resolver.
The localizer replaces imports, exports require and require.resolve statement so that they point to local files instead.

For example a reference to import x from 'foo' becomes import x from '../local_modules/foo'
The path where to find local_modules (generated into dist will depend on the file making the request, this is accounted for.

The main purpose of this is to be able to use dependencies without users of storybook being confronted with installing them, getting them in their lock-files etc.
This eliminates the possibility of a version conflict, and hoisting issues, because we are side-stepping NPM all-together.",Merged
"What I did Disabled ""Critical dependency require"" warning in Webpack5-based projects, since webpack does seem to have a problem with dynamic requires, which are just handled fine in Storybook. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Generate Next.js sandbox Start Storybook The ""Critical Dependency"" warning shouldn't appear Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-24782-sha-bb0e7d7c. Install it by pinning all your Storybook dependencies to that version.",Merged
"What I did This pull request introduces updates to the INITIAL_VIEWPORTS configuration in Storybook. The aim of these changes is to ensure that the Storybook environment stays current with the devices used for UI display, which are relevant in the current industry standards. The updated INITIAL_VIEWPORTS configuration now includes the following devices: iPad Pro 11-in iPhone 14 Pro Max iPhone 14 Pro iPhone 14 iPhone 13 Pro Max iPhone 13 Pro iPhone 13 iPhone SE 3rd generation These additions to the INITIAL_VIEWPORTS configuration are essential for maintaining alignment with current industry standards. They ensure that stakeholders have a clear understanding of the devices utilized for showcasing user interfaces within Storybook. before after https://github.com/storybookjs/storybook/assets/57059705/9ed4f961-353b-4b77-a051-efe550cdecc1 https://github.com/storybookjs/storybook/assets/57059705/12be530b-642c-4a80-8e15-7ee0ae132dbd Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Ran sandbox locally and verified all the added devices are working as expected. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Briefly document the new split bundling strategy for addons. Any feedback on wording is welcome. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Move @chromaui/addon-visual-tests to the code directory as a devDependency. Upgrade @chromaui/addon-visual-tests to the latest version. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Support styles, which are configured as an object Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Clone https://stackblitz.com/edit/github-e8jowf-rywx3a?file=angular.json Build @storybook/angular and replace node_modules/@storybook/angular/dist with build output Verify, that the button should be pink (--button-background-color: #ff02b3;) Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did In Webpack5-based projects, the babel-plugin-react-docgen plugin is used to generate types for Javascript and Typescript components. In the future, the Webpack5 builder will not only support Babel, but another compiler like SWC. Therefore, we have to change the implementation of this transformation for being compiler agnostic. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a Webpack5-based sandbox Go to .storybook/main.ts and change set { typescript: { react-docgen: ""react-docgen"" }} Controls are properly generated in Storybook Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Removed babel-plugin-named-exports-order and added a new export-order-loader to @storybook/builder-webpack5 to make the AST transformation compiler independent Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a Webpack5-based sandbox Open a Story Analyze the compiled code of the Story. It should export a __namedExportsOrder field with the preserved Story order Bildschirmfoto 2023-11-07 um 14 57 47 (The variable is also exported, but not visible on the screenshot) Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Small update to fix the button size for strings on controls. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did added the assert dependency to doc tools this is needed for this code here in doctrine https://github.com/eslint/doctrine/blob/0e8eba7f80b89cc8185541dda4e90c961d1d3553/lib/utility.js#L32 was causing an error in react native storybook 7 alpha unless the user manually adds the assert dependency. image Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did I changed the style to Brand Img Component. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fix a typo in button-story-auto-docs.ts.mdx. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did With this pull request, the examples used for the Design addons referenced in the Design integrations page were updated to remove the no longer existing import decorator to allow the addon to function as mentioned here. What was done: Updated the snippets to align with the addon's usage & documentation Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Remove all uses of the aside class in docs and replaced then with a new Callout component Checklist for Contributors Manual testing Load up documentation locally with the Frontpage repo to check changes to docs Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did We are improving the way the sidebar looks, giving stories more space and a clearer way to search. Replace arrows with chevrons for each expandable items. Each line is now 28px height. Better alignments vertically between every elements of the sidebar. 12px padding on each side allowing space for scrollbar and drag handle. Move clear history into a trash icon next to the title. Move the ""Go back to components"" to a clear icon on the search input field. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Disable telemetry for test builds Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Add a template for help requests to the repo. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing N/A Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Set ""type"": ""module"" in scripts/package.json Replaced ts-node in scripts by esbuild toolchain Removed workaround for loading pure esm modules (e.g. execa) Typescriptified scripts/check-package.js Replaced require.main === module expression by esm equivalent Set up scripts/jest.config.cjs to tell Jest how to properly run tests in esm environment Removed shebangs, since they are not respected in a Windows environment Adjust scripts/tsconfig.json to tell Typescript, that we are using ESM, but a bundler (moduleResolution setting) is used in the end. With that, we are not forced to use extensions for relative imports. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-24698-sha-758c0de1. Install it by pinning all your Storybook dependencies to that version.",Merged
What I did Fix check for .stories.mdx Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing See issue description. 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>,Merged
"What I did I added another flag based on the --test flag. This one will cause addons to not be loaded. I also added a flag to remove the .mdx stories-entries I also added a flag to disable autodocs-entries from being created by the indexer. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Add readme for @storybook/test Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did This PR is a retry of #23486 with many non-essential things ignored. The main purpose of this PR is to minimize the amount of peer dependencies in addons and a few of the core packages, most notably removing react as a peer dependency. The way the manager and the preview globalizes a fixed set of dependencies means that these packages don't strictly need the dependencies, as they will be referenced from the global window instead, which our builders ensures. Removing them from peer dependencies mean that users don't need to specify them either. Having them as devDependencies will however make our (tsup) bundler default to bundle them in, which we don't want. Therefore this PR also introduces a new bundler configuration, addon-bundle that makes sure that the globalized packages are externalized (thus the imports are kept intact), so they can be replaced with the global reference when built. A handful of packages like manager-api are not using addon-bundle but still need these packages externalized, so they've been added to their bundler configuration manually to ensure that happens. addon-essentials and addon-docs are largely left out of this PR, as tackling them in terms of react requires more work. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing It's important to test this in the different package manager configuration, npm, yarn, yarn pnp and pnpm and with both builders. For each configuration and builder: Create a new non-React sandbox outside of the monorepo (npx sb@next sandbox) Replace all versions with this PR's canary version. Testing addon-essentials with docs Run storybook and build-storybook and see that it works Testing addon-docs directly Replace addon-essentials with addon-docs both in main.ts and package.json Run storybook and build-storybook and see that it works Testing addon-essentials with docs disabled Remove the mdx glob from stories in main.ts Replace addon-docs with addon-essentails both in main.ts and package.json again Remove react and react-dom from package.json. You will see an unmet peer deps from addon-essentials, that's okay. disable docs in main.ts with { name: '@storybook/addon-essential', options: { docs: false } } Run storybook and build-storybook and see that it works, now without React Testing without addon-essentials and addon-docs Remove addon-docs with addon-essentails both from main.ts and package.json again Run storybook and build-storybook and see that it works Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-24676-sha-214a6f84. Install it by pinning all your Storybook dependencies to that version.",Merged
"What I did Updated browserify-sign transitive dependency to accommodate a vulnerability: https://security.snyk.io/vuln/SNYK-JS-BROWSERIFYSIGN-6037026 Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Remove lerna as a dependency since it is not needed anymore. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Update nx to v17 to accommodate the vulnerability in semver: https://security.snyk.io/vuln/SNYK-JS-SEMVER-3247795 Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels",Merged
"What I did Updated @babel/traverse and @babel/core to fix vulnerability: https://security.snyk.io/vuln/SNYK-JS-BABELTRAVERSE-5962462 Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did If user default browser is Chrome or Chromium, then cli will use better-opn to open browser, but this command may facing error and not been captured, then it will block the whole start process. Solution: add await to betterOpn in order to catch error in betterOpn, otherwise it will be a unhandled promise error. Add await to betterOpn to catch unhandled promise error. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing No test cases created for open-in-browser.ts file. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did It's time. The storiesOf-API has been around since forever, but it's major problem has always been the fact that defining stories using it needed the code to run in order for storybook to determine which stories to show in the sidebar, which creates a bi-directional dependence between manager & preview. We've created CSF as a replacement for defining stories in/with. This has seen a few iteration/improvements/enhancements. CSF is statically analyzable/extractable; which causes storybook to extract stories much much faster in NodeJS as it starts-up. The other benefit is storybook can also lazy load stories as they are navigated to. In Storybook 6.x we introduced storyStoreV7 as a feature-flag, which users could/would opt-in to to get much faster start-times, at the cost of it not supporting the storiesOf-API. In Storybook 7.0 this feature-flag was inverted to be true by default. And now in Storybook 8.0 we're removing the storiesOf-API entirely. One of the remaining use-cases for storiesOf has been dynamically generating stories. In Storybook 7 we've introduced an indexer API which solves this problem, in a different way. In Storybook 8 that API has matured and been iterated upon. I won't go into details here. So this is the end of the road for storiesOf. Notes This PR does not yet remove storyStoreV7 feature flag (yet). It does make that flag effectively broken by design. I figured we could take the task of removing storyStoreV6 support step by step, starting with this (the most public) one. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing TBD Documentation !!! TODO !!! Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did I removed the sb extract CLI command. It used puppeteer, and we want to get rid of that dependency to make storybook lighter to install. This PR removes puppeteer from our codebase. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing No manual testing needed Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did https://storybook.js.org/docs/web-components/configure/sidebar-and-urls#story-indexers has a link that currently points to https://storybook.js.org/docs/web-components/configure/main-config-indexers, which results in a 404. This fixes those links. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fixed the missing forwarding of ref property to next/image's Image component Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a Next.js sandbox (nextjs-default-js) Open Storybook in your browser Access story/frameworks-nextjs-image--with-ref Story. The Alt attribute of image: should be set to Accessibility Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did before: done > nx run @storybook/svelte-webpack5:prep --reset --optimized  [remote cache] done > nx run @storybook/html-webpack5:prep --reset --optimized  [remote cache] done > nx run @storybook/preact-vite:prep --reset --optimized  [remote cache] done > nx run @storybook/web-components-webpack5:prep --reset --optimized  [remote cache] done > nx run @storybook/react:prep --reset --optimized  [remote cache] done after: > nx run @storybook/addon-essentials:prep --reset --optimized > nx run @storybook/core-server:prep --reset --optimized > nx run @storybook/preset-server-webpack:prep --reset --optimized > nx run @storybook/web-components-vite:prep --reset --optimized > nx run @storybook/vue-vite:prep --reset --optimized > nx run @storybook/cli:prep --reset --optimized > nx run @storybook/html-vite:prep --reset --optimized > nx run @storybook/vue3-vite:prep --reset --optimized > nx run @storybook/server-webpack5:prep --reset --optimized > nx run @storybook/angular:prep --reset --optimized It's just a little less scrolling to find the issue in CI logs Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing clear node_modules/.cache inside of ./code run CI=true nr task compile -s install --no-link --debug Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fix formatting Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did With this pull request, the test runner's documentation was updated to factor in the test runner's API hooks changes, as they're no longer experimental and potentially haven't been for quite some time. What was done: Updated docs and snippets @yannbf when you have a moment, can you take a pass at this and let me know of any feedback, specifically the usage of module.exports in the snippets? If you're ok with it we can update them to align with the rest of the documentation. Let me know, and we'll take it from there. Thanks in advance Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Minor tweak to the Publish Storybook documentation page to remove a irrelevant parenthesis that was floating around. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Added @storybook/addon-onboarding to list of non-core packages. Using sb upgrade would cause a warning to show like this, which was misleading: WARN Found 1 outdated packages (relative to '@storybook/addon-essentials@7.5.2') WARN Please make sure your packages are updated to ensure a consistent experience. WARN - @storybook/addon-onboarding@1.0.8 Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Between the times that I contribute usually months pass. So, as far as I can even remember, each time yarn start broke. I have added a hint on using git clean. This should prevent any such issues. Checklist for Contributors Manual testing No tests necessary. Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did When doing research how to optimize storybook compile time (sb build), @kasperpeulen discovered that we add docs related preview code even if addon docs isn't used. This PR splits the injected code into 2 parts and ensures the docs related part is only injected when addon docs is active. I renamed the config.ts (old naming scheme) file to entry-preview.ts and entry-docs.ts. At first I had preview.ts and preview-docs.ts, but I found it hard to distinguish between entries by addons that were also called preview. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Create a sandbox using vite Remove addon docs. remove .mdx extension for stories remove addon-essentials (and optionally addon-docs too) remove docs options (usually configured like: autodocs: 'tag') remove any renderer (copied) specific stories add rollup-plugin-visualizer in main.ts: import { defineConfig } from 'vite'; import react from '@vitejs/plugin-react'; import { visualizer } from 'rollup-plugin-visualizer'; export default defineConfig({ plugins: [ react(), visualizer({ template: 'sunburst', // or sunburst open: true, gzipSize: true, brotliSize: true, filename: 'analyse.html', // will be saved in project's root }), ], }); Inspect the opened webpage detailing the bundle stats. There should be no docs related code there. specifically the entry called ""entry-docs"" should NOT be there. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"What I did Fix ensure-next-ahead step in publish script for empty commits Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Merged
"Closes #23916

What I did
Adds a flag to publish to npm with provenance.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks!

On the next release, run the regular release workflow publish.yml
Check if the workflow passes
Check if the packages pages on npm show the provenance badge
(e.g. https://www.npmjs.com/package/next#provenance)
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD",Closed
"update ""Module Resolution Strategies"" to reflect how TS actually works Partially addresses microsoft/TypeScript#39555 (comment) cc @DanielRosenwasser and @orta, the more i look at the source code for this behavior the more it feels like this cannot be what is intended given our strong preference for node style resolution instead of classic. then again, I don't really know what went into writing that code. but it looks wrong at first glance, bc it appears to opt in all ES20XX targets into classic module resolution... which doesnt seem like what we want??",Closed
"Added a note to clarify the use of externals property in webpack config. I followed this guide as my first webpack tutorial then moved on to webpack docs to learn more and add more things to the webpack config. None of the other tutorials I saw had manually added any React libraries to index.html so I removed those 2 lines and struggled for about a week to realize the externals field added from this tutorial was the reason my site stopped working. I personally wouldn't recommend adding any externals to a beginner tutorial. Learning webpack is complex enough as it is. Something like externals should only be introduced in a ""Production/Deployment"" or ""Optimizations"" related page after a beginner has gone through the initial tutorial without hiccups. But if that has to be included in this beginner tutorial, the purpose of it should be made really clear.",Closed
"update ""Module Resolution Strategies"" to reflect how TS actually works Partially addresses microsoft/TypeScript#39555 (comment) cc @DanielRosenwasser and @orta, the more i look at the source code for this behavior the more it feels like this cannot be what is intended given our strong preference for node style resolution instead of classic. then again, I don't really know what went into writing that code. but it looks wrong at first glance, bc it appears to opt in all ES20XX targets into classic module resolution... which doesnt seem like what we want??",Closed
"Added a note to clarify the use of externals property in webpack config. I followed this guide as my first webpack tutorial then moved on to webpack docs to learn more and add more things to the webpack config. None of the other tutorials I saw had manually added any React libraries to index.html so I removed those 2 lines and struggled for about a week to realize the externals field added from this tutorial was the reason my site stopped working. I personally wouldn't recommend adding any externals to a beginner tutorial. Learning webpack is complex enough as it is. Something like externals should only be introduced in a ""Production/Deployment"" or ""Optimizations"" related page after a beginner has gone through the initial tutorial without hiccups. But if that has to be included in this beginner tutorial, the purpose of it should be made really clear.",Closed
"The Tree type defines a node of a tree which must have two Tree chidren. This makes it impossible for there to be leaf nodes. This commit makes the Tree type definition realistic, making both subtrees optional. Fixes #1339",Closed
"What I did
I have created a new experimental Core UI component called DropdownMenu.

This component's styles draw inspiration from the following legacy components:

WithTooltip, SidebarMenu, SidebarIconButton
ToolbarMenu, IconButton
SidebarMenuList, TooltipLinkList, List, Item, ListItem, Title
However, there might still be a need for further refinement of certain styles. I will review them with @cdedreuille.

The idea is to use any component as the DropdownMenu.Trigger, while maintaining consistent styles for its DropdownMenu.Content and DropdownMenu.Item components. These styles mirror those found in the legacy Storybook drop-downs, which were originally constructed using the aforementioned components. By introducing this new component, we not only enhance accessibility, but also eliminate the complex inter-dependencies that existed among the former components required to build a dropdown in Storybook.

How to test
Run a sandbox from a template
Open Storybook
Visit ""DropdownMenu"" stories from the Core UI section
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Closed
"What I did
This PR is introducing a new layout for Storybook on mobile. Because this is quite a consequent change, Im setting this up as a separate layout that you can activate by setting the prop newLayout to true on the <App /> component. That way we can slowly work on this new layout without breaking the old version.

One of the main reason we want to have a new layout is to break the concept that we have <Mobile /> below 600px and <Desktop /> above that. Today, this separation is creating a complete re-render making you loose your state. We hope to solve that by unifying both.

How to test
Run Storybook UI locally with yarn storybook:ui
Go to http://localhost:6006/?path=/story/manager-app-new--default
Test the new layout
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This pull request has been released as version 0.0.0-pr-23724-sha-117cb2b3. Install it by pinning all your Storybook dependencies to that version.

More information",Closed
"What I did
This PR is introducing a new layout for Storybook on mobile. Because this is quite a consequent change, Im setting this up as a separate layout that you can activate by setting the prop newLayout to true on the <App /> component. That way we can slowly work on this new layout without breaking the old version.

One of the main reason we want to have a new layout is to break the concept that we have <Mobile /> below 600px and <Desktop /> above that. Today, this separation is creating a complete re-render making you loose your state. We hope to solve that by unifying both.

How to test
Run Storybook UI locally with yarn storybook:ui
Go to http://localhost:6006/?path=/story/manager-app-new--default
Test the new layout
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-25079-sha-65111396. Install it by pinning all your Storybook dependencies to that version.",Closed
"What I did I try to keep my project dependencies up to date. I'm using vite@5 and storybook@7.6 and currently the only warning I see in my repo is: WARN  Issues with peer dependencies found . └─┬ @storybook/react-vite 7.6.3 └─┬ @vitejs/plugin-react 3.1.0 └── ✕ unmet peer vite@^4.1.0-beta.0: found 5.0.4 To fix this, I am updating the @vitejs/plugin-react version from ^3.0.1 to ^4.2.0. Here is the changelog: https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react/CHANGELOG.md The biggest change appears to be requiring vite 4.2.0. I'm not sure about the number of vite@3 users storybook has, but I think they can force the version of vite-plugin-react they want by using overrides in their package.json. The usage in storybook for vite-plugin-react is just a function call: react() - so the API hasn't changed at all. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests I'm not sure if/how @storybook/react-vite is covered by any tests in this repo. I ran yarn test in the root, and everything passed, but I'm having trouble finding a good way to test this package. Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a sandbox for a vite template: yarn task --task sandbox --start-from auto --template react-vite/default-ts Open Storybook in your browser Access a few stories to confirm that vite/react is still working Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-25077-sha-830be219. Install it by pinning all your Storybook dependencies to that version.",Closed
"What I did Adds new helper utility defineMeta. import { defineMeta } from '@storybook/react'; import { Button } from './Button'; // Type-safety out-of-the-box without writing any Typescript! export default defineMeta({ title: 'Example/Button', component: Button, }); Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! yarn task --task sandbox --start-from auto --template react-vite/default-ts cd sandbox/react-vite-default-ts Open sandbox/react-vite-default-ts/src/stories/Button.stories.ts in your code editor Apply following changes: -  3 | import type { Meta, StoryObj } from '@storybook/react'; +  3 | import { type  StoryObj, defineMeta } from '@storybook/react'; 4 | 5 | import { Button } from './Button'; 6 | 7 | // More on how to set up stories at: https://storybook.js.org/docs/writing-stories#default-export -  8 | const meta = { +  8 | const meta = defineMeta({ 9 |   title: 'Example/Button', | ... - 21 | } satisfies Meta<typeof Button>; + 21 | }); yarn storybook and verify Button stories work in browser Apply following changes to same file: -  8 | const meta = defineMeta({ +  8 | export default defineMeta({ | ... - 22 | type Story = StoryObj<typeof meta>; + 22 | type Story = StoryObj; Verify Button stories work in browser Intentionally break the implementation, e.g. csf-tools/src/CsfFile.ts and see how stories no longer work. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Should I add documentation to docs/writing-stories/typescript.md? Maybe under the ## Using 'satisfies' for better type safety? Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Fixes incompatibility issue when using the Badge component in a React 18 TypeScript project as children is no longer an implied field in v18. Type '{ children: number; status: ""neutral""; }' is not assignable to type 'IntrinsicAttributes & BadgeProps'. Property 'children' does not exist on type 'IntrinsicAttributes & BadgeProps'.ts(2322) Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did I upgraded React and related dependencies to version 18. This fixes incompatibility issue when using the Badge component in a React 18 TypeScript project as children is no longer an implied field. Type '{ children: number; status: ""neutral""; }' is not assignable to type 'IntrinsicAttributes & BadgeProps'. Property 'children' does not exist on type 'IntrinsicAttributes & BadgeProps'.ts(2322) Removal of implicit children in react 18 types [react] React 18 types DefinitelyTyped/DefinitelyTyped#56210 https://solverfox.dev/writing/no-implicit-children/ Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Because I want to use Vite.js 5.x, and I received a wanring Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Added storybook.log to circleci artifacts. I have seen yarn errors in CI that I don't understand, and the output says to check this file for more details about the error. Ref: https://app.circleci.com/pipelines/github/storybookjs/storybook/64069/workflows/e4471bb3-a8b2-4bfd-8ec4-fa3a712be17d/jobs/597980/parallel-runs/2 Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Check circleci to see if a log file is stored as an artifact in the create sandboxes step. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did pipe the output of packageManager's install sub-process in CI ignore the vite version peerDependency conflict in CI during the creation of sandboxes Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did disable logging to logfile in CI Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
What I did NextJS doesn't start on the desired port if that port is already being used by another process. However our Storybook setup assumes that it is being run on the specified port and will fail if not. This check exits the process if another port is being used. This is a strawman for discussion and shouldn't be merged as is. The code actually gets called twice with two different PIDs since next-config gets evaluated twice. Consequently there is a race condition. Manual testing Verify the dev server starts normally Start a second dev server while the first one is running and verify that the process exits early 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>,Closed
"What I did The generated Stories for Angular are type-wise broken and show errors in a freshly initialized Angular project. This PR corrects these issues, so that the default Storybook components and Stories are generated, without provoking Typescript errors. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"Top-level headings instead of menus Remove emoji from and simplify top-level titles Remove most first pages (Introduction, Overview) - Rename those files (introduction.md, overview.md) to index.md (and find/replace URLs in content) Remove concept of bullet-link Remove /<renderer> from all URLs Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did This pull request introduces updates to the INITIAL_VIEWPORTS configuration in Storybook. The aim of these changes is to ensure that the Storybook environment stays current with the devices used for UI display, which are relevant in the current industry standards. The updated INITIAL_VIEWPORTS configuration now includes the following devices: iPad Pro 11-in iPhone 14 Pro Max iPhone 14 Pro iPhone 14 iPhone 13 Pro Max iPhone 13 Pro iPhone 13 iPhone SE 3rd generation These additions to the INITIAL_VIEWPORTS configuration are essential for maintaining alignment with current industry standards. They ensure that stakeholders have a clear understanding of the devices utilized for showcasing user interfaces within Storybook. before after https://github.com/storybookjs/storybook/assets/57059705/9ed4f961-353b-4b77-a051-efe550cdecc1 https://github.com/storybookjs/storybook/assets/57059705/12be530b-642c-4a80-8e15-7ee0ae132dbd Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"Closes #22078 Closes #20582 Closes #22027 What I did Passed the user's Typescript configuration to esbuild. With that, esbuild is able to pick up the path alias configuration appropriately. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did With this pull request, the documentation was updated to transition from Discord to GH Discussions. What was done: Updated links to the proper channels Removed incorrect Discord references and pointed to the Discussions area of the monorepo. I left a couple of items to be looked at in terms of community/maintainer follow-up. Let me know, and we'll take it from there. cc @vanessayuenn , @joevaugh4n , @Integrayshaun Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Ran cd scripts && yarn release:version --exact 8.0.0-alpha.0 against this branch, which is based on release-8-0. The current version is causing problems when attempting to build 8.0 docs in frontpage. Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Add readme for @storybook/test Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Removed Vue2 sandboxes Removed Vue2 related packages @storybook/vue-vite, @storybook/vue-webpack5, @storybook/preset-vue-webpack and @storybook/vue. Added removal note in migration document Removed Vue2 doc snippets Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"This PR was automatically created by Snyk using the credentials of a real user. Snyk has created this PR to fix one or more vulnerable packages in the `yarn` dependencies of this project. Changes included in this PR Changes to the following files to upgrade the vulnerable dependencies to a fixed version: code/package.json Note for zero-installs users If you are using the Yarn feature zero-installs that was introduced in Yarn V2, note that this PR does not update the .yarn/cache/ directory meaning this code cannot be pulled and immediately developed on as one would expect for a zero-install project - you will need to run yarn to update the contents of the ./yarn/cache directory. If you are not using zero-install you can ignore this as your flow should likely be unchanged. ⚠️ Warning Vulnerabilities that will be fixed With an upgrade: Severity",Closed
"What I did Generalized parsing of parameters is hard, but we can parse parameters that are defined inline, e.g. export default { title: 'foo', parameters: { chromatic: { disable: true } } } This PR adds support for parsing such parameters to CsfFile. See included tests for more examples. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing No manual tests.",Closed
"What I did adding an option to turn off warnOnIncompatibleAddons, this does not fix the issue in #23846 but does provide a workaround other than patching storybook. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests did not find existing test case for new feature flags, let me know if I need to test it somehow. Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! checked with local repo that has incompatible addons Documentation not sure if it should be documented anywhere, seems no for warnOnLegacyHierarchySeparator, so keep it in code only for now. Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did TBD Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did In Storybook 8, the Webpack5 builder is not set up with a default compiler. Instead, Storybook or the community will provide addons to configure a compiler for Storybook. Since the default experience should still work out of the box, Storybook will provide a @storybook/addon-webpack5-compiler-swc package, which sets up the swc-loader. All newly generated webpack5-based sandboxes, which are SWC capable, will be set up with this addon configured. To guarantee a smooth migration, we will also provide a @storybook/addon-webpack5-compiler-babel7 package, which configures the babel-loader and the necessary setup for projects that cannot or don't want to migrate away from a babel setup. How should we handle breaking changes between major versions of Babel? There are two possibilities: Either we release a new addon like @storybook/addon-webpack5-compiler-babel8 to encapsulate Babel 8-related logic, or we move the addon outside of the mono repo to be able to use its versioning. It could follow semver-versioning and wouldn't be coupled to the breaking change version cycle of the mono repository. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did This PR removes any Yarn specific stuff from generated sandboxes, to then instead use the default npm. There are multiple reasons for this: Sandboxes are generated with Yarn v1, which is unmaintained and has multiple issues. (I experienced this today myself when reproducing Theming: Add theme variable to set the preview background color #24575 StackBlitz only support Yarn v1, so even if we upgraded, StackBlitz wouldn't be affected. Yarn v1 has no real advantage over npm today. However npm is more widely used and will have a smoother learning curve for new users. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Just a little one but just updated the documentation under the Babel docs since Babel does not recommend babelrc, babel recommends babel.config.js. Happy to change wording here but just chose something off the top of my head.",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What i did: Upgrade react and some testing deps then fix the fallout. Checklist Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests) Make sure to add/update documentation regarding your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Maintainers If this PR should be tested against many or all sandboxes, make sure to add the ci:merged or ci:daily GH label to it. Make sure this PR contains one of the labels below. [""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-24504-sha-5d9e47a4. Install it by pinning all your Storybook dependencies to that version. More information",Closed
"What I did Downgrade package versions to 7.5.0, since a 7.6.0-alpha.0 version isn't published yet. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Problem: (See the explanation/findings here) In monorepository setups, multiple projects or libraries share common dependencies. Sometimes, due to various configurations or linking strategies, these dependencies might get loaded more than once. This results in multiple distinct instances of the same library coexisting in the runtime. When using the instanceof operator to check if an object is an instance of a particular constructor or class, JavaScript checks against a specific prototype/reference. If two versions (or instances) of a library are loaded in a monorepository, the prototype of a class from one instance is not the same as the prototype of the same class from another instance. This can cause the instanceof checks to fail even when, from a logical perspective, they shouldn’t. In the context of our Angular decorators (like Component or Directive), the instanceof operator might give incorrect results if, for instance, one part of the monorepo references one instance/version of @angular/core and another part references a different instance. This can lead to situations where an object that logically is an instance of Component is not recognized as such by the instanceof check. Solution: To address this, we're moving away from using instanceof for type checks. Instead, we're leveraging Angular's internal property ngMetadataName, which is set on decorators like Component, Directive, etc., during the compilation phase. This property provides a string representation of the decorator's type, making it a reliable way to determine the type of decorator, irrespective of how many instances of @angular/core are loaded. By implementing the isDecoratorInstanceOf function and using the ngMetadataName property, we can ensure consistent and accurate type checks across all projects in the monorepository, eliminating the quirks introduced by the instanceof operator in this specific context. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Manual testing not required Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Replace all icons with the new icons from @storybook/icons Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did In this PR we are improving the underlying ScrollArea component to move from overlayscrollbars to @radix-ui/react-scroll-area. The API is much easier to use, resulting in less code to maintain and it is up to the latest standards in term of accessibility. This is using the exact same API as before and should have not impact on the UI as it is an absolute object position on top of everything. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! To test it, please run Storybook UI locally Scroll vertically on the sidebar Alternatively, go to this story to test it out: http://localhost:6006/?path=/story/components-scrollarea--vertical Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did In this PR we are improving the underlying ScrollArea component to move from overlayscrollbars to @radix-ui/react-scroll-area. The API is much easier to use, resulting in less code to maintain and it is up to the latest standards in term of accessibility. This is using the exact same API as before and should have not impact on the UI as it is an absolute object position on top of everything. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! To test it, please run Storybook UI locally Scroll vertically on the sidebar Alternatively, go to this story to test it out: http://localhost:6006/?path=/story/components-scrollarea--vertical Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Continues work on #24106, fixing a few minor bugs with naming and merge conflict handling with latest-release Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did In this PR we are improving the Button component. This component is used by addon creators so in order to make a smooth transition we are improving the design in a backward compatible way. In 8.0, this component will still work as expected. This component will be aligned with the new IconButton. Improved the Button component with new styles Bring back the old props and map it to the new design Mark old props as deprecated Remove the old Button component in form while keeping the functionality working. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
What I did change the text of RAW button to default text How to test Follow steps in The contrast ratio between foreground and background color of “RAW” button 3.6:1 which is less than required ratio 4.5:1. #23454 Demo Before Screenshot 2023-10-03 at 19 48 50 After Screenshot 2023-10-03 at 19 53 32,Closed
"What I did Redefined the InputType so that it confirms to the documentation Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did ActionBar has a background style, but this is not necessary, which causes a problem of breaking the style as shown in the image below image remove ActionBar Container background style Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"Issue: ActionBar has a background style, but this is not necessary, which causes a problem of breaking the style as shown in the image below image What I did remove ActionBar Container background style How to test Is this testable with Jest or Chromatic screenshots? Does this need a new example in the kitchen sink apps? Does this need an update to the documentation?",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did This PR is opened to test #23888. Testing purposes only. Do not merge! Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did This PR is based on all the work done here #20412. In this PR we are focusing on creating the base layout for mobile and allocating a spot on mobile for the main navigation. The content of this new section will be created in following PRs. Here's a list of the work done here: Update useMediaQuery (initially created by @valentinpalkovic) to use window.matchMedia instead Hide sidebar and addon panel on Mobile Adjust the layout and preview sizing to work on mobile Add the core structure for the mobile navigation Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! To test it locally, open Storybook UI library from the monorepo with yarn storybook:ui and test that you can see all stories correctly on mobile. You should also see an empty bar at the bottom for the future mobile navigation. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did This PR is based on all the work done here #20412. In this PR we are focusing on creating the base layout for mobile and allocating a spot on mobile for the main navigation. The content of this new section will be created in following PRs. Here's a list of the work done here: Update useMediaQuery (initially created by @valentinpalkovic) to use window.matchMedia instead Hide sidebar and addon panel on Mobile Adjust the layout and preview sizing to work on mobile Add the core structure for the mobile navigation Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! To test it locally, open Storybook UI library from the monorepo with yarn storybook:ui and test that you can see all stories correctly on mobile. You should also see an empty bar at the bottom for the future mobile navigation. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Description: Resolved the bug reported in issue [Bug]: Doesn't         // Match any prop that ends with ""date"" or ""Date"". #24120, where the regular expression /Date$/ wasn't matching properties that end with ""date"" or ""Date"" due to case sensitivity. Changed the regular expression to /Date$/i in the configuration file to make it case-insensitive, allowing it to match both ""Date"" and ""date."" Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did The Github Action that generates sandboxes to next and main also generate angular prereleases in node 18 The CircleCI Config has a new job for creating and testing angular prerelease in Node 18 Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing It's quite tricky to test the GH Action code, but I have tested it extensively and was successfully able to generate sandboxes, both in main and next. Regarding the CircleCI part, it's a matter of pushing code changes and seeing what CircleCI does. I commented out most of the jobs so that we don't spend unnecessary CI time and things are faster. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did In this PR we are unifying the desktop and mobile layouts into one layout. This means that when you resize the manager, the preview will not rerender. As this is only the first phase of this project, for now the goal of this PR would only be to have a unique layout and that we don't show the sidebar on mobile. This PR doesn't have the new mobile navigation. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Add an option for sandboxes to be exlucded completely. Not only for runnning in CI, but also for generating sandboxes. We need this to get CI green, as the angular prerelease sandbox is not working in Node 18 anymore. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did I added the possibility to configure the vue docgen options for advanced usage in Vite. For example for monorepo file aliases for docs. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Added logging to the preset.ts and vue-docgen.ts. Run a sandbox for template, e.g. yarn task --task sandbox --start-from auto --template vue3-vite/default-ts. Change the main.ts options (repeatedly based on those options: https://vue-styleguidist.github.io/docs/Docgen.html#api) Checked if the variables are passed correctly and output. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
What I did Glob 10.2 and above adds some problematic dependencies which contain ESM-only code that trips up some node tooling including Jest and ESlint. Pinning this to an older version for now. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing TBD. @tmeasday @yannbf do you know how to test this? 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>,Closed
"What I did Migrated the concurrency file to TS Removed dead function not used anywhere Eliminated code debt violation Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: compiler Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
" ""The addons did not appear in the same order as before, meaning the order in which they are defined in the user's main.ts.

I discovered the reason why:
When I have esbuild write to the file-system, and then read the file-system... The order in which I get them when I read isn't the same as when I wrote.

I changed the behavior to have esbuild NOT write the files to the file-system, when doing so the return value of esbuild contains a outputFiles property. (it does not contain this property when you configure it to write files).

This array of files is in the proper order and contains the correct path.

""",Closed
"Replace the preset-create-react-app with framework/cra
This framework is what we expect users to use if they use CRA for their app.
This framework has portions of preset-create-react-app copied into it, and is self-containing, it does not reference preset-create-react-app at all. It's also been significantly reduced in complexity, though this means we have to battle-test it. It's likely not compatible with all version of CRA.

I updated all the CRA examples to use this new framework.

I updated the CLI a bit, though this might need more work, I did not test this yet.

Documentation needs more work.

@yannbf raised the question of what this framework should be called.. ""@storybook/cra"" vs ""@storybook/create-react-app""?",Closed
"Before we has a very complex method for getting the webpack config:

We had multiple places where parts of the webpack config (the default one) was defined.
This changed to just 1 place.

We had presets with the propery of webpack that exposed some defaults, and calling webpackFinal and also support for loading a {webpackConfig|webpack.config}.* file, and we had code merging that.

After this PR, this becomes a lot simpler:

All presets expose the webpack property, which receives the default webpack config (that already has everything basically needed).
Users can expose a webpack property too, it will be loaded last to near last. Users can also expose a webpackFinalproperty, which receives the webpack config after is has been passed through allwebpack` properties.

webpackFinal will be invoked last.
Presets could set that up as well, which would lead to the base config being discarded/replaced (this is needed for CRA and presumably next), but the user's main.js exposing a webpackConfig will always run last, and can overload whatever they want, and always receive the config that would otherwise be passed into webpack.

Storybook will never magic-load any webpack config files, so the feature of loading {webpackConfig|webpack.config}.* files is removed here.",Closed
"This is attempt number 1 at upgrading mobx-router to the latest default conventions for mobx. This is working fine for me using mobx 6.3.3 and react 17, but my usage and testing may be limited.

The latest default mobx configuration removes all usage of annotations for observable, observer, computed, and actions. This is replaced by either wrapping functions with the function call or calling makeObservable in a class constructor.

This addresses the issues brought up here: #106.
",Closed
"Add ""likes"" action to talk contract.

The following testing was done:

Initially the likes in the messages were 0:
{
""rows"": [{
""id"": 1000,
""reply_to"": 0,
""user"": ""bob"",
""content"": ""This is a new post"",
""likes"": 0
},{
""id"": 1001,
""reply_to"": 2000,
""user"": ""bob"",
""content"": ""Replying to your post"",
""likes"": 0
},{
""id"": 2000,
""reply_to"": 0,
""user"": ""jane"",
""content"": ""This is my first post"",
""likes"": 0
}
],
""more"": false
}

After I run ""like"" operations:

cleos push action talk like '[1000, bob]' -p bob
cleos push action talk like '[1000, bob]' -p bob
cleos push action talk like '[2000, jane]' -p jane

The likes in the messages were updated correctly
gitpod /workspace/eosio-web-ide $ cleos get table talk '' message
{
""rows"": [{
""id"": 1000,
""reply_to"": 0,
""user"": ""bob"",
""content"": ""This is a new post"",
""likes"": 2
},{
""id"": 1001,
""reply_to"": 2000,
""user"": ""bob"",
""content"": ""Replying to your post"",
""likes"": 0
},{
""id"": 2000,
""reply_to"": 0,
""user"": ""jane"",
""content"": ""This is my first post"",
""likes"": 1
}
],
""more"": false
}",Closed
"The way we were handling ICU placeholders was not compatible with using interpolations on attributes of elements inside the ICU. This change refactors the handling of ICU placeholders and unifies the way expression and tag placeholders work inside ICUs.

The new approach modifies the ingest logic to add the placeholder on to the TextOp rather than the TextInterpolationOp. This is because, in ICUs, we may need multiple i18n expressions created from the interpolation expressions to roll up into the same placeholder. ICUs essentially do the interpolation at compile time, combining the static strings with special placeholder strings that represent the expression values.",Closed
"It's possible for the user to create a host attrbiute binding with a name that makes it look like a class binding {['class.foo']: ''}, we were previously treating these as actual class property bindings. This change fixes the logic so that only true property bindings cam be converted to class property bindings.

Note: A user who added an attribute like the above almost certainly intended to create an actual class property binding. It would be nice if we could add a diagnostic to warn them about this.",Closed
"Includes a couple of commits that allow for the root node of an @empty block to be content projected.

fix(compiler): project empty block root node
Expands the workaround from #52414 to allow for the root nodes of @empty blocks to be content projected.

fix(compiler): project empty block root node in template pipeline
Updates the template pipeline to allow for the root node of an @empty block to be content projected.

Fixes #53570.",Closed
"The for loop tracking function doesn't allow references to local template variables, aside from $index and the item which are passed in as parameters. We enforce this by rewriting all variable references to the components scope.

The problem is that the logic that rewrites the references first walks the view tree and then checks if the variable is $index or the item. This is problematic in nested for loops, because it'll find the $index of the parent.

These changes resolve the issue by checking for $index and the item first.

Fixes #53600.",Closed
"This may be an oversight, or perhaps I'm misunderstanding the expectations of select. It appears that changes to the select's form control never propagate to the select's value.

We are seeing tests do the following:

set the form control to some value
click the select's reset option
expect the form control to be reset to undefined
This fails now because it appears the select's value was never set to the form control's value. Thus, when the reset option is clicked, the select sees its value is still null and doesn't emit, thus the form control never resets.",Closed
"""This contains a test that shows the failure we are encountering in Google. Due to overlay's detachment and subsequent click in the CompWithOverlay component, we are finding that change detection is run at a moment where, for some reason, MatFormField no longer detects that it contains a control.

When you run this test, you'll find that it passes. But the reason it passes is because it does not acknowledge the error from MatFormField. It is being eaten due to RxJS's error handling somewhere (I couldn't figure out where).

The reason this fails in Google is twofold:

All tests in Google still use RxJS's deprecated error handling, which meant that errors were handled synchronously. Our tests do not do this. In Google, https://github.com/ReactiveX/rxjs/blob/b280c879228a8d78a3bb52c487459abc1fee4e2b/src/internal/config.ts has the value of useDeprecatedSynchronousErrorHandling set to true, where ours is false.
All tests create the ComponentFixture with ComponentFixtureAutoDetect set to true. This (I assume) causes change detection to run more often, reducing the risk of errors from missing flush and tick calls. Our specs do not do this, but in this test I changed it to true to match Google.
If you run this test, check out the console.log to see that MatFormField throws an error during the test, but it never causes the test to fail.

This is the end of several dozen hours of investigating, so I think for now I'll pass this off to you for how we move forward. While it might be easy to say we can change the tests in Google, this is just one example of failures all boiling down to odd change detection. E.g. in one case the select fails to find options anymore.""",Closed
"Adds a mat-select-header component, which is a fixed header above the select's options. It allows for the user to project an input to be used for filtering long lists of options.

Note: This component only handles the positioning, styling, some basic focus management and exposes the panel id for a11y. The functionality is up to the consumer to handle.

Fixes angular#2812.
",Closed
"This is a proof-of-concept for using a global click listener with useCapture to determine whether the user clicked outside an overlay. These are some pros and cons of the approach after trying to implement it into all of the components:

Pros
The transparent overlay no longer blocks scrolling inside non-body elements (e.g. a sidenav container).
We don't have to add and manage an extra DOM element for the backdrop.
The user can click directly into another element, as opposed to having to click once to close the overlay and once more on the element.
Cons
The document click handler doesn't fire on iOS, unless the user tapped on a clickable element (an element with cursor: pointer). To get around this I made a synthetic tap stream that seems to work pretty well, but makes some assumptions. An interaction is considered a ""tap"" if there was a touchstart event, followed by a touchend, without a touchmove inbetween.
Since we're enabling useCapture it means that the document click handler will fire before any events on children. This means that clicking on an overlay trigger while the overlay is open will close the overlay and immediately reopen it. It can be worked around with another filter before the outsideClick stream.
Some of the more advanced cases become really difficult (namely nested menus), because the document click handler now fires before all other handlers and we don't have the opportunity to block it. We could potentially fall back to the backdrop behavior only for those cases, but that'll add another code path and make things inconsistent.
cc @jelbourn",Closed
"Currently, the dialog's scrollable content (md-dialog-content) is limited to 65% of the viewport height, however on smaller screens the dialog still ends up being too high (see issue angular#2481). This proposal reworks the md-dialog-content to make it take up all of the remaining height, instead of being hardcoded to 65%. The max height is provided by the wrapper instead.

The issue with this approach is that the direct parent of the md-dialog-content has to be display: flex, which can end up modifying the user's content. I see a couple of solutions, but I'm not sure which one to go with:

Conditionally add the flexbox styles, if the user has used md-dialog-content. That's what this PR is doing, however using querySelector to find out if the dialog content is there feels a little dirty. We're not able to use @ViewChild or @ContentChild to query for it.
Force the user to use our dialog content elements. This is what Material 1 was doing.",Closed
"I've made changes on the code to integrate progress values inside directive, and do not use a div outside anymore, with a new option to show or not max value on it.

It was needed to rename the name of progress class on css because it has a conflict with another framework.

Some css values were put inside the code, since they are always required in most cases, and should not be a simple custom color or font-size. If someone need to put the progress value in another place it can override the css or disable it with showValue option and use variables manually.",Closed
"Currently md-select passes the width of it's trigger element to it's overlay via a data binding. The data binding gets updated every time the change detection runs, which means that it'll run getBoundingClientRect on pretty much any interaction with the page. This could cause performance issues in the future, especially on slower devices and more complex pages since every call to getBoundingClientRect causes a reflow.

This is a proposal to add a match-origin option to the connected-overlay directive. This option will make the overlay match it's origin's width/height and will only call getBoundingClientRect once when setting up the overlay.

The problem can alternatively be worked around with the following, however both approaches have their issues:

Change the binding to paneOpen ? _getWidth() : 0 - This works and avoids most of the getBoundingClientRect calls, but it looks weird and getBoundingClientRect still gets called for every change detection while the select is open.
Pass in an observable to the width binding - This also works, but it ends up being inconvenient to have to deal with a type of number | string | Observable in the overlay directive.",Closed
"This is a proof-of-concept for using flexbox to position global overlays (e.g. dialog and snack-bar) with flexbox. The main advantage with this approach is that it allows for automatic centering without subpixel rendering issues. A few notes:

In order to prevent the changes to the global position strategy from interfering with other overlays that may get positioned in the same container, I've had to change up the DOM structure a little. In master, the DOM looks like .md-overlay-container > .md-overlay-pane, whereas these changes switch it to .md-overlay-container > .md-overlay-pane-wrapper > .md-overlay-pane. The flexbox properties are applied to the md-overlay-pane-wrapper.
Since the DOM was changed, I've added a _hostWrapper property to the DomPortalHost. This is necessary in order to be able to clean up when closing. There's probably a nicer way of doing it, but I wanted to keep the changes as small as possible.
Due to some centering issues in Firefox and IE, I've switched the top/bottom/left/right offsets to be done with margin and the flexbox properties. This works, however percentage-based offsets won't work as expected since now they're based on the element's size, instead of the viewport.",Closed
"This PR moves the usage of 'use strict' to inner functions

The reasoning behind this is that, when this is used inside a blob (e.g. with webpack, browserify, uglify, whatever - it's common when deploying) - it enforces 'use strict' with the global scope.

A particular issue I hit was with uglifyjs, when minifying the entire source of my app, I get

Uncaught SyntaxError: Duplicate parameter name not allowed in this context
I traced this back to roundProgress.js (taken from build/) and afterwards I concluded this was because of the global 'use strict'",Closed
"Closes #23916

What I did
Adds a flag to publish to npm with provenance.

Checklist for Contributors
Testing
The changes in this PR are covered in the following automated tests:
 stories
 unit tests
 integration tests
 end-to-end tests
Manual testing
This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks!

On the next release, run the regular release workflow publish.yml
Check if the workflow passes
Check if the packages pages on npm show the provenance badge
(e.g. https://www.npmjs.com/package/next#provenance)
Documentation
 Add or update documentation reflecting your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD",Closed
"update ""Module Resolution Strategies"" to reflect how TS actually works Partially addresses microsoft/TypeScript#39555 (comment) cc @DanielRosenwasser and @orta, the more i look at the source code for this behavior the more it feels like this cannot be what is intended given our strong preference for node style resolution instead of classic. then again, I don't really know what went into writing that code. but it looks wrong at first glance, bc it appears to opt in all ES20XX targets into classic module resolution... which doesnt seem like what we want??",Closed
"Added a note to clarify the use of externals property in webpack config. I followed this guide as my first webpack tutorial then moved on to webpack docs to learn more and add more things to the webpack config. None of the other tutorials I saw had manually added any React libraries to index.html so I removed those 2 lines and struggled for about a week to realize the externals field added from this tutorial was the reason my site stopped working. I personally wouldn't recommend adding any externals to a beginner tutorial. Learning webpack is complex enough as it is. Something like externals should only be introduced in a ""Production/Deployment"" or ""Optimizations"" related page after a beginner has gone through the initial tutorial without hiccups. But if that has to be included in this beginner tutorial, the purpose of it should be made really clear.",Closed
"update ""Module Resolution Strategies"" to reflect how TS actually works Partially addresses microsoft/TypeScript#39555 (comment) cc @DanielRosenwasser and @orta, the more i look at the source code for this behavior the more it feels like this cannot be what is intended given our strong preference for node style resolution instead of classic. then again, I don't really know what went into writing that code. but it looks wrong at first glance, bc it appears to opt in all ES20XX targets into classic module resolution... which doesnt seem like what we want??",Closed
"Added a note to clarify the use of externals property in webpack config. I followed this guide as my first webpack tutorial then moved on to webpack docs to learn more and add more things to the webpack config. None of the other tutorials I saw had manually added any React libraries to index.html so I removed those 2 lines and struggled for about a week to realize the externals field added from this tutorial was the reason my site stopped working. I personally wouldn't recommend adding any externals to a beginner tutorial. Learning webpack is complex enough as it is. Something like externals should only be introduced in a ""Production/Deployment"" or ""Optimizations"" related page after a beginner has gone through the initial tutorial without hiccups. But if that has to be included in this beginner tutorial, the purpose of it should be made really clear.",Closed
"The Tree type defines a node of a tree which must have two Tree chidren. This makes it impossible for there to be leaf nodes. This commit makes the Tree type definition realistic, making both subtrees optional. Fixes #1339",Closed
"What I did
I have created a new experimental Core UI component called DropdownMenu.

This component's styles draw inspiration from the following legacy components:

WithTooltip, SidebarMenu, SidebarIconButton
ToolbarMenu, IconButton
SidebarMenuList, TooltipLinkList, List, Item, ListItem, Title
However, there might still be a need for further refinement of certain styles. I will review them with @cdedreuille.

The idea is to use any component as the DropdownMenu.Trigger, while maintaining consistent styles for its DropdownMenu.Content and DropdownMenu.Item components. These styles mirror those found in the legacy Storybook drop-downs, which were originally constructed using the aforementioned components. By introducing this new component, we not only enhance accessibility, but also eliminate the complex inter-dependencies that existed among the former components required to build a dropdown in Storybook.

How to test
Run a sandbox from a template
Open Storybook
Visit ""DropdownMenu"" stories from the Core UI section
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Closed
"What I did
This PR is introducing a new layout for Storybook on mobile. Because this is quite a consequent change, Im setting this up as a separate layout that you can activate by setting the prop newLayout to true on the <App /> component. That way we can slowly work on this new layout without breaking the old version.

One of the main reason we want to have a new layout is to break the concept that we have <Mobile /> below 600px and <Desktop /> above that. Today, this separation is creating a complete re-render making you loose your state. We hope to solve that by unifying both.

How to test
Run Storybook UI locally with yarn storybook:ui
Go to http://localhost:6006/?path=/story/manager-app-new--default
Test the new layout
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This pull request has been released as version 0.0.0-pr-23724-sha-117cb2b3. Install it by pinning all your Storybook dependencies to that version.

More information",Closed
"What I did
This PR is introducing a new layout for Storybook on mobile. Because this is quite a consequent change, Im setting this up as a separate layout that you can activate by setting the prop newLayout to true on the <App /> component. That way we can slowly work on this new layout without breaking the old version.

One of the main reason we want to have a new layout is to break the concept that we have <Mobile /> below 600px and <Desktop /> above that. Today, this separation is creating a complete re-render making you loose your state. We hope to solve that by unifying both.

How to test
Run Storybook UI locally with yarn storybook:ui
Go to http://localhost:6006/?path=/story/manager-app-new--default
Test the new layout
Checklist
 Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests)
 Make sure to add/update documentation regarding your changes
 If you are deprecating/removing a feature, make sure to update
MIGRATION.MD
Maintainers
 When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts
 Make sure this PR contains one of the labels below.
[""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""build"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]

🦋 Canary release
This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here.

core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-25079-sha-65111396. Install it by pinning all your Storybook dependencies to that version.",Closed
"What I did I try to keep my project dependencies up to date. I'm using vite@5 and storybook@7.6 and currently the only warning I see in my repo is: WARN  Issues with peer dependencies found . └─┬ @storybook/react-vite 7.6.3 └─┬ @vitejs/plugin-react 3.1.0 └── ✕ unmet peer vite@^4.1.0-beta.0: found 5.0.4 To fix this, I am updating the @vitejs/plugin-react version from ^3.0.1 to ^4.2.0. Here is the changelog: https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react/CHANGELOG.md The biggest change appears to be requiring vite 4.2.0. I'm not sure about the number of vite@3 users storybook has, but I think they can force the version of vite-plugin-react they want by using overrides in their package.json. The usage in storybook for vite-plugin-react is just a function call: react() - so the API hasn't changed at all. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests I'm not sure if/how @storybook/react-vite is covered by any tests in this repo. I ran yarn test in the root, and everything passed, but I'm having trouble finding a good way to test this package. Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Run a sandbox for a vite template: yarn task --task sandbox --start-from auto --template react-vite/default-ts Open Storybook in your browser Access a few stories to confirm that vite/react is still working Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-25077-sha-830be219. Install it by pinning all your Storybook dependencies to that version.",Closed
"What I did Adds new helper utility defineMeta. import { defineMeta } from '@storybook/react'; import { Button } from './Button'; // Type-safety out-of-the-box without writing any Typescript! export default defineMeta({ title: 'Example/Button', component: Button, }); Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! yarn task --task sandbox --start-from auto --template react-vite/default-ts cd sandbox/react-vite-default-ts Open sandbox/react-vite-default-ts/src/stories/Button.stories.ts in your code editor Apply following changes: -  3 | import type { Meta, StoryObj } from '@storybook/react'; +  3 | import { type  StoryObj, defineMeta } from '@storybook/react'; 4 | 5 | import { Button } from './Button'; 6 | 7 | // More on how to set up stories at: https://storybook.js.org/docs/writing-stories#default-export -  8 | const meta = { +  8 | const meta = defineMeta({ 9 |   title: 'Example/Button', | ... - 21 | } satisfies Meta<typeof Button>; + 21 | }); yarn storybook and verify Button stories work in browser Apply following changes to same file: -  8 | const meta = defineMeta({ +  8 | export default defineMeta({ | ... - 22 | type Story = StoryObj<typeof meta>; + 22 | type Story = StoryObj; Verify Button stories work in browser Intentionally break the implementation, e.g. csf-tools/src/CsfFile.ts and see how stories no longer work. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Should I add documentation to docs/writing-stories/typescript.md? Maybe under the ## Using 'satisfies' for better type safety? Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Fixes incompatibility issue when using the Badge component in a React 18 TypeScript project as children is no longer an implied field in v18. Type '{ children: number; status: ""neutral""; }' is not assignable to type 'IntrinsicAttributes & BadgeProps'. Property 'children' does not exist on type 'IntrinsicAttributes & BadgeProps'.ts(2322) Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did I upgraded React and related dependencies to version 18. This fixes incompatibility issue when using the Badge component in a React 18 TypeScript project as children is no longer an implied field. Type '{ children: number; status: ""neutral""; }' is not assignable to type 'IntrinsicAttributes & BadgeProps'. Property 'children' does not exist on type 'IntrinsicAttributes & BadgeProps'.ts(2322) Removal of implicit children in react 18 types [react] React 18 types DefinitelyTyped/DefinitelyTyped#56210 https://solverfox.dev/writing/no-implicit-children/ Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Because I want to use Vite.js 5.x, and I received a wanring Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Added storybook.log to circleci artifacts. I have seen yarn errors in CI that I don't understand, and the output says to check this file for more details about the error. Ref: https://app.circleci.com/pipelines/github/storybookjs/storybook/64069/workflows/e4471bb3-a8b2-4bfd-8ec4-fa3a712be17d/jobs/597980/parallel-runs/2 Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Check circleci to see if a log file is stored as an artifact in the create sandboxes step. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did pipe the output of packageManager's install sub-process in CI ignore the vite version peerDependency conflict in CI during the creation of sandboxes Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did disable logging to logfile in CI Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
What I did NextJS doesn't start on the desired port if that port is already being used by another process. However our Storybook setup assumes that it is being run on the specified port and will fail if not. This check exits the process if another port is being used. This is a strawman for discussion and shouldn't be merged as is. The code actually gets called twice with two different PIDs since next-config gets evaluated twice. Consequently there is a race condition. Manual testing Verify the dev server starts normally Start a second dev server while the first one is running and verify that the process exits early 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>,Closed
"What I did The generated Stories for Angular are type-wise broken and show errors in a freshly initialized Angular project. This PR corrects these issues, so that the default Storybook components and Stories are generated, without provoking Typescript errors. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"Top-level headings instead of menus Remove emoji from and simplify top-level titles Remove most first pages (Introduction, Overview) - Rename those files (introduction.md, overview.md) to index.md (and find/replace URLs in content) Remove concept of bullet-link Remove /<renderer> from all URLs Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did This pull request introduces updates to the INITIAL_VIEWPORTS configuration in Storybook. The aim of these changes is to ensure that the Storybook environment stays current with the devices used for UI display, which are relevant in the current industry standards. The updated INITIAL_VIEWPORTS configuration now includes the following devices: iPad Pro 11-in iPhone 14 Pro Max iPhone 14 Pro iPhone 14 iPhone 13 Pro Max iPhone 13 Pro iPhone 13 iPhone SE 3rd generation These additions to the INITIAL_VIEWPORTS configuration are essential for maintaining alignment with current industry standards. They ensure that stakeholders have a clear understanding of the devices utilized for showcasing user interfaces within Storybook. before after https://github.com/storybookjs/storybook/assets/57059705/9ed4f961-353b-4b77-a051-efe550cdecc1 https://github.com/storybookjs/storybook/assets/57059705/12be530b-642c-4a80-8e15-7ee0ae132dbd Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"Closes #22078 Closes #20582 Closes #22027 What I did Passed the user's Typescript configuration to esbuild. With that, esbuild is able to pick up the path alias configuration appropriately. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did With this pull request, the documentation was updated to transition from Discord to GH Discussions. What was done: Updated links to the proper channels Removed incorrect Discord references and pointed to the Discussions area of the monorepo. I left a couple of items to be looked at in terms of community/maintainer follow-up. Let me know, and we'll take it from there. cc @vanessayuenn , @joevaugh4n , @Integrayshaun Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Ran cd scripts && yarn release:version --exact 8.0.0-alpha.0 against this branch, which is based on release-8-0. The current version is causing problems when attempting to build 8.0 docs in frontpage. Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Add readme for @storybook/test Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Removed Vue2 sandboxes Removed Vue2 related packages @storybook/vue-vite, @storybook/vue-webpack5, @storybook/preset-vue-webpack and @storybook/vue. Added removal note in migration document Removed Vue2 doc snippets Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"This PR was automatically created by Snyk using the credentials of a real user. Snyk has created this PR to fix one or more vulnerable packages in the `yarn` dependencies of this project. Changes included in this PR Changes to the following files to upgrade the vulnerable dependencies to a fixed version: code/package.json Note for zero-installs users If you are using the Yarn feature zero-installs that was introduced in Yarn V2, note that this PR does not update the .yarn/cache/ directory meaning this code cannot be pulled and immediately developed on as one would expect for a zero-install project - you will need to run yarn to update the contents of the ./yarn/cache directory. If you are not using zero-install you can ignore this as your flow should likely be unchanged. ⚠️ Warning Vulnerabilities that will be fixed With an upgrade: Severity",Closed
"What I did Generalized parsing of parameters is hard, but we can parse parameters that are defined inline, e.g. export default { title: 'foo', parameters: { chromatic: { disable: true } } } This PR adds support for parsing such parameters to CsfFile. See included tests for more examples. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing No manual tests.",Closed
"What I did adding an option to turn off warnOnIncompatibleAddons, this does not fix the issue in #23846 but does provide a workaround other than patching storybook. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests did not find existing test case for new feature flags, let me know if I need to test it somehow. Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! checked with local repo that has incompatible addons Documentation not sure if it should be documented anywhere, seems no for warnOnLegacyHierarchySeparator, so keep it in code only for now. Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did TBD Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did In Storybook 8, the Webpack5 builder is not set up with a default compiler. Instead, Storybook or the community will provide addons to configure a compiler for Storybook. Since the default experience should still work out of the box, Storybook will provide a @storybook/addon-webpack5-compiler-swc package, which sets up the swc-loader. All newly generated webpack5-based sandboxes, which are SWC capable, will be set up with this addon configured. To guarantee a smooth migration, we will also provide a @storybook/addon-webpack5-compiler-babel7 package, which configures the babel-loader and the necessary setup for projects that cannot or don't want to migrate away from a babel setup. How should we handle breaking changes between major versions of Babel? There are two possibilities: Either we release a new addon like @storybook/addon-webpack5-compiler-babel8 to encapsulate Babel 8-related logic, or we move the addon outside of the mono repo to be able to use its versioning. It could follow semver-versioning and wouldn't be coupled to the breaking change version cycle of the mono repository. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did This PR removes any Yarn specific stuff from generated sandboxes, to then instead use the default npm. There are multiple reasons for this: Sandboxes are generated with Yarn v1, which is unmaintained and has multiple issues. (I experienced this today myself when reproducing Theming: Add theme variable to set the preview background color #24575 StackBlitz only support Yarn v1, so even if we upgraded, StackBlitz wouldn't be affected. Yarn v1 has no real advantage over npm today. However npm is more widely used and will have a smoother learning curve for new users. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Just a little one but just updated the documentation under the Babel docs since Babel does not recommend babelrc, babel recommends babel.config.js. Happy to change wording here but just chose something off the top of my head.",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What i did: Upgrade react and some testing deps then fix the fallout. Checklist Make sure your changes are tested (stories and/or unit, integration, or end-to-end tests) Make sure to add/update documentation regarding your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Maintainers If this PR should be tested against many or all sandboxes, make sure to add the ci:merged or ci:daily GH label to it. Make sure this PR contains one of the labels below. [""cleanup"", ""BREAKING CHANGE"", ""feature request"", ""bug"", ""documentation"", ""maintenance"", ""dependencies"", ""other""]",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This pull request has been released as version 0.0.0-pr-24504-sha-5d9e47a4. Install it by pinning all your Storybook dependencies to that version. More information",Closed
"What I did Downgrade package versions to 7.5.0, since a 7.6.0-alpha.0 version isn't published yet. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Problem: (See the explanation/findings here) In monorepository setups, multiple projects or libraries share common dependencies. Sometimes, due to various configurations or linking strategies, these dependencies might get loaded more than once. This results in multiple distinct instances of the same library coexisting in the runtime. When using the instanceof operator to check if an object is an instance of a particular constructor or class, JavaScript checks against a specific prototype/reference. If two versions (or instances) of a library are loaded in a monorepository, the prototype of a class from one instance is not the same as the prototype of the same class from another instance. This can cause the instanceof checks to fail even when, from a logical perspective, they shouldn’t. In the context of our Angular decorators (like Component or Directive), the instanceof operator might give incorrect results if, for instance, one part of the monorepo references one instance/version of @angular/core and another part references a different instance. This can lead to situations where an object that logically is an instance of Component is not recognized as such by the instanceof check. Solution: To address this, we're moving away from using instanceof for type checks. Instead, we're leveraging Angular's internal property ngMetadataName, which is set on decorators like Component, Directive, etc., during the compilation phase. This property provides a string representation of the decorator's type, making it a reliable way to determine the type of decorator, irrespective of how many instances of @angular/core are loaded. By implementing the isDecoratorInstanceOf function and using the ngMetadataName property, we can ensure consistent and accurate type checks across all projects in the monorepository, eliminating the quirks introduced by the instanceof operator in this specific context. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Manual testing not required Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Replace all icons with the new icons from @storybook/icons Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did In this PR we are improving the underlying ScrollArea component to move from overlayscrollbars to @radix-ui/react-scroll-area. The API is much easier to use, resulting in less code to maintain and it is up to the latest standards in term of accessibility. This is using the exact same API as before and should have not impact on the UI as it is an absolute object position on top of everything. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! To test it, please run Storybook UI locally Scroll vertically on the sidebar Alternatively, go to this story to test it out: http://localhost:6006/?path=/story/components-scrollarea--vertical Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did In this PR we are improving the underlying ScrollArea component to move from overlayscrollbars to @radix-ui/react-scroll-area. The API is much easier to use, resulting in less code to maintain and it is up to the latest standards in term of accessibility. This is using the exact same API as before and should have not impact on the UI as it is an absolute object position on top of everything. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! To test it, please run Storybook UI locally Scroll vertically on the sidebar Alternatively, go to this story to test it out: http://localhost:6006/?path=/story/components-scrollarea--vertical Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Continues work on #24106, fixing a few minor bugs with naming and merge conflict handling with latest-release Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did In this PR we are improving the Button component. This component is used by addon creators so in order to make a smooth transition we are improving the design in a backward compatible way. In 8.0, this component will still work as expected. This component will be aligned with the new IconButton. Improved the Button component with new styles Bring back the old props and map it to the new design Mark old props as deprecated Remove the old Button component in form while keeping the functionality working. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
What I did change the text of RAW button to default text How to test Follow steps in The contrast ratio between foreground and background color of “RAW” button 3.6:1 which is less than required ratio 4.5:1. #23454 Demo Before Screenshot 2023-10-03 at 19 48 50 After Screenshot 2023-10-03 at 19 53 32,Closed
"What I did Redefined the InputType so that it confirms to the documentation Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did ActionBar has a background style, but this is not necessary, which causes a problem of breaking the style as shown in the image below image remove ActionBar Container background style Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"Issue: ActionBar has a background style, but this is not necessary, which causes a problem of breaking the style as shown in the image below image What I did remove ActionBar Container background style How to test Is this testable with Jest or Chromatic screenshots? Does this need a new example in the kitchen sink apps? Does this need an update to the documentation?",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did This PR is opened to test #23888. Testing purposes only. Do not merge! Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did This PR is based on all the work done here #20412. In this PR we are focusing on creating the base layout for mobile and allocating a spot on mobile for the main navigation. The content of this new section will be created in following PRs. Here's a list of the work done here: Update useMediaQuery (initially created by @valentinpalkovic) to use window.matchMedia instead Hide sidebar and addon panel on Mobile Adjust the layout and preview sizing to work on mobile Add the core structure for the mobile navigation Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! To test it locally, open Storybook UI library from the monorepo with yarn storybook:ui and test that you can see all stories correctly on mobile. You should also see an empty bar at the bottom for the future mobile navigation. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did This PR is based on all the work done here #20412. In this PR we are focusing on creating the base layout for mobile and allocating a spot on mobile for the main navigation. The content of this new section will be created in following PRs. Here's a list of the work done here: Update useMediaQuery (initially created by @valentinpalkovic) to use window.matchMedia instead Hide sidebar and addon panel on Mobile Adjust the layout and preview sizing to work on mobile Add the core structure for the mobile navigation Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! To test it locally, open Storybook UI library from the monorepo with yarn storybook:ui and test that you can see all stories correctly on mobile. You should also see an empty bar at the bottom for the future mobile navigation. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Description: Resolved the bug reported in issue [Bug]: Doesn't         // Match any prop that ends with ""date"" or ""Date"". #24120, where the regular expression /Date$/ wasn't matching properties that end with ""date"" or ""Date"" due to case sensitivity. Changed the regular expression to /Date$/i in the configuration file to make it case-insensitive, allowing it to match both ""Date"" and ""date."" Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did The Github Action that generates sandboxes to next and main also generate angular prereleases in node 18 The CircleCI Config has a new job for creating and testing angular prerelease in Node 18 Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing It's quite tricky to test the GH Action code, but I have tested it extensively and was successfully able to generate sandboxes, both in main and next. Regarding the CircleCI part, it's a matter of pushing code changes and seeing what CircleCI does. I commented out most of the jobs so that we don't spend unnecessary CI time and things are faster. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did In this PR we are unifying the desktop and mobile layouts into one layout. This means that when you resize the manager, the preview will not rerender. As this is only the first phase of this project, for now the goal of this PR would only be to have a unique layout and that we don't show the sidebar on mobile. This PR doesn't have the new mobile navigation. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Add an option for sandboxes to be exlucded completely. Not only for runnning in CI, but also for generating sandboxes. We need this to get CI green, as the angular prerelease sandbox is not working in Node 18 anymore. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did I added the possibility to configure the vue docgen options for advanced usage in Vite. For example for monorepo file aliases for docs. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing Added logging to the preset.ts and vue-docgen.ts. Run a sandbox for template, e.g. yarn task --task sandbox --start-from auto --template vue3-vite/default-ts. Change the main.ts options (repeatedly based on those options: https://vue-styleguidist.github.io/docs/Docgen.html#api) Checked if the variables are passed correctly and output. Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
"What I did Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
What I did Glob 10.2 and above adds some problematic dependencies which contain ESM-only code that trips up some node tooling including Jest and ESlint. Pinning this to an older version for now. Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: stories unit tests integration tests end-to-end tests Manual testing TBD. @tmeasday @yannbf do you know how to test this? 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>,Closed
"What I did Migrated the concurrency file to TS Removed dead function not used anywhere Eliminated code debt violation Checklist for Contributors Testing The changes in this PR are covered in the following automated tests: compiler Manual testing This section is mandatory for all contributions. If you believe no manual test is necessary, please state so explicitly. Thanks! Documentation Add or update documentation reflecting your changes If you are deprecating/removing a feature, make sure to update MIGRATION.MD Checklist for Maintainers When this PR is ready for testing, make sure to add ci:normal, ci:merged or ci:daily GH label to it to run a specific set of sandboxes. The particular set of sandboxes can be found in code/lib/cli/src/sandbox-templates.ts Make sure this PR contains one of the labels below: Available labels 🦋 Canary release This PR does not have a canary release associated. You can request a canary release of this pull request by mentioning the @storybookjs/core team here. core team members can create a canary release here or locally with gh workflow run --repo storybookjs/storybook canary-release-pr.yml --field pr=<PR_NUMBER>",Closed
" ""The addons did not appear in the same order as before, meaning the order in which they are defined in the user's main.ts.

I discovered the reason why:
When I have esbuild write to the file-system, and then read the file-system... The order in which I get them when I read isn't the same as when I wrote.

I changed the behavior to have esbuild NOT write the files to the file-system, when doing so the return value of esbuild contains a outputFiles property. (it does not contain this property when you configure it to write files).

This array of files is in the proper order and contains the correct path.

""",Closed
"Replace the preset-create-react-app with framework/cra
This framework is what we expect users to use if they use CRA for their app.
This framework has portions of preset-create-react-app copied into it, and is self-containing, it does not reference preset-create-react-app at all. It's also been significantly reduced in complexity, though this means we have to battle-test it. It's likely not compatible with all version of CRA.

I updated all the CRA examples to use this new framework.

I updated the CLI a bit, though this might need more work, I did not test this yet.

Documentation needs more work.

@yannbf raised the question of what this framework should be called.. ""@storybook/cra"" vs ""@storybook/create-react-app""?",Closed
"Before we has a very complex method for getting the webpack config:

We had multiple places where parts of the webpack config (the default one) was defined.
This changed to just 1 place.

We had presets with the propery of webpack that exposed some defaults, and calling webpackFinal and also support for loading a {webpackConfig|webpack.config}.* file, and we had code merging that.

After this PR, this becomes a lot simpler:

All presets expose the webpack property, which receives the default webpack config (that already has everything basically needed).
Users can expose a webpack property too, it will be loaded last to near last. Users can also expose a webpackFinalproperty, which receives the webpack config after is has been passed through allwebpack` properties.

webpackFinal will be invoked last.
Presets could set that up as well, which would lead to the base config being discarded/replaced (this is needed for CRA and presumably next), but the user's main.js exposing a webpackConfig will always run last, and can overload whatever they want, and always receive the config that would otherwise be passed into webpack.

Storybook will never magic-load any webpack config files, so the feature of loading {webpackConfig|webpack.config}.* files is removed here.",Closed
"WithState or withState can be used to wrap a component and inject into it prop values coming from change handlers: import { storiesOf, action, withState, WithState } from '@kadira/storybook' storiesOf('ui.ButtonGroup', module) .add('segmented control', () => <WithState handlers={{ onButtonSelected: 'activeId' }}> <ButtonGroup type=""segmentedControl"" activeId={ 1 } items={ [ { id: 1, name: 'One' }, { id: 2, name: 'Two' } ] } onButtonSelected={ action('onButtonSelected') } /> </WithState> ) .add('tabbed pane', withState({ onButtonSelected: 'activeId' }, () => <ButtonGroup type=""tabbedPane"" activeId={ 1 } items={ [ { id: 1, name: 'One' }, { id: 2, name: 'Two' } ] } onButtonSelected={ action('onButtonSelected') } /> ))",Closed
"Allow to import react components from files with .jsx extensions. For instance, import components defined in index.jsx. $ ls components compA/index.jsx compB.jsx import React from 'react'; import { storiesOf, action } from '@kadira/storybook'; import { CompA } from '../components/compA'; storiesOf('CompA', module) .add('default', () => ( <CompA /> )); Also, it's useful for transitive dependency: // compA.jsx import CompB from ""../compB"" class CompA extends React.Component { render() { return ( <CompB /> ) } }",Closed
This will fix #293. The module find-babel-config searches for the closest babel configuration (.babelrc or babel in package.json) starting in a specified directory. I've tested the code against the react-storybook-demo and everything looks fine. I checked that the path was correct and the check inConfigDir is also correct based on the found configuration.,Closed
"A better solution for storybook-eol/storybook-ui#14 This gives you more control over the data logged in the action logger. You can modify or pick the data from the arguments according to your needs. This is how you can use an action decorator : import React from 'react'; import { storiesOf } from '@kadira/storybook'; import MyComponent from '../my_component'; storiesOf('MyComponent', module) .addActionDecorator((name, args) => args[0]) .add('without props', () => (<MyComponent />)) .add('with some props', () => (<MyComponent text=""The Comp""/>)); You can also change the returned value based on action name. Note: Make sure you return a valid data structure. Values like 'LOG' + args or args[0] + ', ' + args[1] won't work for now.",Closed
"Following the suggestion by @arunoda in #197 - to expose a render API to allow stories to re-render themselves. This is a rough first attempt. I've simply added a render function to the context object passed to the story. I'd like to hear peoples thoughts, what is good, what is bad about this approach. I'm not all that familiar with this codebase but would find this addition helpful. Thanks",Closed
"This version is not covered by your current version range. Without accepting this pull request your project will work just like it did before. There might be a bunch of new features, fixes and perf improvements that the maintainers worked on for you though. I recommend you look into these changes and try to get onto the latest version of eslint-config-airbnb. Given that you have a decent test suite, a passing build is a strong indicator that you can take advantage of these changes by merging the proposed change into your project. Otherwise this branch is a great starting point for you to work on the update. Do you have any ideas how I could improve these pull requests? Did I report anything you think isn’t right? Are you unsure about how things are supposed to work? There is a collection of frequently asked questions and while I’m just a bot, there is a group of people who are happy to teach me new things. Let them know. Good luck with your project ✨ You rock!",Closed
"This version is not covered by your current version range. Without accepting this pull request your project will work just like it did before. There might be a bunch of new features, fixes and perf improvements that the maintainers worked on for you though. I recommend you look into these changes and try to get onto the latest version of eslint-config-airbnb. Given that you have a decent test suite, a passing build is a strong indicator that you can take advantage of these changes by merging the proposed change into your project. Otherwise this branch is a great starting point for you to work on the update. Do you have any ideas how I could improve these pull requests? Did I report anything you think isn’t right? Are you unsure about how things are supposed to work? There is a collection of frequently asked questions and while I’m just a bot, there is a group of people who are happy to teach me new things. Let them know. Good luck with your project ✨ You rock!",Closed
"welcome to automated dependency management with Greenkeeper. To take full advantage of this service I recommend to start out with up-to-date dependencies. I just updated all the dependencies in the package.json file in one go. Please look into these changes and make sure your project still works with them applied. If you can’t update everything right now that’s fine as well. We’ll get there over time. Now that you told me to monitor this project I’ll create a branch for every dependency update, with the new version applied. The branch creation should trigger your testing services to check the new version. Using the results of these tests I’ll try to open meaningful and helpful pull requests, so your dependencies remain working and up-to-date. -  ""underscore"": ""^1.6.0"" +  ""underscore"": ""^1.7.0"" In the above example you can see an in-range update. 1.7.0 is included in the old ^1.6.0 range, because of the caret ^ character . When there is a failure reported for the update I’ll create a pull request so you know about the problem immediately. When it reports success I’ll delete the branch again, because no action needs to be taken – everything is fine. This way every single version update of your dependencies will either continue to work with your project, or you’ll get to know of potential problems immediately ✨ -  ""lodash"": ""^3.0.0"" +  ""lodash"": ""^4.0.0"" In this example the new version 4.0.0 is not included in the old ^3.0.0 range. For version updates like these – let’s call them “out of range” updates – you’ll receive a pull request right away. Now you no longer need to check for exciting new versions by hand – I’ll just let you know automatically. And the pull request will not only serve as a reminder to update. In case it passes your decent test suite that’s a strong reason to merge right away :shipit: Are you unsure about how things are supposed to work? There is a collection of frequently asked questions and of course you may always ask my humans. Good luck with your project and see you soon ✨ 🌴",Closed
"This makes it possible to use react-storybook with webpack 2. For now storybook will pass configuration from .storybook/webpack.config.js to webpack 1 even parent project specified webpack 2 as dependency. This makes storybook to re-use webpack version from parent project instead of introducing its own. It really works, I've tested it on my own project.",Closed
Now we use addons.setPreview and addons.getPreview introduce by the addon api. This allows addons to decorate the preview area. See demo: https://gist.github.com/arunoda/df0b1f83a1189b739b9c3ecfc18e53aa It's also possible to set the completely new preview. But it won't make sense because it can't load the iframe.,Closed
"Making dist webpack file sourcemap debuggable for end users who build on top of react-storybook. This code review addresses issues of #457 Since the react-storybook is used as a toolkit for developers to build custom react components on top of it, changing this option allows a relatively light weight debug friendly version for other developers to build and debug their separate components built/demoed on react-storybook.",Closed
"Webpack chunks details can be too noises, allowing users to pass additional options to disable noise. example webpack file: // you can use this file to add your custom webpack plugins, loaders and anything you like. // This is just the basic way to add addional webpack configurations. // For more information refer the docs: https://getstorybook.io/docs/configurations/custom-webpack-config // IMPORTANT // When you add this file, we won't add the default configurations which is similar // to ""React Create App"". This only has babel loader to load JavaScript. const package = require('../package.json'); const webpack = require('webpack'); module.exports = { plugins: [ // your custom plugins new webpack.NoErrorsPlugin() ], devServer: { stats: 'errors-only', }, module: { loaders: [ { test: /\.js$/, loader: ""eslint-loader"", exclude: /node_modules/ }, { test: /\.css|.scss$/, loader: `style!css?modules&importLoaders=2&sourceMap&localIdentName=${package.config.cssModulePattern}!sass?outputStyle=expanded&sourceMap` } ], }, };",Closed
"Attempts to solve #548 by providing two new api's setKindOrdering and setStoriesOrdering, both take a function argument which is passed to the sorting within story_store.js. This enables the user to chose if alphabetical ordering of kinds and/or stories. In addition I've added a way to provide metadata about kinds and stories which can be used as part of the ordering logic. In general both storiesOf and add now accepts objects as well as strings. Previous syntax is still working though. Story with metadata storiesOf('Kind without metadata') .add('no-metadata', () => (<p>No metadata here</p>)) .add('metadata', { story: () => (<p>No metadata here</p>), additionData: 'metadata' }) Kind with metadata storiesOf({ name: 'Metameta', storyMetadata: 'something something' }) .add('normal', () => (<p>Nothing here</p>)); Fixes: #548",Closed
I'm not entirely sure what the status of moving to webpack 2 is (I did see #637 but it's just a simple dependency change at the moment). I went through the exercise of going through the migration from webpack 1 to webpack 2 steps and attempted to run the demo project after linking. Things seem to work. I'm happy to iterate on this PR if this is work that would be of value for upstream.,Closed
"This allows an arbitrary number of files to be loaded into the iframe, not just the single preview.bundle.js file. Webpack plugins can output chunks in a separate file. In dev, since file names are predictable, I can add the js file into a head.html file. When building storybook statically, however, js files have a hash added to them, so this doesn't work. This change makes the static build parse all webpack chunks and load them in the iframe (excluding the manager script), instead of only including known files.",Closed
"Increase allowable webpack range, for folks using webpack 2, now webpack can be deduped in most cases so the users chosen version is used. This may require that webpack be specified in devDeps as well if you want to test against v1 only related: #556",Closed
"Issue: When running storyshots with a story for a component that uses refs, it will throw a null reference error (see facebook/react#7371) What I did This PR adds the ability to pass options to the react-test-renderer create method, for example to allow mocking refs as per https://facebook.github.io/react/blog/2016/11/16/react-v15.4.0.html#mocking-refs-for-snapshot-testing How to test Run yarn test - ComponentWithRef.stories.js should use the createNodeMock function defined in storyshots.test.js to mock its ref and not fail with a null reference error. The story for ComponentWithRef attempts to get the scrollWidth of a div when the component mounts.",Closed
"Issue: storybook-eol/storybook-ui#62 What I did Enable localStorage to remember position for both displaying down panel on bottom or right. Change function/variables names to be more semantic. (Carried over from storybook-eol/storybook-ui#80) How to test Follow storybook-ui/example/README.md to manual test, should be able to inspect changes in Local Storage from browser developer tool.",Closed
"Upgrade babel-preset-react-app to version 2.x.x, which uses babel-preset-env instead of the deprecated babel-preset-latest. This enables depending modules to get rid of the following warning on npm install (when using the @kadira/storybook module). npm WARN deprecated babel-preset-latest@6.16.0: 💥  preset-latest accomplishes the same task as babel-preset-env. 🙏",Closed
"When attempting to render a component's props in the story source pane – when a component has an object for a prop like style, previewProp() was attempting to render a literal object with the key content, which causes a React error. Seems the intention of the original code was to render the literal characters ""{"" and ""}"" around content. Issue: What I did Changed the final case in previewProp where content was being set as a <span>. Replaced intended functionality to render literal brace characters. How to test Cloned the latest branch and attempted to link addons-info in another project. .addWithInfo('div', () => ( <div style={{ color: 'red' }}>Oops</div> ) Seems passing in any object as ay prop triggers a React error.",Closed
"See (storybook-eol/storyshots#93). Issue: The idea is that early on in a project, when things are changing a lot, snapshot tests are not particularly useful, but it's still helpful to ""smoke test"" all stories to ensure they run without error. What I did I added a noMatchSnapshots option to just setup a test that runs each story, without checking snapshots. How to test Create a project, install storyshots but pass initStoryshots({ noMatchSnapshots: true }). Add a story, run jest. Should pass. Change the component's output, run jest again. Should still pass Make the component error in the render function, run jest again. Should fail. Notes: Perhaps it would make sense to just allow passing a custom test function, to cover off cases like this and storybook-eol/storyshots#76? Then storyshots is more of a generic tool to integrate storybook with Jest. initStoryshots({ test(renderedStory) { // In my case, just render without looking at the result renderer.create(renderedStory).toJSON() // For #76, shallow render + snapshot const tree = shallowToJson(shallow(renderedStory)) expect(tree).toMatchSnapshot() } });",Closed
"What I did Create mobile navigation that will apply when the screen is less than 650px Media query value was based on when the content seemed to best wrap The largest changes involve layout shifts and the creation of a MobileLayout and DesktopLayout to render the appropriate containers and styles All behavior of the LeftPanel and DownPanel should have all expected functionality Introduction of a Collapsible / Accordion component that expands and focuses on the content area. The content should also be expanded when filtering. Increased a11y of the menus by adding href to the anchor tags, this allows them to be keyboard focusable, specifically when tabbing through the interface. UX note I increased the font size of filter input from 14px to 1em (equivalent of 16px). Without this it would cause an unwanted page zoom when focused on the input. I've adjusted the appropriate height and close button styles to reflect appropriately. Future improvements For a future PR would there be any interest in moving to styled-components, glamorous, jsxstyle, fela, etc? Working with purely inline styles is fairly limiting. How to test Deployed the example application with now.sh to: https://example-pzrtwcexit.now.sh Tested with iPhone 7 Plus and it appears to be working as expected Unfortunately, I don't have any other test devices at home. I'll try to get my hands on some Android phones in the office.",Closed
"The version 20.0.0 is not covered by your current version range. Without accepting this pull request your project will work just like it did before. There might be a bunch of new features, fixes and perf improvements that the maintainers worked on for you though. I recommend you look into these changes and try to get onto the latest version of eslint-plugin-jest. Given that you have a decent test suite, a passing build is a strong indicator that you can take advantage of these changes by merging the proposed change into your project. Otherwise this branch is a great starting point for you to work on the update.",Closed
"Issues: #867 #314 ui-#69 step towards: #124 #868 #862 At this moment we can only use keyboard shortcuts and query string to get core functionalities. In some cases, we'd like to do the same via mouse or touch screen. Especially necessary for access from mobile devices What I did 1. Added menu duplicate keyboard shortcuts to the left (stories) panel expanded menu This menu is collapsible (default state): This menu has buttons to navigate within stories / storyKinds Removed `⌘` button from the header of left panel 2. Added floating menu when left panel is hidden Fullscreen mode Hidden left panel Expanse direction 3. Mantra modules API jumpToKind - new API to jump between storyKinds: modules/api/actions floatingBoxOptions - settings of floating menu displaying. Default: floatingBoxOptions: { showFloatingBox: true, floatingBoxPosition: boxPositions.BOTTOM_LEFT, } 4. Added tests for new components How to test Open demo page to test usability. Try it with mobile devices. Clone repo cd packages/storybook-ui npm link cd sample_repo npm link @kadira/storybook-ui npm start storybook Try to use new menu to hide/show left/down panels. Go to fullscreen/normal mode. Navigate through the stories. To change floating menu position set default settings to one of this Run tests cd storybook npm run test All tests should pass",Closed
"This PR replaces: #896 Issue: When running storyshots with a story for a component that uses refs, it will throw a null reference error (see facebook/react#7371) What I did This PR adds the ability to pass options to the react-test-renderer create method, for example to allow mocking refs as per https://facebook.github.io/react/blog/2016/11/16/react-v15.4.0.html#mocking-refs-for-snapshot-testing How to test Run yarn test - ComponentWithRef.stories.js should use the createNodeMock function defined in storyshots.test.js to mock its ref and not fail with a null reference error. The story for ComponentWithRef attempts to get the scrollWidth of a div when the component mounts.",Closed
"What I did ADD 2 more misc repos: lib/database & lib/database-local I'm not sure what these are for and wether we want to continue working with / on them. Addon comments uses this for persistence, but I guess any addon could want persistence.. How to test run unit tests",Closed
"Issue: Previously the dependencies of the react app were leaking into my project What I did set the app/react/package.json to private How to test in an app that uses storybook run yarn install and no longer see the warning below @kadira/storybook > babel-preset-react-app > babel-preset-latest@6.16.0: 💥  preset-latest accomplishes the same task as babel-preset-env. 🙏  Please install it with 'npm install babel-preset-env --save-dev'. '{ ""presets"": [""latest""] }' to '{ ""presets"": [""env""] }'. For more info, please check the docs: http://babeljs.io/docs/plugins/preset-env 👌. And let us know how you're liking Babel at @babeljs on 🐦",Closed
What I did @aaronmcadam Fixed small typo. Also can you add instructions for how to apply this to a whole project from start to finish? do i have to install this as a dev dependency for my project? how is there some typical find *.js | xargs ... command to run this over my entire project?,Closed
Issue: There could be different versions of running in Storybook because some addons don't rely on peer dependencies to get the correct version number. It could be related to this: #986 What I did Updated some package.json How to test Please pull the branch and help me test this in your own storybook to see if there are any issues.,Closed
"I tried adding a tag to my storybook and it didn't work according to old instructions. So I referenced a few projects and it seems that it has changed, i.e. https://github.com/bufferapp/buffer-components/blob/master/.storybook/head.html Issue: What I did How to test",Closed
"Issue: #1218 What I did Equivalent of: yarn create react-native-app crna-getstorybook cd crna-getstorybook getstorybook Plus added a few /* eslint-disable */ for files generated by create-react-native-app which don't follow our coding conventions and added snapshot testing. I did not hook up storybook with the app, per https://github.com/storybooks/storybook/tree/master/app/react-native#create-react-native-app-crna How to test Automated test: yarn bootstrap cd examples/crna-getstorybook yarn test Manual test: yarn bootstrap https://github.com/storybooks/storybook/pull/1219 yarn storybook yarn ios",Closed
Issue: What I did This simply adds a line of css to react (and not native since it's not through a browser) to get rid of the visually disturbing outline that shows when you click on hyperlinks. How to test You'll simply not see the box shadow anymore.,Closed
"Issue: #1220 What I did Resurrect kitchen sink only PR to decouple it from all the RN disasters going on in the previous PRs renamed cra-storybook => cra-kitchensink added notes, info, knobs, options, centered addon examples to cra-kitchensink. How to test npm install && npm run boostrap cd examples/cra-kitchensink npm run storybook",Closed
"Issue: #1266 (comment) getstroybook should provide the simplest and hackable code sample What I did I take the same js files from src and put them into the dist without babel compilation. Then getstorybook uses them with templates. So we'll have the source code of these components in our project after getstorybook. (Same behavior for users, but with the only source of code) How to test cd \lib\components npm link cd lib\cli npm link @storybook\components npm link cd my_test_getstorybook create-react-app sample cd sample npm link @storybook\cli where getstorybook node_modules\.bin\getstorybook -f yarn add glamorous glamor npm run storybook",Closed
"Issue: #1220 #1218 What I did Combined two broken PR's into one super-broken PR just so it's all in one place: #1219 #1224 renamed cra-storybook => cra-kitchen-sink added notes, info, knobs, options, centered addon examples to cra-kitchen-sink. renamed react-native-vanilla => react-native-getstorybook (which used to work on my machine, but no longer does) added crna-getstorybook (which used to work on my machine, but no longer does) changed react-native-getstorybook to use lerna bootstrapping How to test npm install && npm run boostrap cd examples/<example> npm run storybook For react-native: react-native run-ios For crna: npm run ios What I need move anything interesting from test-cra into cra-kitchen-sink help with react-native",Closed
Issue: broken UI widgets caused by multiple instances of react during development What I did Add a webpack resolve for react so it's always loaded from a single place How to test bootstrap run storybook kitchensink open button knobs story use color and datetime picker,Closed
"Without accepting this pull request your project will work just like it did before. There might be a bunch of new features, fixes and perf improvements that the maintainers worked on for you though. I recommend you look into these changes and try to get onto the latest version of husky. Given that you have a decent test suite, a passing build is a strong indicator that you can take advantage of these changes by merging the proposed change into your project. Otherwise this branch is a great starting point for you to work on the update.",Closed
Moving lib/ui to redux What I'm moving the ui to redux and adding some features in the meantime. This work is both an experiment and possibly sth we can merge later on. Why Will make contributions easier Match the preview stack This PR might give people an idea of the inner workings of storybook Open discussions about APIs if needed :) I'm mostly doing it to understand storybook better and see what we can improve or not ^^,Closed
"What I did I started experimenting with decoratorless addons after a discussion with @ndelangen. I tried it out and could knobs ""work"" (only updating values no reset etc) with a decorator. I think that's pretty cool, and we should maybe add it to the api somehow as a good practice pattern. My opinion is that with such an approach. We can lift the refreshing need etc in the api and let user use our addons without too much thinking. If they really need a decorator that should be for a specific use case (theme etc) that maybe we should let the user handle on it's own. This is just an experiment but might be worse thinking about for the addon api v2 😄",Closed
"What I did Fixed bug in components refactor. Now getstorybook needs to add a @storybook/components dependency when it runs, otherwise the components are not found. How to test yarn install && yarn bootstrap cd .. yarn create react-app testapp cd testapp ../storybook/lib/cli/bin/generate.js yarn storybook open http://localhost:9009",Closed
"What I did I changed the notes addon to be usable as a simple function. This brings some cool benefits: The user can call the function anytime during the story life cycle (e.g update notes on an event in the story) No need to wrap the story (cleaner for the user) @shilman @ndelangen If you like it we can I'll merge into vue to bring it for the Vue release Somewhat related, I'd like your thoughts on this idea (gist) => Make addon API available in props Cheers!",Closed
Issue: #1305 What I did Updated PropVal.js to pass its props to child elements in case of arrays and objects. How to test Render a story using addWithInfo with a component that receives an array or an object as a prop. Open console to verify you no longer receive errors due to properties validation for PropVal component.,Closed
"issue: #428 What I did 1. Add new mantra module to @storybook/ui (src/modules/theming/) to provide theming API: selectTheme(themeName: string) selects the current theme getTheme(): object returns current theme object getThemesList(): arrayOf(strings) returns names of loaded themes setTheme(theme: object) adds new or updates existing theme 2. Add public API defaultState.uiOptions.currentTheme to @storybook/ui available as: import { setOptions } from '@storybook/addon-options'; setOptions({currentTheme: 'default'}); 3. Consolidate all UI colors style settings in src/modules/theming/themes default.js - the current UI style (not changed) dark.js - dark UI style (the new one) 4. Pass theme data to all UI components via react-komposer (src/modules/ui/libs/gen_podda_loader.js). So it updates automatically on any change. UI Components can access it as a theme prop. 5. Make all style... objects depend on the theme data 6. Create ""Dark"" theme, while ""Default"" theme keeps current appearance. How to test 1. Github pages: https://usulpro.github.io/storybook-themable (here is an example of dynamic theme switching. We can use setOptions in the config.js as well) 2. Checkout theming-support-#428 branch and: $ npm install $ npm run bootstrap $ cd examples/cra-kitchen-sink $ npm run storybook you can set currentTheme by setOptions({currentTheme: 'dark'}); 3. In order to test mantra module API you can do follow steps: uncomment the line in src/modules/theming/index.js console.log('UI API:', _actions); in chrome console: right click on 'UI API:' and 'Store as GlobalVariable' api = temp1; api.theming.getTheme(); api.theming.selectTheme('dark'); newTheme = api.theming.getTheme(); newTheme.name = 'new'; api.theming.setTheme(newTheme); api.theming.getThemesList(); api.theming.selectTheme('new'); newTheme.palette.canvas = 'green'; newTheme.palette.background = 'darkgreen'; What next The aim of this PR is mainly to provide the API for theming support and pass (UI library agnostic) theme data to UI components. By adding this we're stepping towards to: creation new built-in themes or improving existing ones rethink what styles/data should be included in theme objects provide a pluggable way to add new custom themes",Closed
"What I did Added children styles to the div that contains the story content when rendering inline. How to test Provide configuration like the following toaddWithInfo() or globally: { inline: true, styles: stylesheet => { stylesheet.children = { textAlign: 'center', border: '1px dashed #beeed2', padding: '16px', background: '#fafdfb' } return stylesheet } }",Closed
"Add simple API for switching storyKinds to the Multistory Mode by adding : to storyKind example: storiesOf('Buttons:', module) .add('normal small', ...) .add('normal big', ...) .add('normal enormous', ...) will show all stories on one preview page. All stories still are selectable in the Stories Panel. You can use decorators to customize how each story will look. It works on any hierarchy level as well: storiesOf('Buttons:.normal', module) .add('normal small', ...) .add('normal big', ...) .add('normal enormous', ...); storiesOf('Buttons:.accent', module) .add('accent small', ...) .add('accent big', ...) .add('accent enormous', ...); will create a common Buttons page with both normal and accent buttons How to test Github Page: https://github.com/UsulPro/storybook-multistory run cra-kitchen-sink example",Closed
These steps have been made the react app and the react-native app. Add babel-preset-babili and babili-webpack-plugin to package.json Add preset for production environment in .babelrc Replace UglifyJS plugin in webpack.prod.js I have added the preset as well as the plugin due to issues with babili-webpack-plugin and dynamic imports or blocks of dead code. Running each file though the preset prevents these whereas the plugin will optimize the complete bundle including node_modules. How to test Create a production build.,Closed
"Making dist webpack file sourcemap debuggable for end users who build on top of react-storybook. This code review addresses issues of #457 Since the react-storybook is used as a toolkit for developers to build custom react components on top of it, changing this option allows a relatively light weight debug friendly version for other developers to build and debug their separate components built/demoed on react-storybook.",Closed
"When attempting to render a component's props in the story source pane – when a component has an object for a prop like style, previewProp() was attempting to render a literal object with the key content, which causes a React error. Seems the intention of the original code was to render the literal characters ""{"" and ""}"" around content. Issue: What I did Changed the final case in previewProp where content was being set as a <span>. Replaced intended functionality to render literal brace characters. How to test Cloned the latest branch and attempted to link addons-info in another project. .addWithInfo('div', () => ( <div style={{ color: 'red' }}>Oops</div> ) Seems passing in any object as ay prop triggers a React error.",Closed
"The idea is that early on in a project, when things are changing a lot, snapshot tests are not particularly useful, but it's still helpful to ""smoke test"" all stories to ensure they run without error. What I did I added a noMatchSnapshots option to just setup a test that runs each story, without checking snapshots. How to test Create a project, install storyshots but pass initStoryshots({ noMatchSnapshots: true }). Add a story, run jest. Should pass. Change the component's output, run jest again. Should still pass Make the component error in the render function, run jest again. Should fail. Notes: Perhaps it would make sense to just allow passing a custom test function, to cover off cases like this and storybook-eol/storyshots#76? Then storyshots is more of a generic tool to integrate storybook with Jest. initStoryshots({ test(renderedStory) { // In my case, just render without looking at the result renderer.create(renderedStory).toJSON() // For #76, shallow render + snapshot const tree = shallowToJson(shallow(renderedStory)) expect(tree).toMatchSnapshot() } });",Closed
"Create mobile navigation that will apply when the screen is less than 650px Media query value was based on when the content seemed to best wrap The largest changes involve layout shifts and the creation of a MobileLayout and DesktopLayout to render the appropriate containers and styles All behavior of the LeftPanel and DownPanel should have all expected functionality Introduction of a Collapsible / Accordion component that expands and focuses on the content area. The content should also be expanded when filtering. Increased a11y of the menus by adding href to the anchor tags, this allows them to be keyboard focusable, specifically when tabbing through the interface. UX note I increased the font size of filter input from 14px to 1em (equivalent of 16px). Without this it would cause an unwanted page zoom when focused on the input. I've adjusted the appropriate height and close button styles to reflect appropriately. Future improvements For a future PR would there be any interest in moving to styled-components, glamorous, jsxstyle, fela, etc? Working with purely inline styles is fairly limiting. How to test Deployed the example application with now.sh to: https://example-pzrtwcexit.now.sh Tested with iPhone 7 Plus and it appears to be working as expected Unfortunately, I don't have any other test devices at home. I'll try to get my hands on some Android phones in the office.",Closed
"The version 20.0.0 is not covered by your current version range. Without accepting this pull request your project will work just like it did before. There might be a bunch of new features, fixes and perf improvements that the maintainers worked on for you though. I recommend you look into these changes and try to get onto the latest version of eslint-plugin-jest. Given that you have a decent test suite, a passing build is a strong indicator that you can take advantage of these changes by merging the proposed change into your project. Otherwise this branch is a great starting point for you to work on the update.",Closed
"At this moment we can only use keyboard shortcuts and query string to get core functionalities. In some cases, we'd like to do the same via mouse or touch screen. Especially necessary for access from mobile devices What I did 1. Added menu duplicate keyboard shortcuts to the left (stories) panel expanded menu This menu is collapsible (default state): This menu has buttons to navigate within stories / storyKinds Removed `⌘` button from the header of left panel 2. Added floating menu when left panel is hidden Fullscreen mode Hidden left panel Expanse direction 3. Mantra modules API jumpToKind - new API to jump between storyKinds: modules/api/actions floatingBoxOptions - settings of floating menu displaying. Default: floatingBoxOptions: { showFloatingBox: true, floatingBoxPosition: boxPositions.BOTTOM_LEFT, } 4. Added tests for new components How to test Open demo page to test usability. Try it with mobile devices. Clone repo cd packages/storybook-ui npm link cd sample_repo npm link @kadira/storybook-ui npm start storybook Try to use new menu to hide/show left/down panels. Go to fullscreen/normal mode. Navigate through the stories. To change floating menu position set default settings to one of this Run tests cd storybook npm run test",Closed
"When running storyshots with a story for a component that uses refs, it will throw a null reference error (see facebook/react#7371) What I did This PR adds the ability to pass options to the react-test-renderer create method, for example to allow mocking refs as per https://facebook.github.io/react/blog/2016/11/16/react-v15.4.0.html#mocking-refs-for-snapshot-testing How to test Run yarn test - ComponentWithRef.stories.js should use the createNodeMock function defined in storyshots.test.js to mock its ref and not fail with a null reference error. The story for ComponentWithRef attempts to get the scrollWidth of a div when the component mounts.",Closed
"What I did Added notes, info, knobs, options to the test-cra and cra-storybook examples. test-cra tries to simulate what a user would see installing these packages but based on file links cra-storybook is uses lerna bootstrap to install the dependencies and is easier to develop on What I found info and knobs are apparently broken. info shows an error in the preview window. this also causes our test suite to fail (yay?!) knobs shows up but editing is broken (URL is not updated properly) Update: info works on all platforms? knobs is fixed based on @ndelangen 's fix below What I need any feedback on existing scenarios contributions for events, graphql addons are the bugs i'm seeing actually bugs? How to test npm run bootstrap cd examples cra-storybook npm run storybook cd ../test-cra npm install npm run storybook",Closed
"Equivalent of: yarn create react-native-app crna-getstorybook cd crna-getstorybook getstorybook Plus added a few /* eslint-disable */ for files generated by create-react-native-app which don't follow our coding conventions and added snapshot testing. I did not hook up storybook with the app, per https://github.com/storybooks/storybook/tree/master/app/react-native#create-react-native-app-crna How to test Automated test: yarn bootstrap cd examples/crna-getstorybook yarn test Manual test: yarn bootstrap https://github.com/storybooks/storybook/pull/1219 yarn storybook yarn ios",Closed
What I did This simply adds a line of css to react (and not native since it's not through a browser) to get rid of the visually disturbing outline that shows when you click on hyperlinks. How to test You'll simply not see the box shadow anymore. screen shot 2017-06-15 at 4 50 09 pm Where previously you could: screen shot 2017-06-15 at 5 01 29 pm,Closed
"Resurrect kitchen sink only PR to decouple it from all the RN disasters going on in the previous PRs renamed cra-storybook => cra-kitchensink added notes, info, knobs, options, centered addon examples to cra-kitchensink. How to test npm install && npm run boostrap cd examples/cra-kitchensink npm run storybook",Closed
"getstroybook should provide the simplest and hackable code sample What I did I take the same js files from src and put them into the dist without babel compilation. Then getstorybook uses them with templates. So we'll have the source code of these components in our project after getstorybook. (Same behavior for users, but with the only source of code) How to test cd \lib\components npm link cd lib\cli npm link @storybook\components npm link cd my_test_getstorybook create-react-app sample cd sample npm link @storybook\cli where getstorybook node_modules\.bin\getstorybook -f yarn add glamorous glamor npm run storybook",Closed
"Combined two broken PR's into one super-broken PR just so it's all in one place: #1219 #1224 renamed cra-storybook => cra-kitchen-sink added notes, info, knobs, options, centered addon examples to cra-kitchen-sink. renamed react-native-vanilla => react-native-getstorybook (which used to work on my machine, but no longer does) added crna-getstorybook (which used to work on my machine, but no longer does) changed react-native-getstorybook to use lerna bootstrapping How to test npm install && npm run boostrap cd examples/<example> npm run storybook For react-native: react-native run-ios For crna: npm run ios What I need move anything interesting from test-cra into cra-kitchen-sink help with react-native",Closed
Moving lib/ui to redux What I'm moving the ui to redux and adding some features in the meantime. This work is both an experiment and possibly sth we can merge later on. Why Will make contributions easier Match the preview stack This PR might give people an idea of the inner workings of storybook Open discussions about APIs if needed :) I'm mostly doing it to understand storybook better and see what we can improve or not ^^,Closed
"What I did I started experimenting with decoratorless addons after a discussion with @ndelangen. I tried it out and could knobs ""work"" (only updating values no reset etc) with a decorator. I think that's pretty cool, and we should maybe add it to the api somehow as a good practice pattern. My opinion is that with such an approach. We can lift the refreshing need etc in the api and let user use our addons without too much thinking. If they really need a decorator that should be for a specific use case (theme etc) that maybe we should let the user handle on it's own. This is just an experiment but might be worse thinking about for the addon api v2 😄",Closed
"What I did Fixed bug in components refactor. Now getstorybook needs to add a @storybook/components dependency when it runs, otherwise the components are not found. How to test yarn install && yarn bootstrap cd .. yarn create react-app testapp cd testapp ../storybook/lib/cli/bin/generate.js yarn storybook open http://localhost:9009",Closed
"I changed the notes addon to be usable as a simple function. This brings some cool benefits: The user can call the function anytime during the story life cycle (e.g update notes on an event in the story) No need to wrap the story (cleaner for the user) @shilman @ndelangen If you like it we can I'll merge into vue to bring it for the Vue release Somewhat related, I'd like your thoughts on this idea (gist) => Make addon API available in props Cheers!",Closed
"1. Add new mantra module to @storybook/ui (src/modules/theming/) to provide theming API: selectTheme(themeName: string) selects the current theme getTheme(): object returns current theme object getThemesList(): arrayOf(strings) returns names of loaded themes setTheme(theme: object) adds new or updates existing theme 2. Add public API defaultState.uiOptions.currentTheme to @storybook/ui available as: import { setOptions } from '@storybook/addon-options'; setOptions({currentTheme: 'default'}); 3. Consolidate all UI colors style settings in src/modules/theming/themes default.js - the current UI style (not changed) dark.js - dark UI style (the new one) 4. Pass theme data to all UI components via react-komposer (src/modules/ui/libs/gen_podda_loader.js). So it updates automatically on any change. UI Components can access it as a theme prop. 5. Make all style... objects depend on the theme data 6. Create ""Dark"" theme, while ""Default"" theme keeps current appearance. How to test 1. Github pages: https://usulpro.github.io/storybook-themable (here is an example of dynamic theme switching. We can use setOptions in the config.js as well) 2. Checkout theming-support-#428 branch and: $ npm install $ npm run bootstrap $ cd examples/cra-kitchen-sink $ npm run storybook you can set currentTheme by setOptions({currentTheme: 'dark'}); 3. In order to test mantra module API you can do follow steps: uncomment the line in src/modules/theming/index.js console.log('UI API:', _actions); in chrome console: right click on 'UI API:' and 'Store as GlobalVariable' api = temp1; api.theming.getTheme(); api.theming.selectTheme('dark'); newTheme = api.theming.getTheme(); newTheme.name = 'new'; api.theming.setTheme(newTheme); api.theming.getThemesList(); api.theming.selectTheme('new'); newTheme.palette.canvas = 'green'; newTheme.palette.background = 'darkgreen'; What next The aim of this PR is mainly to provide the API for theming support and pass (UI library agnostic) theme data to UI components. By adding this we're stepping towards to: creation new built-in themes or improving existing ones rethink what styles/data should be included in theme objects provide a pluggable way to add new custom themes",Closed
"Added children styles to the div that contains the story content when rendering inline. How to test Provide configuration like the following toaddWithInfo() or globally: { inline: true, styles: stylesheet => { stylesheet.children = { textAlign: 'center', border: '1px dashed #beeed2', padding: '16px', background: '#fafdfb' } return stylesheet } }",Closed
These steps have been made the react app and the react-native app. Add babel-preset-babili and babili-webpack-plugin to package.json Add preset for production environment in .babelrc Replace UglifyJS plugin in webpack.prod.js I have added the preset as well as the plugin due to issues with babili-webpack-plugin and dynamic imports or blocks of dead code. Running each file though the preset prevents these whereas the plugin will optimize the complete bundle including node_modules. How to test Create a production build. fixes #1005,Closed
"What I did Add simple API for switching storyKinds to the Multistory Mode by adding : to storyKind example: storiesOf('Buttons:', module) .add('normal small', ...) .add('normal big', ...) .add('normal enormous', ...) will show all stories on one preview page. All stories still are selectable in the Stories Panel. You can use decorators to customize how each story will look. It works on any hierarchy level as well: storiesOf('Buttons:.normal', module) .add('normal small', ...) .add('normal big', ...) .add('normal enormous', ...); storiesOf('Buttons:.accent', module) .add('accent small', ...) .add('accent big', ...) .add('accent enormous', ...); will create a common Buttons page with both normal and accent buttons How to test Github Page: https://github.com/UsulPro/storybook-multistory run cra-kitchen-sink example",Closed
"#766 and other discussions We want to apply not only one addon for a story Addons like .addWithX don't allow addons composition What we have at this moment: We started to move from addons like .addWithX to addons like withX() withX() in general has such API: withX(...props) { /* return storyFn(context) => <Story /> */ } At this moment we have withInfo and addonNotes. And we can compose them this way: .add('addons composition', withInfo('with info')(addonNotes({ notes: 'with notes' })(() => <button>click me</button>)) ) It's much better but we still have issues with this: a. It looks like a kind of ""callbacks hell"" when we need to compose several addons b. withX() should have such structure: const withX = (...props) => { return getStory => (context) => { return getStory(context); }; }; We have current API for .add() storiesOf(...) .add(name, (context) => <Story />) where context is an object: { story, kind }. Usually, we omit context: add(name, () => <Story />) and decorators API is: storiesOf(...) .addDecorator((storyFn, context) => { /* return storyFn(context) */ }) What we want: Convenient and flexible way for applying addons Easy approach for creating new addons Proposal: Use this way for addons applying: storiesOf('Button', module) .add('with addons', context => context .storyOf(<Button>Press me</Button>) .withBorder('red') .withNotes('Addons composition') .withInfo('Addons composition', { inline: false }) ) .add('single story', () => <Button>Hello Button</Button>) It shouldn't break the existing API and should be backward compatible. Actually, this approach still keeps the same API: storiesOf(...) .add(name, (context) => <Story />) Start creating addons functions with such structure: const withX = (storyFn, context, ...props) => { /* return storyFn(context) */ } Here withX just returns new component and do some side effects. Possibly we don't want to expand storybook API surface and change Storybook code as well ;-) What I did: I just created an addon to implement this behavior! :) It works this way: // config.js import { configure, setAddon } from '@storybook/react'; import getAddons from './addon-composition'; setAddon(getAddons); // stories.js import { withInfo } from '@storybook/addon-info'; import { withNotes } from '@storybook/addon-notes'; // Let's create a simple addon as an example: const withBorder = (storyFn, context, bcolor) => // the first two arguments should be storyFn and context <div style={{ padding: 6, border: `${bcolor} solid 2px` }}> {storyFn()} </div>; storiesOf('Button', module) .getAddons(withInfo, withNotes, withBorder) // <-- pass addons we want to use .add('with addons', context => context .storyOf(<Button>Press me!</Button>) // <-- the story and addons below: .withNotes('Addons composition') .withBorder('red') .withInfo('Addons composition', { inline: false }) ) .add('with text', () => <Button>Hello Button</Button>) // <-- usual stories .add('with some emoji', () => <Button>😀 😎 👍 💯</Button>) In this example we create a <Button> and applying addon in the following order: withNotes withBorder withInfo We can add normal stories to the same storiesOf - they will work as usual The pros of this approach It's backward compatible with existing API Easy to compose addons, change addons order, disable/enable addons. Addons with such structure could be easily turned to decorators: storiesOf('Button', module) .addDecorator((storyFn, context) => withX(storyFn, context, ...props)) We can create a composition of not only addons but stories as well. For that we can pass a function to context.storyOf it will be invoked with an argument prevStory - the result of previous execution of context.storyOf: storiesOf('Button', module) .getAddons(withInfo, withNotes, withBorder) .add('with addons', context => context .storyOf(<Button>Press me!</Button>) .withJSX() .storyOf(prevStory => <div> Press this button: {prevStory} </div> ) In this example withJSX() shows details of <Button> while we see the button wrapped into div. Even if withJSX() change the story somehow, prevStory will be the clean value passed directly from previous storyOf. I guess it's a quite unusual feature and may be discussed in a separate issue. How to test Run cra-kitchen-sink Play with the example: change an order of addons put addons to decorators write your own addon :) src of addon: examples/cra-kitchen-sink/.storybook/addon-composition.js example: examples/cra-kitchen-sink/src/stories/index.js Additional I guess one point could confuse in this addon implementation: storiesOf('Button', module) .getAddons(withInfo, withNotes, withBorder) // <-- if we don't want to do it for every storiesOf maybe more convinient could be to do it ones in config.js: // config.js import { configure, setAddon } from '@storybook/react'; import { withInfo } from '@storybook/addon-info'; import { withNotes } from '@storybook/addon-notes'; import getAddons from './addon-composition'; setAddon(getAddons(withInfo, withNotes)); // <-- but for that, we need a feature in setAddon API to execute a function when storiesOf is creating (something like 'constructor' for classes). This feature is introduced in this PR: #1463",Closed
"The current API: setAddon({ addonA(), addonB() }) It adds addons to storiesOf() object and they accessible as methods: storiesOf(...) .addonA() .addonB() Why we need new API Sometimes we want to implement some features or some behavior to storiesOf() to have it by default. This would open up a plenty new directions in the addons creation! What I did Just allow passing into setAddon functions matching /^_init/ and make them executed right after storiesOf() is created. This is a backward compatible change, addons with normal names still work the same. New API setAddon({ addonA(), addonB(), _initSmth() }) when you create: storiesOf(...) .addonA() .addonB() _initSmth() will not be accessible as a method of storiesOf() but it will be already executed How to test run cra-kitchen-sink check out the Toc first story of each storyKind (it just an example of how it works) check that other addons work as usual",Closed
"JSX elements within prop values are now rendered completely (in Story Source and Prop Table). The behaviour can be reverted by configuring showSourceOfProps: false. This yields some errors in the source code generation (with indentation). I think it would be easier to do the JSX source generation outside of React components since there are a lot of ""inverted"" dependencies. Rendering the parent depends often on whether the child has multiple lines of code or just a single one. There is some paddingLeft used for indentation currently what breaks copy & paste behaviour. I think some of the issues outlined could be fixed by using paddingLeft in some cases but I'd rather not do that (because copy & paste).",Closed
"Breaking change Issue: Using knobs is currently confusing. Example, for complex strings and null values select('My Select', { none: null, // renders empty item [`Computed key`]: 'computed', 'Some kind of long sentence. This is ok, mainly just looks odd as a key': 'sentence', }) What I did Use value as value Still uses key for the key property on each <option> How to test select('My Select', { Empty: null, 'First item': 'The first item selected', second: `The item with key 'second' is selected` }) Will add some tests. Is there a preference between __tests__ folder and *.test.js?",Closed
"Issue: Every time when I commit anything, lintstage tried to ""npm run lint:js -- --fix"" and despite cache, it fixes a lot of additional files This becomes a challenge when happens constantly how to reproduce: check out release/3.2 branch change any file commit git status What I did Just a single commit to provoke a prettier to auto fix other files How to test change a file commit",Closed
Flow typed components cannot be added to Storybooks easily without defining a new .babelrc. We only need to include a babel plugin to make it work so I think it's worth the extra package. What I did Added babel-preset-flow to the default .babelrc and How to test Example app has a FlowButton,Closed
"This addon solves the issue by displaying qr code, so user can simply point the phone to it to pair. What I did Added new event when new channel is created. This addon listens to it and uses the pairedId code for qr component. Example https://expo.io/@gongreg/rn-storybook-hosted-client-example Server: https://vast-eyrie-45947.herokuapp.com/ (takes ~30s to load because heroku shuts it down).",Closed
"See https://storybooks.slack.com/archives/C4Q0S3MQR/p1503243475000043 I've added only those bootsrappers, lack of which produced issues for me. Maybe it's worth to add some more (or remove bootstrap:docs) The issues I faced are: In, Stricter linting rules for imports #1676, the only reason we can't promote import/extensions to ""error"" level is that packages highlight.js and fuse.js are treated by this rule as local files unless they're actually installed In Use Flow instead of prop-types in lib/components #1696, I have to add dependencies to eslint-plugin-flowtype, eslint-plugin-flowtype-errors, and flow-bin to root package instead of lib/components so that they're installed with simple yarn install without bootstrapping The main problem is that all those issues are discoverable only when it actually fails on CI (unless you run yarn bootstrapp -- --reset before each commit, after you made the changes)",Closed
"This came up in: #1501 A node_module we want to use has not been transpiled to es5 before publishing. We could add the module to be run through babel, or we could do this: Switch over to an alternative minifier. This PR swaps UglifyJS for Babel-Minify. Why? Well the browsers we target actually support 90%+ of ES6+. Transpiling down Related issue: #1005 This only affects static builds! How to test Run yarn build-storybook on cra-kitchen-sink Serve the static site What about bundle size? 1.396.924 bytes (1,4 MB on disk) That's down considerably from before: 2.032.284 bytes (2 MB on disk)",Closed
"WIP This is an example project for hosted version of RN storybook. Video: https://www.youtube.com/watch?v=cKNEnRfO2rk It allows to separately start storybook server somewhere/create a app with storybook. Then you start storybook app, point the phone to qr code, and storybook server/client connect to each other. Why would somebody need this? IT can work greatly for some kind of ui lib. User downloads your ui lib see what component you have, and then you can allow him to play with it more, by telling him to go to some website, scan qr code and play with storybook. That way user doesn't have to check out your project, download npm dependencies, and start storybook to play with it. For this example to work I need: #1639, #1407 merged I added this pr so I could discuss about it in slack.",Closed
"Welcome to dependencies.io! This PR contains an initial dependencies.yml configuration to get you started. It is based off a few files that we detected in your repo and officially support. This is really just meant to get you started though, so be sure to check out our docs to get an idea for all the other dependencies you have that can be painlessly managed with dependencies.io! https://www.dependencies.io/docs/ When the PR is merged, we'll automatically start your first build.",Closed
"Issue: displayed story source did not reflect actual usage for function props. Current version shows someProp={myCallback()} or someProp={anonymous()}, which, while it indicates that it is a function, implies that the function is called and the result used as the prop to anyone reading it as JSX. What I did Tweaked output to now display someProp={myCallback} or someProp={anonymousFunction}. This is still very distinct from any other type: bool: someProp string: someProp=""foo"" number: someProp={3} object: someProp={{foo: ""foo""}} component/element: someProp={<Foo />} array: someProp={[""foo"", ""bar""]} How to test Is this testable with jest or storyshots? Yes, but neither appear to be used within the addon/info directory. The result of running npm test within examples/cra-kitchen-sink indicated two unrelated storyshot changes, and not the one I would expect, so I suspect it has not been maintained correctly for use with the info addon. I'm not much of a storyshotter, so happy to follow any guidance on this. Does this need a new example in the kitchen sink apps? No Does this need an update to the documentation? Yes, specifically addons/info/docs/home-screenshot.png. I do not have access to a Macbook to generate an accurate screenshot, however. If your answer is yes to any of these, please make sure to include it in your PR.",Closed
Work In Progress New layout system: This introduced a new core principle for storybook called 'layout'. This can be set via a config.js or perhaps in the future could be set per story basis. goals: a config that describes the layout implement config => render support fullscreen switching support switching addonPanel support switching storiesPanel write fantastic unittests for great covefe stretch goals allow setting of additional props expose a list of default layouts importable for users expose some utilities to help manage layouts get global config from config.js allow local config from story allow modifying config at runtime long stretch goals persist changes setting on where to persist (localstorage / config) deal with discrepancies between local changes and config change,Closed
"Issue: react-modal needs to be ^3 as this is one of the dependencies that has a react peerdep. ^3 unlocks react16 as a peerdep What I did bumped react-modal How to test Is this testable with jest or storyshots? Does this need a new example in the kitchen sink apps? Does this need an update to the documentation? If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"In certain configurations Storybook might log the whole Webpack build object when warnings or errors are thrown. This was caused by a logger.error call inside the index.js catch. What I did This fixes by logging the error only when it's an instance of an error. How to test This branch was tested on https://github.com/pagarme/pilot. Before this changes, if an error happens while compiling (e.g. imported file not found) a big object is logged: screenshot from 2017-10-24 11-31-24 Resolves #1889. Is this testable with jest or storyshots? Nope. Does this need a new example in the kitchen sink apps? Nope. Does this need an update to the documentation? Nope. If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Well I attempted to fix by updating angular and the angular-cli to latest versions, it seems to change the behavior, so it's worth a shot. Maybe this fixes things. Also added a flag to the typescript compiler options to: https://github.com/Microsoft/TypeScript/wiki/What's-new-in-TypeScript#new---skiplibcheck How to test run the bootstrapping sequence for core run the angular example (this seems to throw some warnings but it does function correctly) run the test including cli",Closed
"If you clone the repository and only run yarn install in the /docs directory and not in the root (/) directory, you get the following error. ReferenceError: Unknown plugin ""transform-runtime"" specified in ""/Users/_name_/Documents/personal/projects/storybook/.babelrc"" at 0, attempted to resolve relative to ""/Users/_name_/Documents/personal/projects/storybook"" What I did Documented the dependency need in hopes of helping future users avoid the ReferenceError",Closed
"Issue: the shape of the node_modules might be different so when resetting node_modules What I did How to test Is this testable with jest or storyshots? Does this need a new example in the kitchen sink apps? Does this need an update to the documentation? If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Currently, our build process requires us to take some additional steps for React Native, which slows the development process. The goal here is to get React Native working with yarn workspaces. Checklist Implement Haul in react native vanilla Implement Haul in crna Update package.json in root directory Update package.json in example apps What I did Updated package.json in examples/crna-kitchen-sink and examples/react-native-vanilla How to test Is this testable with jest or storyshots? Yes (existing tests should cover it) Does this need a new example in the kitchen sink apps? No Does this need an update to the documentation? No If your answer is yes to any of these, please make sure to include it in your PR. Screenshots",Closed
"In my setup, I always have a cases.spec.js that contains different props for my components. This file provides cases scenarios for both unit tests and storybook. With that in place, my components always have a standard stories.js file next to it, that looks like that: import React from 'react'; import { storiesOf } from '@storybook/react'; import Component from './component'; import cases from './cases.spec.js'; const stories = storiesOf('Category Icon Hover Menu', module) for (const [caseName, caseData] of cases) { stories.addCentered(caseName, () => ( <Component {...caseData} /> )); } I like organising the project like this because I get storybook ""for free"" while writing tests. However, the multiSnapshotWithOptions does not work the way I intended with such setup. I don't like that it always create a __snapshots__ folder with a single file on it. screen shot 2017-11-30 at 13 25 24 The alternative I rewrote getStoryshotFileName to use the stories kind and name instead of the original filename: screen shot 2017-11-30 at 13 31 20 The API is quite simple: import initStoryshots, { snapshotPerStoryAdded, snapshotPerStoryFile  } from '@storybook/addon-storyshots'; initStoryshots({ // filesPattern: snapshotPerStoryAdded, filesPattern: snapshotPerStoryFile, }); with that I also killed the multiSnapshotWithOptions. I hope nobody minds 😄",Closed
"What I did Accessibility tests warn that the HTML element requires a lang attribute. See: https://dequeuniversity.com/rules/axe/2.4/html-has-lang?application=AxeChrome Ideally the lang attribute's value would be set to whatever language the user is using for Storybook, but that would require adding configuration, so this seems like a short term fix that addresses the immediate issue. How to test Run accessibility tests on the iframe and find that they no longer warn about the HTML lang attribute.",Closed
"This is not currently working What I did Allowed force render to be called via addonAPI.forceReRender ToDo: Manually test Automated tests Update current docs site Update new docs site How to test Is this testable with jest or storyshots? Does this need a new example in the kitchen sink apps? possibly Does this need an update to the documentation? Yes, for addons api If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"This is not currently working What I did Allowed force render to be called via addonAPI.forceReRender ToDo: Manually test Automated tests Update current docs site Update new docs site How to test Is this testable with jest or storyshots? Does this need a new example in the kitchen sink apps? possibly Does this need an update to the documentation? Yes, for addons api If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"This is not currently working What I did Allowed force render to be called via addonAPI.forceReRender ToDo: Manually test Automated tests Update current docs site Update new docs site How to test Is this testable with jest or storyshots? Does this need a new example in the kitchen sink apps? possibly Does this need an update to the documentation? Yes, for addons api If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Issue: sponsor link is not working What I did remove the not working link How to test check the readme Is this testable with jest or storyshots? no Does this need a new example in the kitchen sink apps? no Does this need an update to the documentation? yes If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Issue: sponsor link is not working What I did remove the not working link How to test check the readme Is this testable with jest or storyshots? no Does this need a new example in the kitchen sink apps? no Does this need an update to the documentation? yes If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"The Options Addon Readme had comments in the wrong areas What I did Moved the comments below the correct variables How to test Is this testable with jest or storyshots? N/A Does this need a new example in the kitchen sink apps? N/A Does this need an update to the documentation? N/A If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Created an addon based on the notes addon for adding a readme to all stories within a storiesOf via a decorator, including github-style formatting Why this is necessary The notes addon is designed to allow users to add a note to a particular story, this is designed to allow for a readme that applies to a whole component (or group of components) The ReadMe panel clearly delineates between general notes and a ReadMe file that teams can use to document things like implementation details, why a decision was made, etc. Universal support - as this does not have any impact on rendering it should work across all of the app platforms (I need to confirm this) Example: import React from 'react'; import { withReadMe } from '@storybook/addon-readme'; import { storiesOf } from '@storybook/react'; import BaseButton from '../components/BaseButton'; import readMe from './notes/readme.md'; storiesOf('Addons|ReadMe', module) .addDecorator(withReadMe(readMe)) .add('with text', () => <BaseButton label=""Button with readme"" />); Screenshot screen shot 2018-01-29 at 8 26 26 pm How to test Is this testable with jest or storyshots? Does this need a new example in the kitchen sink apps? yes Does this need an update to the documentation? yes If your answer is yes to any of these, please make sure to include it in your PR. TODO: Add an example to the storybook-official app Update documentation Add a proper README Add tests",Closed
"I wanted to change what route storybook runs on and attempted to accomplish this with the following ""full control"" configuration. const genDefaultConfig = require('@storybook/react/dist/server/config/defaults/webpack.config.js'); module.exports = (baseConfig, env) => { const storybookBaseConfig = genDefaultConfig(baseConfig, env); storybookBaseConfig.entry.preview = storybookBaseConfig.entry.preview.map(function(entry) { if (entry.includes(""webpack-hot-middleware"")) { return `${require.resolve('webpack-hot-middleware/client')}?path=/book/__webpack_hmr&reload=true`; } return entry; }); storybookBaseConfig.output.publicPath = '/book/'; return storybookBaseConfig; }; As mentioned in the issue comment I linked, the webpack hot middleware was not receiving the configuration it needed to enable a custom route. I constructed a minimal configuration for webpack hot middleware including the path. How to test Use a ""full control"" config as described and the default config and ensure HMR works for both storybooks Is this testable with jest or storyshots? Not sure Does this need a new example in the kitchen sink apps? I don't think so its not a common case. Does this need an update to the documentation? Possibly not since this is an edge case. If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"What I did I wanted to change what route storybook runs on and attempted to accomplish this with the following ""full control"" configuration. const genDefaultConfig = require('@storybook/react/dist/server/config/defaults/webpack.config.js'); module.exports = (baseConfig, env) => { const storybookBaseConfig = genDefaultConfig(baseConfig, env); storybookBaseConfig.entry.preview = storybookBaseConfig.entry.preview.map(function(entry) { if (entry.includes(""webpack-hot-middleware"")) { return `${require.resolve('webpack-hot-middleware/client')}?path=/book/__webpack_hmr&reload=true`; } return entry; }); storybookBaseConfig.output.publicPath = '/book/'; return storybookBaseConfig; }; As mentioned in the issue comment I linked, the webpack hot middleware was not receiving the configuration it needed to enable a custom route. I constructed a minimal configuration for webpack hot middleware including the path. How to test Use a ""full control"" config as described and the default config and ensure HMR works for both storybooks Is this testable with jest or storyshots? Not sure Does this need a new example in the kitchen sink apps? I don't think so its not a common case. Does this need an update to the documentation? Possibly not since this is an edge case. If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"What I did Added support to add more viewports/devices Added support to replace the entire viewports Organized the code respectively Added viewport addon to the cra-kitchen-sink example How to test cd examples/cra-kitchen-sink yarn storybook You will see the viewport panel is added Change the viewports.json file locaed under .storybook Observe the changes Is this testable with jest or storyshots? Yes Does this need a new example in the kitchen sink apps? No, I added it to the cra-kitchen-sink already Does this need an update to the documentation? Yes, but once the PR is reviewed If your answer is yes to any of these, please make sure to include it in your PR.",Closed
I improved the tree view to automatically select the first story (leaf) when opening a group if possible. It allows the styleguide to open a section more easily so an user could go to the content faster. How to test Is this testable with jest or storyshots? Not sure Does this need a new example in the kitchen sink apps? No Does this need an update to the documentation? No,Closed
"There is a problem with the latest version of node 8 that is causing circle builds to fail with the error /bin/bash: yarn: command not found This pins our version of node in circle to 8.9.4, which should work. Issue: nodejs/docker-node#649 How to test N/A Is this testable with jest or storyshots? No Does this need a new example in the kitchen sink apps? No Does this need an update to the documentation? No If your answer is yes to any of these, please make sure to include it in your PR.",Closed
This change will by default disable websockets when using onDeviceUI. I've also added option enable websockets back. Issue is #3271 There are few questions that I have: Do we need the option in the first place. Is there anybody using onDeviceUI with websockets. Can we brake it for them? Should we brake it? If we keep the option where it should be documented. There is an increasing need to add tests for RN part. Where is resetStorybook option used at all? What does it bring. Why would we want to reset channel if it already exists?,Closed
Issue: Flow typed components cannot be added to Storybooks easily without defining a new .babelrc. We only need to include a babel plugin to make it work so I think it's worth the extra package. What I did Added babel-preset-flow to the default .babelrc and How to test Example app has a FlowButton,Closed
"See https://storybooks.slack.com/archives/C4Q0S3MQR/p1503243475000043 I've added only those bootsrappers, lack of which produced issues for me. Maybe it's worth to add some more (or remove bootstrap:docs) The issues I faced are: In, Stricter linting rules for imports #1676, the only reason we can't promote import/extensions to ""error"" level is that packages highlight.js and fuse.js are treated by this rule as local files unless they're actually installed In Use Flow instead of prop-types in lib/components #1696, I have to add dependencies to eslint-plugin-flowtype, eslint-plugin-flowtype-errors, and flow-bin to root package instead of lib/components so that they're installed with simple yarn install without bootstrapping The main problem is that all those issues are discoverable only when it actually fails on CI (unless you run yarn bootstrapp -- --reset before each commit, after you made the changes)",Closed
"This came up in: #1501 A node_module we want to use has not been transpiled to es5 before publishing. We could add the module to be run through babel, or we could do this: Switch over to an alternative minifier. This PR swaps UglifyJS for Babel-Minify. Why? Well the browsers we target actually support 90%+ of ES6+. Transpiling down Related issue: #1005 This only affects static builds! How to test Run yarn build-storybook on cra-kitchen-sink Serve the static site What about bundle size? 1.396.924 bytes (1,4 MB on disk) That's down considerably from before: 2.032.284 bytes (2 MB on disk)",Closed
"WIP This is an example project for hosted version of RN storybook. Video: https://www.youtube.com/watch?v=cKNEnRfO2rk It allows to separately start storybook server somewhere/create a app with storybook. Then you start storybook app, point the phone to qr code, and storybook server/client connect to each other. Why would somebody need this? IT can work greatly for some kind of ui lib. User downloads your ui lib see what component you have, and then you can allow him to play with it more, by telling him to go to some website, scan qr code and play with storybook. That way user doesn't have to check out your project, download npm dependencies, and start storybook to play with it. For this example to work I need: #1639, #1407 merged I added this pr so I could discuss about it in slack.",Closed
"If it's passed, command exits after successful start: $ start-storybook -p 9010 -s public ""--smoke-test"" @storybook/react v3.2.8 => Loading static files from: /Users/jetbrains/IdeaProjects/storybook/examples/cra-kitchen-sink/public . => Loading custom addons config. => Using default webpack setup based on ""Create React App"". webpack built 294534ec7311b42fa4ae in 6564ms Storybook started on => http://localhost:9010/ Done in 8.73s.",Closed
"Issue: -documentation system is limited and hard to maintain- What I did I build a new documentation site built with next.js Goals pages based on markdown & react great multi-framework support ( progress by @ndelangen ) pages should be fully viewable in GitHub great dev experience (HMR) great user experience (rich design) great accessibility fast, first paint and TTI automatic contributions ( progress by @ndelangen ) multiple versions support ( progress by @igor-dv ) deploy from CI to main URL when on master deploy to branch-URL when on PR ( handled by netlify ) Place branch-URL on PR prepare for multi-language support provide a page with statistics on the repo & npm, maybe some nice graphs? ( why storybook ) embed a storybook example list of community examples How to test It's on netlify",Closed
"Previously it was not possible to get sufficient control over the roots that the react-native CLI would use. Specifically in the case when the projectDir and configDir are the same, but it's desirable for the packager to resolve symlinks one level up in the directory hierarchy. Our specfic case is this. We have a Lerna monorepo where we end up with a symlink that traverse the directory structure one level up for native packages. The method added in #1530 is not sufficient as it only considers the node_modules at native/node_modules, but not any of native/packages/*/node_modules where the actual symlinks are located. The code is available here ├── native │   ├── rn-cli.config.js │   └── storybook │       ├── addons.js │       ├── index.android.js │       ├── index.ios.js │       └── storybook.js <--- Native config │   ├── packages │   │   ├── react-native-bpk-component-button │   │   │   ├── index.js │   │   │   ├── package.json │   │   │   ├── readme.md │   │   │   ├── rightarrow_360.png │   │   │   ├── src │   │   │   ├── node_modules <-- Contains the symlink to `bpk-tokens` │   │   │   └── stories.js ├── packages │   ├── bpk-tokens <-- Package that we symlink via lerna in native packages What I did I've added a new flag to storybook-start.js, --react-native-config which is the path to a react native CLI config. When specified it will be passed to the react native cli start invocation. It also disables certain other flags passed such as --projectRoots and --root as these will otherwise override what's specified in the config. For our codebase this means we've gone frome Looking for JS files in /path/to/project/native/storybook /path/to/project/native /path/to/project/native to Looking for JS files in /path/to/project/native /path/to/project using the following rn-cli.config.js const path = require('path'); const config = { getProjectRoots() { return [path.resolve(__dirname), path.resolve(__dirname, '..')]; }, }; module.exports = config; How to test Is this testable with jest or storyshots? The rest of storybook-start.js is not covered by test so I have not added any, but I'm happy to do so. Does this need a new example in the kitchen sink apps? No idea Does this need an update to the documentation? Yes most likely the behaviour around the --react-native-config flag needds to be documented. If your answer is yes to any of these, please make sure to include it in your PR. I'll do this given you are okay with this approach Thanks for an awesome project 🎉",Closed
Issue: related to #1773 What I did Adding now.sh deployment for docs TBD Generate now.json file with the latest versions Add deploy and alias npm scripts to package.json Call docs deployment from the CI Add authentication token to the CI variables Add public dir to git ignore and do not commit the exported version Add a real domain (instead of the storypuke.tk) Add endpoint with all the versions - not sure if should be done in this PR. How to test TBD,Closed
"Issue: In the Story Source section of Info addon JSX is not generated correctly: example: <UIRadio options=[""Mr."", ""Mrs."", ""Ms.""] /> or <UILabel title=""Foo"" style={ color: '#eee' } /> You cannot just copy and paste that code, because options array (or style object) needs curly braces around it. What I did I fixed that issue, valid JSX is generated. How to test Is this testable with jest or storyshots? Don't know Does this need a new example in the kitchen sink apps? Don't think so Does this need an update to the documentation? No If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Issue: Storykinds were not sorted alphabetically What I did Using two functions to sort a Map and the array of stories How to test Is this testable with jest or storyshots? Yes, it could be, but it's just a sorting matter Does this need a new example in the kitchen sink apps? Nope Does this need an update to the documentation? No I dont't think so",Closed
"Issue: displayed story source did not reflect actual usage for function props. Current version shows someProp={myCallback()} or someProp={anonymous()}, which, while it indicates that it is a function, implies that the function is called and the result used as the prop to anyone reading it as JSX. What I did Tweaked output to now display someProp={myCallback} or someProp={anonymousFunction}. This is still very distinct from any other type: bool: someProp string: someProp=""foo"" number: someProp={3} object: someProp={{foo: ""foo""}} component/element: someProp={<Foo />} array: someProp={[""foo"", ""bar""]} How to test Is this testable with jest or storyshots? Yes, but neither appear to be used within the addon/info directory. The result of running npm test within examples/cra-kitchen-sink indicated two unrelated storyshot changes, and not the one I would expect, so I suspect it has not been maintained correctly for use with the info addon. I'm not much of a storyshotter, so happy to follow any guidance on this. Does this need a new example in the kitchen sink apps? No Does this need an update to the documentation? Yes, specifically addons/info/docs/home-screenshot.png. I do not have access to a Macbook to generate an accurate screenshot, however. If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Issue In certain configurations Storybook might log the whole Webpack build object when warnings or errors are thrown. This was caused by a logger.error call inside the index.js catch. What I did This fixes by logging the error only when it's an instance of an error. How to test This branch was tested on https://github.com/pagarme/pilot. Before this changes, if an error happens while compiling (e.g. imported file not found) a big object is logged: screenshot from 2017-10-24 11-31-24 Resolves #1889. Is this testable with jest or storyshots? Nope. Does this need a new example in the kitchen sink apps? Nope. Does this need an update to the documentation? Nope. If your answer is yes to any of these, please make sure to include it in your PR.",Closed
Work In Progress New layout system: This introduced a new core principle for storybook called 'layout'. This can be set via a config.js or perhaps in the future could be set per story basis. goals: a config that describes the layout implement config => render support fullscreen switching support switching addonPanel support switching storiesPanel write fantastic unittests for great covefe stretch goals allow setting of additional props expose a list of default layouts importable for users expose some utilities to help manage layouts get global config from config.js allow local config from story allow modifying config at runtime long stretch goals persist changes setting on where to persist (localstorage / config) deal with discrepancies between local changes and config changes,Closed
"Issue: react-modal needs to be ^3 as this is one of the dependencies that has a react peerdep. ^3 unlocks react16 as a peerdep What I did bumped react-modal How to test Is this testable with jest or storyshots? Does this need a new example in the kitchen sink apps? Does this need an update to the documentation? If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Issue: -cli tests fail- What I did Well I attempted to fix by updating angular and the angular-cli to latest versions, it seems to change the behavior, so it's worth a shot. Maybe this fixes things. Also added a flag to the typescript compiler options to: https://github.com/Microsoft/TypeScript/wiki/What's-new-in-TypeScript#new---skiplibcheck How to test run the bootstrapping sequence for core run the angular example (this seems to throw some warnings but it does function correctly) run the test including cli",Closed
"Issue: #2179 builds take wayy too long What I did take advantage of multiple containers given to us by circleci. we have 4 so let's use all of them How to test Is this testable with jest or storyshots? Does this need a new example in the kitchen sink apps? Does this need an update to the documentation? If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Issue If you clone the repository and only run yarn install in the /docs directory and not in the root (/) directory, you get the following error. ReferenceError: Unknown plugin ""transform-runtime"" specified in ""/Users/_name_/Documents/personal/projects/storybook/.babelrc"" at 0, attempted to resolve relative to ""/Users/_name_/Documents/personal/projects/storybook"" What I did Documented the dependency need in hopes of helping future users avoid the ReferenceError",Closed
"Issue: the shape of the node_modules might be different so when resetting node_modules What I did How to test Is this testable with jest or storyshots? Does this need a new example in the kitchen sink apps? Does this need an update to the documentation? If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Issue:#1286 Why this PR exists Currently, our build process requires us to take some additional steps for React Native, which slows the development process. The goal here is to get React Native working with yarn workspaces. Checklist Implement Haul in react native vanilla Implement Haul in crna Update package.json in root directory Update package.json in example apps What I did Updated package.json in examples/crna-kitchen-sink and examples/react-native-vanilla How to test Is this testable with jest or storyshots? Yes (existing tests should cover it) Does this need a new example in the kitchen sink apps? No Does this need an update to the documentation? No If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"The issue In my setup, I always have a cases.spec.js that contains different props for my components. This file provides cases scenarios for both unit tests and storybook. With that in place, my components always have a standard stories.js file next to it, that looks like that: import React from 'react'; import { storiesOf } from '@storybook/react'; import Component from './component'; import cases from './cases.spec.js'; const stories = storiesOf('Category Icon Hover Menu', module) for (const [caseName, caseData] of cases) { stories.addCentered(caseName, () => ( <Component {...caseData} /> )); } I like organising the project like this because I get storybook ""for free"" while writing tests. However, the multiSnapshotWithOptions does not work the way I intended with such setup. I don't like that it always create a __snapshots__ folder with a single file on it. screen shot 2017-11-30 at 13 25 24 The alternative I rewrote getStoryshotFileName to use the stories kind and name instead of the original filename: screen shot 2017-11-30 at 13 31 20 The API is quite simple: import initStoryshots, { snapshotPerStoryAdded, snapshotPerStoryFile  } from '@storybook/addon-storyshots'; initStoryshots({ // filesPattern: snapshotPerStoryAdded, filesPattern: snapshotPerStoryFile, }); with that I also killed the multiSnapshotWithOptions. I hope nobody minds 😄",Closed
"Issue: #1736 This is not currently working What I did Allowed force render to be called via addonAPI.forceReRender ToDo: Manually test Automated tests Update current docs site Update new docs site How to test Is this testable with jest or storyshots? Does this need a new example in the kitchen sink apps? possibly Does this need an update to the documentation? Yes, for addons api If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Issue: sponsor link is not working What I did remove the not working link How to test check the readme Is this testable with jest or storyshots? no Does this need a new example in the kitchen sink apps? no Does this need an update to the documentation? yes If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Issue: The Options Addon Readme had comments in the wrong areas What I did Moved the comments below the correct variables How to test Is this testable with jest or storyshots? N/A Does this need a new example in the kitchen sink apps? N/A Does this need an update to the documentation? N/A If your answer is yes to any of these, please make sure to include it in your PR.",Closed
"Issue: In Story example, propTypes in propTable doesn't shown at all. Besides, it works only if propType be passed as an object (in fact it also could be a string). Besides, it show nothing with propType.object. What I did fixed al this cases; improved the view of propType.oneOf to differentiate it from `propType.oneOfType; improved view of collapsed propType.shape view",Closed
"What I did Created an addon based on the notes addon for adding a readme to all stories within a storiesOf via a decorator, including github-style formatting Why this is necessary The notes addon is designed to allow users to add a note to a particular story, this is designed to allow for a readme that applies to a whole component (or group of components) The ReadMe panel clearly delineates between general notes and a ReadMe file that teams can use to document things like implementation details, why a decision was made, etc. Universal support - as this does not have any impact on rendering it should work across all of the app platforms (I need to confirm this) Example: import React from 'react'; import { withReadMe } from '@storybook/addon-readme'; import { storiesOf } from '@storybook/react'; import BaseButton from '../components/BaseButton'; import readMe from './notes/readme.md'; storiesOf('Addons|ReadMe', module) .addDecorator(withReadMe(readMe)) .add('with text', () => <BaseButton label=""Button with readme"" />); Screenshot screen shot 2018-01-29 at 8 26 26 pm How to test Is this testable with jest or storyshots? Does this need a new example in the kitchen sink apps? yes Does this need an update to the documentation? yes If your answer is yes to any of these, please make sure to include it in your PR. TODO: Add an example to the storybook-official app Update documentation Add a proper README Add tests",Closed
"There is a problem with the latest version of node 8 that is causing circle builds to fail with the error /bin/bash: yarn: command not found This pins our version of node in circle to 8.9.4, which should work. Issue: nodejs/docker-node#649 How to test N/A Is this testable with jest or storyshots? No Does this need a new example in the kitchen sink apps? No Does this need an update to the documentation? No If your answer is yes to any of these, please make sure to include it in your PR.",Closed
I improved the tree view to automatically select the first story (leaf) when opening a group if possible. It allows the styleguide to open a section more easily so an user could go to the content faster. How to test Is this testable with jest or storyshots? Not sure Does this need a new example in the kitchen sink apps? No Does this need an update to the documentation? No,Closed
"Issue: #591 (comment) What I did I wanted to change what route storybook runs on and attempted to accomplish this with the following ""full control"" configuration. const genDefaultConfig = require('@storybook/react/dist/server/config/defaults/webpack.config.js'); module.exports = (baseConfig, env) => { const storybookBaseConfig = genDefaultConfig(baseConfig, env); storybookBaseConfig.entry.preview = storybookBaseConfig.entry.preview.map(function(entry) { if (entry.includes(""webpack-hot-middleware"")) { return `${require.resolve('webpack-hot-middleware/client')}?path=/book/__webpack_hmr&reload=true`; } return entry; }); storybookBaseConfig.output.publicPath = '/book/'; return storybookBaseConfig; }; As mentioned in the issue comment I linked, the webpack hot middleware was not receiving the configuration it needed to enable a custom route. I constructed a minimal configuration for webpack hot middleware including the path. How to test Use a ""full control"" config as described and the default config and ensure HMR works for both storybooks Is this testable with jest or storyshots? Not sure Does this need a new example in the kitchen sink apps? I don't think so its not a common case. Does this need an update to the documentation? Possibly not since this is an edge case. If your answer is yes to any of these, please make sure to include it in your PR.",Closed
